###############################################################################
# KFM Web UI - environment template
#
# Copy this file to a runtime env file (example):
#   cp configs/env/templates/web.env.example configs/env/web.env
#
# IMPORTANT:
#   - Do NOT commit real secrets.
#   - This is a template; trim variables your web app does not use.
###############################################################################

#------------------------------------------------------------------------------
# Runtime
#------------------------------------------------------------------------------
NODE_ENV=development
WEB_HOST=0.0.0.0
WEB_PORT=3000
WEB_LOG_LEVEL=info

# The externally reachable origin for the web UI (used for absolute URLs, links,
# and OAuth/OIDC redirect URIs).
WEB_PUBLIC_ORIGIN=http://localhost:3000

# Optional base path if the app is hosted under a sub-path, e.g. "/kfm".
WEB_BASE_PATH=/

#------------------------------------------------------------------------------
# Governed API (backend)
#------------------------------------------------------------------------------
# Base URL for the governed API the UI talks to.
KFM_API_BASE_URL=http://localhost:8080

# Optional websocket URL if your API exposes WS/SSE endpoints.
KFM_API_WS_URL=ws://localhost:8080

# Client-side request timeout (milliseconds).
KFM_API_TIMEOUT_MS=15000

#------------------------------------------------------------------------------
# Auth (OIDC)
#------------------------------------------------------------------------------
# disabled | oidc
AUTH_MODE=disabled

# Only required when AUTH_MODE=oidc
OIDC_ISSUER_URL=
OIDC_CLIENT_ID=
# Leave blank here; set a real secret only in your non-committed env.
OIDC_CLIENT_SECRET=

# Paths are relative to WEB_PUBLIC_ORIGIN.
OIDC_REDIRECT_PATH=/auth/callback
OIDC_POST_LOGOUT_REDIRECT_PATH=/
OIDC_SCOPES=openid profile email

# Used to sign/encrypt server-side sessions/cookies (set a strong random value).
# Example generation:
#   openssl rand -hex 32
SESSION_SECRET=

SESSION_COOKIE_NAME=kfm_web_session
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_SAMESITE=lax

#------------------------------------------------------------------------------
# Maps
#------------------------------------------------------------------------------
# osm | mapbox | esri | custom
MAP_PROVIDER=osm

MAP_DEFAULT_CENTER_LAT=38.5
MAP_DEFAULT_CENTER_LNG=-96.0
MAP_DEFAULT_ZOOM=4
MAP_MIN_ZOOM=2
MAP_MAX_ZOOM=18

# Raster tile template (used when MAP_PROVIDER=osm or MAP_PROVIDER=custom)
MAP_TILE_URL_TEMPLATE=https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png
MAP_TILE_SUBDOMAINS=a,b,c

# Mapbox (used when MAP_PROVIDER=mapbox)
MAPBOX_ACCESS_TOKEN=
MAPBOX_STYLE_URL=mapbox://styles/mapbox/streets-v12

# Optional: vector tile endpoint for custom renderers.
VECTOR_TILE_URL_TEMPLATE=

#------------------------------------------------------------------------------
# Feature flags
#------------------------------------------------------------------------------
FEATURE_FOCUS_MODE=true
FEATURE_STORY_UI=true
FEATURE_EXPERIMENTAL=false

#------------------------------------------------------------------------------
# Uploads / assets
#------------------------------------------------------------------------------
MAX_UPLOAD_MB=25
ASSET_CDN_ORIGIN=

#------------------------------------------------------------------------------
# Observability
#------------------------------------------------------------------------------
SENTRY_DSN=
SENTRY_ENV=development
SENTRY_TRACES_SAMPLE_RATE=0.0

# OpenTelemetry (optional)
OTEL_SERVICE_NAME=kfm-web
OTEL_EXPORTER_OTLP_ENDPOINT=

#------------------------------------------------------------------------------
# Analytics (optional)
#------------------------------------------------------------------------------
POSTHOG_HOST=
POSTHOG_API_KEY=
GA_MEASUREMENT_ID=

#------------------------------------------------------------------------------
# Build metadata (optional)
#------------------------------------------------------------------------------
APP_NAME=kfm-web
APP_VERSION=0.0.0
APP_GIT_SHA=
APP_BUILD_DATE=

#------------------------------------------------------------------------------
# Frontend build-time variables (ONLY if your framework requires prefixes)
#
# Next.js: variables prefixed with NEXT_PUBLIC_ are exposed to the browser.
# Vite:   variables prefixed with VITE_ are exposed to the browser.
# CRA:    variables prefixed with REACT_APP_ are exposed to the browser.
#
# Keep these aligned with the non-prefixed values above.
#------------------------------------------------------------------------------

# Next.js
NEXT_PUBLIC_WEB_PUBLIC_ORIGIN=http://localhost:3000
NEXT_PUBLIC_KFM_API_BASE_URL=http://localhost:8080
NEXT_PUBLIC_MAP_PROVIDER=osm
NEXT_PUBLIC_MAP_TILE_URL_TEMPLATE=https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png
NEXT_PUBLIC_MAPBOX_ACCESS_TOKEN=

# Vite
VITE_WEB_PUBLIC_ORIGIN=http://localhost:3000
VITE_KFM_API_BASE_URL=http://localhost:8080
VITE_MAP_PROVIDER=osm
VITE_MAP_TILE_URL_TEMPLATE=https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png
VITE_MAPBOX_ACCESS_TOKEN=

# Create React App (CRA)
REACT_APP_WEB_PUBLIC_ORIGIN=http://localhost:3000
REACT_APP_KFM_API_BASE_URL=http://localhost:8080
REACT_APP_MAP_PROVIDER=osm
REACT_APP_MAP_TILE_URL_TEMPLATE=https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png
REACT_APP_MAPBOX_ACCESS_TOKEN=
