# -----------------------------------------------------------------------------
# Kansas Matrix / KFM System â€” .env.example
# -----------------------------------------------------------------------------
#
# Usage
#   1) Copy this file to the runtime env file your stack loads, e.g.:
#        cp configs/env/.env.example .env
#      (or .env.local / .env.development.local depending on your tooling)
#   2) Fill in *real* values locally / in your secret manager.
#
# Safety
#   - NEVER commit real secrets (API keys, passwords, tokens).
#   - Values below are either safe defaults for local dev or placeholders.
#
# Notes
#   - Variable names are intentionally "KFM_*"-prefixed and grouped by concern.
#   - If your code expects different names, rename these to match your config loader.
# -----------------------------------------------------------------------------

# --- Runtime -----------------------------------------------------------------
APP_ENV=development
NODE_ENV=development
TZ=America/Chicago
LOG_LEVEL=debug

# --- HTTP / URLs -------------------------------------------------------------
KFM_HTTP_HOST=0.0.0.0
KFM_HTTP_PORT=3000
# Public base URL used for absolute links, OAuth callbacks, etc.
KFM_PUBLIC_BASE_URL=http://localhost:3000

# --- Database (PostgreSQL) ---------------------------------------------------
# Prefer a single URL if your app supports it.
KFM_DB_URL=postgresql://kfm:kfm@localhost:5432/kfm?sslmode=disable

# Optional discrete fields (useful for some ORMs/tools). If unused, ignore.
KFM_DB_HOST=localhost
KFM_DB_PORT=5432
KFM_DB_NAME=kfm
KFM_DB_USER=kfm
KFM_DB_PASSWORD=CHANGE_ME

# --- Cache / Queue (Redis) ---------------------------------------------------
KFM_REDIS_URL=redis://localhost:6379/0

# --- Object storage / artifacts (S3-compatible) ------------------------------
# Use MinIO locally, AWS S3 in prod, or any S3-compatible endpoint.
KFM_S3_ENDPOINT=http://localhost:9000
KFM_S3_REGION=us-east-1
KFM_S3_BUCKET=kfm
KFM_S3_ACCESS_KEY_ID=CHANGE_ME
KFM_S3_SECRET_ACCESS_KEY=CHANGE_ME

# --- Search / Indexing -------------------------------------------------------
# OpenSearch / Elasticsearch-compatible endpoint.
KFM_SEARCH_URL=http://localhost:9200
KFM_SEARCH_USERNAME=
KFM_SEARCH_PASSWORD=

# --- Auth / Identity (OIDC) --------------------------------------------------
# Modes: local | oidc | disabled  (adjust to your implementation)
KFM_AUTH_MODE=local

# OIDC settings (leave blank for local/dev auth).
KFM_OIDC_ISSUER=
KFM_OIDC_CLIENT_ID=
KFM_OIDC_CLIENT_SECRET=
KFM_OIDC_REDIRECT_URI=http://localhost:3000/auth/callback

# --- Sessions / Cookies ------------------------------------------------------
# MUST be a long random string in non-local environments.
KFM_SESSION_SECRET=CHANGE_ME_TO_A_LONG_RANDOM_STRING
# Comma-separated list. Use exact origins (scheme + host + port).
KFM_CORS_ALLOWED_ORIGINS=http://localhost:3000

# --- GIS / Mapping -----------------------------------------------------------
# Basemap tile URL template (example uses OSM). Replace as needed.
KFM_TILE_URL_TEMPLATE=https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png
# Default map extent (minLon,minLat,maxLon,maxLat). Keep coarse if sensitive.
KFM_DEFAULT_BBOX=-100.0,35.0,-94.0,40.0
KFM_DEFAULT_SRID=4326

# --- Governance / Policy -----------------------------------------------------
# Suggested values: public | restricted | confidential
KFM_POLICY_LABEL=restricted
# default-deny when uncertain: true | false
KFM_FAIL_CLOSED=true

# --- AI / LLM (optional) -----------------------------------------------------
# If you integrate OpenAI or another provider, set keys/secrets via your secret manager.
OPENAI_API_KEY=
KFM_LLM_MODEL=
KFM_LLM_TIMEOUT_MS=30000

# --- Observability (optional) ------------------------------------------------
KFM_METRICS_ENABLED=true
KFM_SENTRY_DSN=
KFM_OTEL_EXPORTER_OTLP_ENDPOINT=

# --- Feature Flags (optional) ------------------------------------------------
KFM_FEATURE_FOCUS_MODE=true
KFM_FEATURE_STORY_UI=true

# --- Paths (optional) --------------------------------------------------------
# Useful in containers / workers.
KFM_DATA_ROOT=/data
KFM_CACHE_ROOT=/tmp/kfm
