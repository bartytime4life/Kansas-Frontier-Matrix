# Kansas Frontier Matrix (KFM) â€” .env.example
# Copy to `.env` in the project root for local Docker Compose development.
# NOTE: Do not commit `.env`. Use a secret manager for real deployments.

# -----------------------------
# Ports (host bindings)
# -----------------------------
FASTAPI_PORT=8000
WEB_PORT=3000
POSTGRES_PORT=5432
NEO4J_HTTP_PORT=7474
NEO4J_BOLT_PORT=7687
OPA_PORT=8181
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001
QDRANT_PORT=6333
MEILI_PORT=7700

# -----------------------------
# PostGIS (PostgreSQL)
# -----------------------------
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=kfm

# -----------------------------
# Neo4j
# -----------------------------
NEO4J_USER=neo4j
NEO4J_PASSWORD=test
NEO4J_AUTH=neo4j/test

# -----------------------------
# Build contexts / source mounts (optional)
# Adjust if your repo uses src/server instead of api/
# -----------------------------
API_BUILD_CONTEXT=./src/server
API_SRC_PATH=./src/server
UVICORN_APP=server.main:app

WEB_BUILD_CONTEXT=./web
WEB_SRC_PATH=./web

# -----------------------------
# Web -> API URL (React)
# -----------------------------
REACT_APP_API_URL=http://localhost:8000
# For UI running as a Docker Compose service, you may prefer:
# REACT_APP_API_URL=http://api:8000

# -----------------------------
# Policy (OPA) (optional; fail-closed when enabled)
# -----------------------------
KFM_POLICY_MODE=disabled
OPA_URL=http://opa:8181

# -----------------------------
# Governance kill switch (deny publish/promote surfaces)
# -----------------------------
KFM_GOVERNANCE_KILL_SWITCH=false

# -----------------------------
# Evidence bundles / object store (optional)
# -----------------------------
MINIO_ROOT_USER=minio
MINIO_ROOT_PASSWORD=minio123
KFM_OBJECT_STORE_ENDPOINT=http://minio:9000
KFM_OBJECT_STORE_BUCKET=kfm

# -----------------------------
# Vector / search (optional)
# -----------------------------
KFM_VECTOR_URL=http://qdrant:6333
KFM_SEARCH_URL=http://meili:7700
MEILI_MASTER_KEY=dev-master-key

# -----------------------------
# Focus Mode / AI (optional)
# -----------------------------
AI_BACKEND_URL=http://host.docker.internal:11434
OLLAMA_MODEL=llama-2-7b-q4
OPENAI_API_KEY=

# -----------------------------
# API app settings (optional pattern)
# -----------------------------
APP_JWT_SECRET_KEY=CHANGEME_dev_only
APP_JWT_ALGORITHM=HS256
APP_ACCESS_TOKEN_EXP_MINUTES=30

# Docker-internal DB URL (service name = db)
APP_DATABASE_URL=postgresql+asyncpg://postgres:postgres@db:5432/kfm

# Docker-internal Neo4j URL (service name = graph)
APP_NEO4J_BOLT_URL=bolt://graph:7687

# -----------------------------
# Optional: Tile server (Martin) for PostGIS live tiles
# -----------------------------
# MARTIN_PORT=3001
# MARTIN_DATABASE_URL=postgres://postgres:postgres@db:5432/kfm
