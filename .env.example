#############################################
# Kansas Matrix System ‚Äî .env.example üîê
# Copy to `.env` and fill in REAL secrets.
#############################################

# =========================
# üß≠ Runtime Mode
# =========================
# Options: development | test | staging | production
KFM_ENV=development

# =========================
# üåê Public / Canonical URLs
# =========================
# Used for link generation + UI config + metadata correctness
KFM_BASE_URL=http://localhost:3000
KFM_API_BASE_URL=http://localhost:8000
# Example production pattern:
# KFM_BASE_URL=https://your-domain
# KFM_API_BASE_URL=https://your-domain/api

# =========================
# üîë Auth (Backend)
# =========================
# ‚ö†Ô∏è CHANGE THIS in any real/shared environment
# Generate: openssl rand -hex 32
KFM_JWT_SECRET=change_me

# Optional hardening knobs (keep commented until implemented)
# KFM_JWT_ALGORITHM=HS256
# KFM_ACCESS_TOKEN_TTL_MINUTES=60

# =========================
# üß† Backend (FastAPI/Uvicorn)
# =========================
FASTAPI_PORT=8000
KFM_API_RELOAD=true
KFM_API_WORKERS=1

# Logging / diagnostics (safe defaults)
# KFM_LOG_LEVEL=INFO
# KFM_JSON_LOGS=false

# CORS (comma-separated). Keep narrow in prod.
# KFM_CORS_ORIGINS=http://localhost:3000

# =========================
# üß≠ Frontend (React)
# =========================
WEB_PORT=3000

# ‚ö†Ô∏è REACT_APP_* is PUBLIC (bundled into the client)
# In local dev:
REACT_APP_API_URL=http://localhost:8000
# If running inside Docker network, you may use:
# REACT_APP_API_URL=http://api:8000

# Optional (only if your UI calls GraphQL directly)
# REACT_APP_GRAPHQL_URL=http://localhost:8000/graphql

# =========================
# üóÑÔ∏è Databases
# =========================

# --- PostGIS (PostgreSQL + PostGIS)
# Docker network hostnames (typical):
# POSTGRES_HOST=db-postgis
# Outside Docker:
# POSTGRES_HOST=localhost
POSTGRES_HOST=db-postgis
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=kfm

# Optional convenience URL (only if your backend supports it)
# DATABASE_URL=postgresql://postgres:postgres@db-postgis:5432/kfm

# --- Neo4j (Knowledge Graph)
# Docker network hostnames (typical):
# NEO4J_HOST=db-neo4j
NEO4J_HOST=db-neo4j
NEO4J_BOLT_PORT=7687
NEO4J_HTTP_PORT=7474

# Neo4j container-style auth (format: user/password)
NEO4J_AUTH=neo4j/neo4j

# Optional app-style URI (only if your backend supports it)
# NEO4J_URI=bolt://db-neo4j:7687
# NEO4J_USER=neo4j
# NEO4J_PASSWORD=neo4j

# =========================
# üõ°Ô∏è Policy (OPA)
# =========================
# Turn on to enforce governed access decisions (recommended for staging/prod)
ENABLE_OPA=false
OPA_URL=http://opa:8181

# Optional: bundle/policy wiring (keep commented until your OPA wiring is finalized)
# OPA_BUNDLE_URL=http://opa:8181/v1/bundles/kfm
# OPA_DECISION_LOG=true

# =========================
# ü§ñ AI / Focus Mode
# =========================
# Local Ollama (recommended for dev)
OLLAMA_API_URL=http://ollama:11434

# Canonical model name used by Focus Mode
FOCUS_MODE_MODEL=llama3.1

# Compatibility alias used by some setups
OLLAMA_MODEL=llama3.1

# Optional external provider (leave blank in example)
OPENAI_API_KEY=

# Optional provider switch (if implemented)
# KFM_AI_PROVIDER=ollama   # ollama | openai | none
# KFM_AI_TIMEOUT_SECONDS=120

# =========================
# üì¶ Object Storage (optional / future-ready)
# =========================
# Used for large artifacts (COGs, PMTiles, PDFs, exports, etc.)
# KFM_OBJECT_STORE=local   # local | s3 | minio
# S3_ENDPOINT_URL=
# S3_REGION=
# S3_BUCKET=
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=

# =========================
# üîé Search / Vector Index (optional / future-ready)
# =========================
# If/when you add full-text + semantic search services
# KFM_SEARCH_ENABLED=false
# ELASTICSEARCH_URL=http://elasticsearch:9200
# VECTOR_STORE_URL=http://qdrant:6333
