# .env.example — Kansas Frontier Matrix (KFM)
# Copy this file to ".env" for local development.
# Never commit ".env" (it may contain secrets).
#
# Canonical pipeline ordering (non-negotiable):
# ETL → STAC/DCAT/PROV catalogs → Neo4j graph → API boundary → Web UI → Story Nodes → Focus Mode
#
# NOTE:
# - Variables here are a conservative baseline aligned with the Master Guide v12 + v13 redesign blueprint.
# - Keep these in sync with the actual config loader(s) used in your codebase.
# - If your implementation does not read a variable, delete it (especially optional sections).

# ------------------------------------------------------------------------------
# Runtime
KFM_ENV=development
KFM_LOG_LEVEL=info
KFM_DEBUG=false

# ------------------------------------------------------------------------------
# Canonical roots (repo-relative)
# v13 readiness expects these top-level roots to exist: .github/ data/ docs/ mcp/ schemas/ src/ tests/ tools/ web/ releases/
KFM_REPO_ROOT=.
KFM_DATA_ROOT=./data
KFM_SCHEMAS_ROOT=./schemas
KFM_RELEASES_ROOT=./releases
KFM_DOCS_ROOT=./docs
KFM_MCP_ROOT=./mcp

# Optional (align with repo conventions if present)
KFM_TOOLS_ROOT=./tools
KFM_TESTS_ROOT=./tests

# Canonical code roots by stage (useful for scripts/tooling)
KFM_PIPELINES_ROOT=./src/pipelines
KFM_GRAPH_CODE_ROOT=./src/graph
KFM_API_CODE_ROOT=./src/server
KFM_WEB_ROOT=./web

# ------------------------------------------------------------------------------
# Data lifecycle (choose ONE layout and keep pipelines deterministic)
# Layout A (stage roots):     data/{raw,work,processed}/<domain>/
# Layout B (domain folders):  data/<domain>/{raw,work,processed}/
#
# Layout A roots (used in some KFM docs/reference material)
KFM_RAW_ROOT=./data/raw
KFM_WORK_ROOT=./data/work
KFM_PROCESSED_ROOT=./data/processed

# ------------------------------------------------------------------------------
# Catalog outputs (STAC / DCAT / PROV)
# Canonical outputs:
# - STAC: data/stac/collections/ and data/stac/items/
# - DCAT: data/catalog/dcat/
# - PROV: data/prov/
KFM_STAC_ROOT=./data/stac
KFM_STAC_COLLECTIONS_ROOT=./data/stac/collections
KFM_STAC_ITEMS_ROOT=./data/stac/items

KFM_DCAT_ROOT=./data/catalog/dcat
KFM_PROV_ROOT=./data/prov

# ------------------------------------------------------------------------------
# Graph import artifacts (generated from processed + catalog outputs)
# Canonical:
# - Graph import: data/graph/csv/ and data/graph/cypher/
KFM_GRAPH_IMPORT_ROOT=./data/graph
KFM_GRAPH_CSV_ROOT=./data/graph/csv
KFM_GRAPH_CYPHER_ROOT=./data/graph/cypher

# ------------------------------------------------------------------------------
# Story Nodes (narrative layer)
# Canonical: docs/reports/story_nodes/
KFM_STORY_NODES_ROOT=./docs/reports/story_nodes
KFM_STORY_NODES_DRAFT_ROOT=./docs/reports/story_nodes/draft
KFM_STORY_NODES_PUBLISHED_ROOT=./docs/reports/story_nodes/published
KFM_STORY_NODES_ASSETS_ROOT=./docs/reports/story_nodes/assets

# ------------------------------------------------------------------------------
# Schemas (used by validators/CI and local tooling)
# Minimum v13 readiness schema roots:
# - schemas/stac/ schemas/dcat/ schemas/prov/ schemas/storynodes/ schemas/ui/ schemas/telemetry/
KFM_SCHEMA_STAC_ROOT=./schemas/stac
KFM_SCHEMA_DCAT_ROOT=./schemas/dcat
KFM_SCHEMA_PROV_ROOT=./schemas/prov
KFM_SCHEMA_STORYNODES_ROOT=./schemas/storynodes
KFM_SCHEMA_UI_ROOT=./schemas/ui
KFM_SCHEMA_TELEMETRY_ROOT=./schemas/telemetry

# Validation mode (for local tooling if implemented): disabled | warn | strict
KFM_VALIDATION_MODE=warn

# ------------------------------------------------------------------------------
# Neo4j (Graph database)
# Used by graph ingest scripts and the API boundary service.
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=changeme
NEO4J_DATABASE=neo4j

# If running Neo4j via docker-compose, the official image often uses NEO4J_AUTH.
# Keep this in sync with NEO4J_USER/NEO4J_PASSWORD.
NEO4J_AUTH=neo4j/changeme
NEO4J_HTTP_PORT=7474
NEO4J_BOLT_PORT=7687

# ------------------------------------------------------------------------------
# API boundary (backend service)
KFM_API_HOST=0.0.0.0
KFM_API_PORT=8000
KFM_API_PUBLIC_URL=http://localhost:8000

# Comma-separated list of allowed origins (CORS)
KFM_CORS_ORIGINS=http://localhost:3000

# API contracts (canonical in v13 blueprint: src/server/contracts/**)
KFM_API_CONTRACTS_ROOT=./src/server/contracts

# Optional: if the API also serves catalogs and Story Nodes as static endpoints
KFM_STAC_PUBLIC_URL=http://localhost:8000/stac
KFM_DCAT_PUBLIC_URL=http://localhost:8000/dcat
KFM_PROV_PUBLIC_URL=http://localhost:8000/prov
KFM_STORY_NODES_PUBLIC_URL=http://localhost:8000/story_nodes

# ------------------------------------------------------------------------------
# Web UI
KFM_WEB_PUBLIC_URL=http://localhost:3000
KFM_WEB_PORT=3000

# Base URL the UI uses to call the API boundary
KFM_WEB_API_BASE_URL=http://localhost:8000

# Optional: MapLibre style URL (leave blank to use a built-in/default style)
KFM_MAP_STYLE_URL=

# ------------------------------------------------------------------------------
# Optional auth (depends on your API implementation)
# Examples: disabled | dev | strict | oidc
KFM_AUTH_MODE=disabled

# Dev-only secret for signing sessions/tokens (set to a strong value in real deployments)
KFM_AUTH_SECRET=dev-only-change-me

# Optional OIDC (only if implemented)
KFM_OIDC_ISSUER_URL=
KFM_OIDC_AUDIENCE=
KFM_OIDC_CLIENT_ID=
