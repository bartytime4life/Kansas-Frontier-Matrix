---
title: "ğŸ” KFM v11 â€” Hazards Refresh Checksum Manifest Module (Diamondâ¹ Î© / CrownâˆÎ© Ultimate Certified)"
path: "src/pipelines/autonomous/hazards-refresh/resources/checksums/README.md"
version: "v11.0.0"
last_updated: "2025-11-22"
review_cycle: "Daily Â· Autonomous"
commit_sha: "<latest-commit-hash>"
sbom_ref: "../../../../../../releases/v11.0.0/sbom.spdx.json"
manifest_ref: "../../../../../../releases/v11.0.0/manifest.zip"
telemetry_ref: "../../../../../../releases/v11.0.0/telemetry/autonomous-hazards-refresh.json"
telemetry_schema: "../../../../../../schemas/telemetry/autonomous-hazards-refresh-v1.json"
governance_ref: "../../../../../../docs/standards/governance/ROOT-GOVERNANCE.md"
data_contract_ref: "../../../../../../docs/contracts/data-contract-v3.json"
license: "MIT"
mcp_version: "MCP-DL v6.3"
markdown_protocol_version: "KFM-MDP v11.0.0"
status: "Active / Enforced"
doc_kind: "Checksum Module"
semantic_document_id: "kfm-hazards-checksum-module-v11"
doc_uuid: "urn:kfm:pipelines:autonomous:hazards-refresh:resources:checksums:v11"
machine_extractable: true
accessibility_compliance: "WCAG 2.1 AA+"
fair_category: "F1-A1-I1-R1"
care_label: "Public / Medium-Risk"
immutability_status: "version-pinned"
---

<div align="center">

# ğŸ” **Hazards Refresh â€” Checksum Manifest Module (v11)**  
`src/pipelines/autonomous/hazards-refresh/resources/checksums/README.md`

**Purpose:**  
Define the checksum manifest system used by the **Autonomous Hazards Refresh Pipeline**, ensuring  
cryptographic integrity, deterministic recomputation, CI enforcement, and reproducible STAC asset promotion  
under KFM v11.

</div>

---

# ğŸ“˜ Overview

This module stores **checksums/manifest.json**, the authoritative hash ledger for all STAC Item assets  
generated by the Hazards Refresh pipeline.

It provides:

- Immutable SHA-256 digests for hazard STAC assets  
- Manifest used for stale-detection & integrity validation  
- CI blockers for mismatched or missing checksums  
- Provenance metadata for hazard data promotion  
- Support for multi-hash fields (optional, v11+)  

Checksum enforcement prevents:

- Accidental upstream data drift  
- Silent provider content changes  
- Unvalidated STAC Items entering Neo4j  
- Loss of reproducibility between runs  
- Non-deterministic DAG behavior  

---

# ğŸ—‚ Directory Layout (v11)

```text
src/pipelines/autonomous/hazards-refresh/resources/checksums/
â”‚
â”œâ”€â”€ README.md                # This file (v11 MDP)
â””â”€â”€ manifest.json            # SHA-256 checksum manifest for hazard STAC assets
```

---

# ğŸ”‘ manifest.json (Integrity Specification)

The manifest file MUST include, at minimum:

- SHA-256 for each STAC Item's asset (CSV/Parquet/GeoJSON/aux)  
- Last-known checksum per provider feed  
- Timestamp of last verification  
- Optional multihash (`mh:sha256-hex`) for KFM-STAC v11 compatibility  
- Optional lineage pointers (to reconstruct provenance)  

### Example Structure (v11)

```json
{
  "version": "1.0.0",
  "last_updated": "2025-11-22T03:00:00Z",
  "entries": {
    "noaa.storm_events.latest.csv": {
      "sha256": "b3f8d5fae2c44ac9cd2f7c0e3cd74f98dbd792e7480a4d2ab1ddc17ee51de3b3",
      "provider": "noaa.storm_events",
      "last_verified": "2025-11-22T03:00:00Z"
    },
    "fema.disasters.ks.json": {
      "sha256": "8ea8afb17c0e0ec9adtesthash000000000000000000000000000000000000",
      "provider": "fema.disasters",
      "last_verified": "2025-11-22T03:00:00Z"
    }
  }
}
```

*All hash values shown above are placeholders.*

---

# âš™ How This Manifest Is Used in the DAG

### Node â†’ `validate_checksums.py`

- Reads `manifest.json`  
- Computes SHA-256 of all STAC Item assets  
- Performs deterministic comparison (sorted keys, stable hashing)  
- Fails + emits structured CI error on mismatch  
- In update mode (allowed only by governance), rewrites manifest with new hash values  

### Node â†’ `detect_stale.py`

- Uses manifest metadata (e.g., last_verified)  
- Compares to provider etag or Last-Modified header  
- Provides early pruning if nothing changed upstream  

### Node â†’ `post_hooks.py`

- Updates telemetry with checksum health status  
- Emits OpenLineage â€œchecksum validationâ€ facet  

---

# ğŸ§¬ PROV-O Lineage Requirements

Checksum verification MUST be recorded via:

```
prov:activity      â†’ "checksum-verify-v11"
prov:used          â†’ local asset path
prov:generatedAtTime
prov:wasAssociatedWith â†’ "kfm-autonomous-hazards"
```

Records MUST appear both in:

- The telemetry bundle  
- Each STAC Itemâ€™s `"kfm:lineage"` block  

---

# ğŸ” CI/CD Enforcement Rules

CI MUST block PRs when:

- `manifest.json` missing required entries  
- A referenced STAC asset lacks a corresponding hash  
- Hash mismatch occurs  
- Manifest keys are out of alphabetical order  
- Manifest JSON fails schema validation  
- Checksum entries removed without governance approval  

All validations occur before any Neo4j sync or pipeline promotion.

---

# ğŸ§­ Best Practices for Updating the Manifest

- NEVER hand-edit STAC asset hash values  
- ALWAYS regenerate through:
  - `validate_checksums.py` in â€œupdate modeâ€  
  - Governance-approved manifest rotation  
- Ensure commit message contains:
  - Hash change explanation  
  - Reference to data source updates  
  - Pipeline run ID  

---

# ğŸ•° Version History

- **v11.0.0 (2025-11-22)** â€” Initial release of the Hazards Refresh checksum module (KFM v11).

---

<div align="center">

**Kansas Frontier Matrix â€” Hazards Refresh Checksum Module (v11)**  
*Integrity Â· Verification Â· Deterministic Data Operations*

</div>

---

### ğŸ”— Footer  
[â¬… Back to Hazards Resources](../README.md) Â· [ğŸ“‘ Schema Module](../schema/README.md) Â· [ğŸ§© Nodes](../../nodes/README.md) Â· [ğŸ› Governance](../../../../../../docs/standards/governance/ROOT-GOVERNANCE.md)

