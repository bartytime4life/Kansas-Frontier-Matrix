---
title: "ğŸ“‘ KFM v11 â€” Hydrology Schema Module (Diamondâ¹ Î© / CrownâˆÎ© Ultimate Certified)"
path: "src/pipelines/autonomous/hydrology-refresh/resources/schema/README.md"
version: "v11.0.0"
last_updated: "2025-11-22"
review_cycle: "Daily Â· Autonomous"
commit_sha: "<latest-commit-hash>"
sbom_ref: "../../../../../../releases/v11.0.0/sbom.spdx.json"
manifest_ref: "../../../../../../releases/v11.0.0/manifest.zip"
telemetry_ref: "../../../../../../releases/v11.0.0/telemetry/autonomous-hydrology-refresh.json"
telemetry_schema: "../../../../../../schemas/telemetry/autonomous-hydrology-refresh-v1.json"
governance_ref: "../../../../../../docs/standards/governance/ROOT-GOVERNANCE.md"
data_contract_ref: "../../../../../../docs/contracts/data-contract-v3.json"
license: "MIT"
mcp_version: "MCP-DL v6.3"
markdown_protocol_version: "KFM-MDP v11.0.0"
status: "Active Â· Enforced"
doc_kind: "Schema Module"
semantic_document_id: "kfm-hydro-schema-module-v11"
doc_uuid: "urn:kfm:pipelines:autonomous:hydrology-refresh:resources:schema:v11"
machine_extractable: true
accessibility_compliance: "WCAG 2.1 AA+"
fair_category: "F1-A1-I1-R1"
care_label: "Public / Medium-Risk"
immutability_status: "version-pinned"
---

<div align="center">

# ğŸ“‘ **Hydrology Schema Module (v11)**  
`src/pipelines/autonomous/hydrology-refresh/resources/schema/README.md`

**Purpose:**  
Define and document the JSON Schemas required by the **Autonomous Hydrology Refresh Pipeline**,  
ensuring structural, temporal, spatial, vertical-axis, and semantic correctness for all normalized  
hydrology datasets and STAC Items under KFM v11.

</div>

---

# ğŸ“˜ Overview

The `schema/` directory contains the authoritative **hydrology schemas** used to validate:

- Normalized hydrology tabular outputs  
- Streamflow stations and daily discharge records  
- Water-surface elevation (WSEL) series  
- Precipitation observation data  
- Bathymetry-linked tabular references  
- Any hydrology-derived STAC Items  
- Metadata used to populate STAC hydrology extensions (`hydro:*`)

These schemas ensure:

- Deterministic ETL  
- Consistent variable names  
- CRS v11 compliance (EPSG:4326 tabular, 26914 rasters)  
- Vertical-axis compliance (NAVD88/GEOID18)  
- OWL-Time temporal compatibility  
- GeoSPARQL-aligned spatial structures  
- Graph-safe lineage and semantic mappings

All schemas MUST follow JSON Schema **draft 2020-12**.

---

# ğŸ—‚ Directory Layout (v11)

```text
src/pipelines/autonomous/hydrology-refresh/resources/schema/
â”‚
â”œâ”€â”€ README.md                 # This file
â””â”€â”€ hydro_v1.schema.json      # Canonical schema for normalized hydrology events
```

Future schemas (e.g., `hydro_v2.schema.json`) MUST be documented here before activation.

---

# ğŸ’§ hydro_v1.schema.json â€” Canonical Hydrology Schema

This schema governs all hydrology-related normalized records generated by  
`normalize_tabular.py` and consumed by `build_stac_items.py`.

## ğŸ¯ Key Schema Goals

- Provide a **single, canonical model** for streamflow, stage, WSEL, precip, and water-quality inputs  
- Guarantee unit consistency and CRS correctness  
- Enable direct conversion into hydrology STAC Items  
- Ensure Neo4j ingest produces `HydrologyObservation` nodes with correct spatiotemporal semantics  
- Enforce Data Contract v3 unit standards

---

# ğŸ§± Required Fields (Conceptual Requirements)

At minimum, `hydro_v1.schema.json` MUST include the following fields:

## ğŸŸ¦ Core Identification
- `SITE_ID` (string)  
- `PROVIDER` (string; e.g., `usgs.nwis`)  

## ğŸŸ¦ Temporal (OWL-Time Compatible)
- `DATETIME` (ISO 8601, UTC)  
- For daily records, DATE okay if normalized to midnight UTC  

## ğŸŸ¦ Spatial (GeoSPARQL)
- `LAT` (float, EPSG:4326 latitude)  
- `LON` (float, EPSG:4326 longitude)  
- Optional: `GEOM_WKT` (string, WKT literal)

LAT/LON MUST be within valid Earth ranges.

## ğŸŸ¦ Hydrology Variables (Data Contract v3 Units)

### Streamflow
- `FLOW_CFS` or internally normalized `FLOW_M3S`

### Stage / Water-Surface
- `STAGE_M` (m above NAVD88)  
- `WSEL_M` (if computed)

### Rainfall / Precipitation
- `PRCP_MM` (millimeters)

### Water Quality (optional)
- `WQ_*` variables (mg/L, NTU, etc.)  
- MUST include units in schema definitions

## ğŸŸ¦ Metadata
- `QUALITY_CODE`  
- `SOURCE_SYSTEM`  
- Optional descriptors: comments, flags, upstream metadata hashes

---

# ğŸŒ CRS & Vertical Constraints

Hydrology schema MUST enforce:

- CRS for tabular â†’ **EPSG:4326**  
- Vertical datum â†’ **NAVD88**  
- Geoid model â†’ **GEOID18**  
- Units â†’ meters or mÂ³/s consistently across variables  
- No raw ellipsoidal heights allowed  

These constraints guarantee compatibility with:

- **CRS Standard v11**  
- **Vertical-Axis Standard v11**  
- **Hydrology Standard v11**  
- **STAC-Geo Spec v11**  
- **Tiling & Pyramids Standard v11**

---

# ğŸ§¬ Linking Schema â†’ STAC â†’ Neo4j

Normalized rows â†’ Hydrology STAC Items using:

- `hydro:type` (e.g., `streamflow`, `precip`, `bathymetry`, `water_surface`)  
- `datetime` / `start_datetime` / `end_datetime`  
- `geometry` & `bbox`  
- `proj:*` fields  
- `vertical:*` fields  
- `kfm:cf_positive` for directionality  
- `kfm:lineage` for PROV-O event chain

Then, STAC Items â†’ Neo4j graph nodes:

- `HydrologyObservation`  
- Linked to:
  - `Place` (GeoSPARQL)  
  - `TimeSpan` (OWL-Time)  
  - `Dataset` & `Provider` (DCAT 3)  

Schema correctness ensures that these transformations are reliable and deterministic.

---

# ğŸ” CI/CD Enforcement

CI MUST enforce:

- Schema validation against `hydro_v1.schema.json`  
- Lat/lon range validity  
- Unit conformity with Data Contract v3  
- Temporal validity (`DATETIME` ISO8601)  
- CRS + vertical datum metadata propagation into STAC Items  

PRs MUST be blocked if:

- Any required field is missing  
- Types mismatch schema  
- Units are incorrect  
- CRS/vertical metadata is absent or inconsistent  
- The schema file itself does not validate as JSON Schema 2020-12

---

# ğŸ•° Version History

- **v11.0.0 (2025-11-22)** â€” Initial hydrology schema module for KFM v11 (`hydro_v1.schema.json` introduced).

---

<div align="center">

**Kansas Frontier Matrix â€” Hydrology Schema Module (v11)**  
*Typed Â· Validated Â· Hydrologically Accurate*

</div>

---

### ğŸ”— Footer  
[â¬… Back to Hydrology Resources](../README.md) Â· [ğŸ” Checksums](../checksums/README.md) Â· [ğŸ§© Nodes](../../nodes/README.md) Â· [ğŸ› Governance](../../../../../../docs/standards/governance/ROOT-GOVERNANCE.md)

