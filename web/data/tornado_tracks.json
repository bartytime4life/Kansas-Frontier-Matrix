{
  "id": "tornado_tracks",
  "title": "Tornado Tracks (SPC 1950–present)",
  "type": "geojson",
  "url": "data/processed/tornado_tracks_ks.json",
  "category": "hazards",

  "time": { "start": "1950-01-01", "end": null },
  "timeProperty": "date",

  "visible": false,
  "minzoom": 4,
  "maxzoom": 19,
  "interactive": true,

  "popup": ["date", "ef_scale", "length_km", "fatalities"],

  "paint": {
    "line": {
      "line-color": "#D00000",
      "line-width": [
        "match",
        [
          "upcase",
          [
            "coalesce",
            ["to-string", ["get", "ef_scale"]],
            ["to-string", ["get", "f_scale"]],
            ["concat", "EF", ["to-string", ["get", "ef"]]],
            ["concat", "F",  ["to-string", ["get", "f"]]],
            ["concat", "EF", ["to-string", ["get", "ef_rating"]]],
            ""  /* fallback */
          ]
        ],
        "EF0", 1.0, "F0", 1.0,  "0", 1.0,
        "EF1", 1.4, "F1", 1.4,  "1", 1.4,
        "EF2", 1.8, "F2", 1.8,  "2", 1.8,
        "EF3", 2.2, "F3", 2.2,  "3", 2.2,
        "EF4", 2.8, "F4", 2.8,  "4", 2.8,
        "EF5", 3.4, "F5", 3.4,  "5", 3.4,
        1.2
      ],
      "line-opacity": 0.95,
      "line-join": "round",
      "line-cap": "round"
    },
    "circle": { "circle-opacity": 0 },
    "fill":   { "fill-opacity": 0 }
  },

  "fields": {
    "date":        { "type": "string", "format": "date-time", "description": "Event date/time (ISO8601)" },
    "ef_scale":    { "type": "string", "description": "EF scale (EF0–EF5). Pre-2007 data may use F-scale." },
    "f_scale":     { "type": "string", "description": "Legacy F-scale (F0–F5). Optional." },
    "ef":          { "type": "number", "description": "EF numeric (0–5). Optional." },
    "f":           { "type": "number", "description": "F numeric (0–5). Optional." },
    "length_km":   { "type": "number", "units": "km", "description": "Path length" },
    "width_m":     { "type": "number", "units": "m", "description": "Max path width (optional)" },
    "fatalities":  { "type": "number", "description": "Fatalities" },
    "injuries":    { "type": "number", "description": "Injuries (optional)" },
    "fips":        { "type": "string", "description": "County/area FIPS (optional)" },
    "source":      { "type": "string", "description": "Data source (e.g., NOAA SPC)" }
  },

  "search": { "qFields": ["ef_scale", "f_scale", "date", "fips"] },

  "legendSymbol": "tornado",
  "attribution": "NOAA Storm Prediction Center (SPC)"
}
