{
  "type": "FeatureCollection",
  "name": "counties_timeslices",
  "bbox": [-102.051, 36.993, -94.588, 40.003],
  "generated": "2025-09-28T00:00:00Z",
  "attribution": "Kansas DASC (Archive layers)",
  "license": "Public Domain / State of Kansas",

  "kfm_meta": {
    "schema_version": "1.2",
    "category": "administrative",
    "description": "Historical county boundary timeslices for Kansas (demo rectangles for wiring). Replace with authoritative polygons when available.",
    "timeProperty": { "start": "properties.valid_start", "end": "properties.valid_end", "format": "date" },
    "popup": ["name", "valid_start", "valid_end", "source"],
    "legend": {
      "type": "fill",
      "label": "County timeslices",
      "classes": [
        { "label": "Historical slice", "fill": "#93C5FD", "stroke": "#1D4ED8", "dash": [3, 2] },
        { "label": "Current slice",    "fill": "#60A5FA", "stroke": "#1D4ED8" }
      ],
      "notes": "Dashed outline = historical (valid_end not null)."
    },
    "style": {
      "renderer": "sublayers",
      "sublayers": [
        {
          "id": "county_timeslices_historic",
          "filter": { "properties.valid_end$notnull": true },
          "fillColor": "#93C5FD",
          "fillOpacityByZoom": [
            { "zoom": 5, "opacity": 0.25 },
            { "zoom": 8, "opacity": 0.35 },
            { "zoom": 12, "opacity": 0.45 }
          ],
          "lineColor": "#1D4ED8",
          "lineOpacity": 0.95,
          "lineJoin": "round",
          "lineWidthByZoom": [
            { "zoom": 5, "width": 0.5 },
            { "zoom": 9, "width": 0.8 },
            { "zoom": 13, "width": 1.1 }
          ],
          "lineDasharray": [3, 2]
        },
        {
          "id": "county_timeslices_current",
          "filter": { "properties.valid_end$null": true },
          "fillColor": "#60A5FA",
          "fillOpacityByZoom": [
            { "zoom": 5, "opacity": 0.28 },
            { "zoom": 8, "opacity": 0.38 },
            { "zoom": 12, "opacity": 0.48 }
          ],
          "lineColor": "#1D4ED8",
          "lineOpacity": 0.95,
          "lineJoin": "round",
          "lineWidthByZoom": [
            { "zoom": 5, "width": 0.6 },
            { "zoom": 9, "width": 0.9 },
            { "zoom": 13, "width": 1.2 }
          ]
        }
      ],
      "hover": {
        "lineColor": "#111827",
        "lineWidthDelta": 0.6
      },
      "selection": {
        "lineColor": "#111827",
        "lineWidthDelta": 0.9
      }
    },
    "filters": {
      "quick": [
        { "label": "Current only",    "where": { "properties.valid_end$null": true } },
        { "label": "Historical only", "where": { "properties.valid_end$notnull": true } },
        { "label": "Before 1861",     "where": { "properties.valid_start$lt": "1861-01-01" } }
      ]
    },
    "search": {
      "qFields": ["properties.name", "properties.fips", "properties.source"],
      "minLength": 2,
      "accentFold": true,
      "placeholder": "Search countiesâ€¦"
    },
    "ordering": {
      "zindex": 330,
      "before": "plss_parcels",
      "after": "ks_hydro"
    },
    "stac": {
      "collection": "kfm-admin",
      "item": "counties_timeslices_demo"
    },
    "alternates": {
      "data_fallbacks": [
        { "format": "pmtiles", "url": "web/tiles/counties_timeslices.pmtiles", "note": "Prefer tiled polygons at statewide scales" },
        { "format": "geojson", "url": "web/data/counties_timeslices.json" }
      ]
    }
  },

  "provenance": {
    "source": "Kansas GIS Archive (DASC), historical county boundary compilations",
    "notes": "Sample timeslices for wiring; replace with authoritative polygons as available"
  },

  "fields": {
    "name":        { "type": "string", "description": "County name (at that time)" },
    "fips":        { "type": "string", "description": "Modern FIPS (if applicable)" },
    "valid_start": { "type": "string", "format": "date", "description": "Boundary start date" },
    "valid_end":   { "type": ["string", "null"], "format": "date|null", "description": "Boundary end date (null = still valid)" },
    "source":      { "type": "string", "description": "Cartographic / archival source" }
  },

  "features": [
    {
      "type": "Feature",
      "id": "shawnee_1855_1861",
      "geometry": {
        "type": "Polygon",
        "coordinates": [[
          [-95.90, 38.90],
          [-95.30, 38.90],
          [-95.30, 39.30],
          [-95.90, 39.30],
          [-95.90, 38.90]
        ]]
      },
      "properties": {
        "name": "Shawnee",
        "fips": "177",
        "valid_start": "1855-01-01",
        "valid_end": "1861-01-28",
        "source": "DASC archive compilation"
      }
    },
    {
      "type": "Feature",
      "id": "shawnee_1861_current",
      "geometry": {
        "type": "Polygon",
        "coordinates": [[
          [-95.92, 38.88],
          [-95.28, 38.88],
          [-95.28, 39.32],
          [-95.92, 39.32],
          [-95.92, 38.88]
        ]]
      },
      "properties": {
        "name": "Shawnee",
        "fips": "177",
        "valid_start": "1861-01-28",
        "valid_end": null,
        "source": "DASC archive compilation"
      }
    },
    {
      "type": "Feature",
      "id": "ellis_1867_current",
      "geometry": {
        "type": "Polygon",
        "coordinates": [[
          [-99.70, 38.60],
          [-99.00, 38.60],
          [-99.00, 39.10],
          [-99.70, 39.10],
          [-99.70, 38.60]
        ]]
      },
      "properties": {
        "name": "Ellis",
        "fips": "051",
        "valid_start": "1867-03-03",
        "valid_end": null,
        "source": "DASC archive compilation"
      }
    }
  ]
}
