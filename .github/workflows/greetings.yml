name: "Community — Greetings"

on:
  issues:
    types: [opened]
  pull_request_target:
    types: [opened]
  workflow_dispatch:

permissions:
  contents: read
  issues: write
  pull-requests: write

concurrency:
  group: greetings-${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: false

jobs:
  greet:
    name: Send first-time contributor greetings
    runs-on: ubuntu-latest
    timeout-minutes: 5
    # Skip common bots; extend as needed
    if: >
      github.actor != 'dependabot[bot]' &&
      github.actor != 'github-actions[bot]' &&
      github.actor != 'renovate[bot]'

    steps:
      # NOTE: No checkout — we never run untrusted repo code for this workflow.
      - name: Send greeting
        uses: actions/first-interaction@v1
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}

          # First-time issue message
          issue-message: |
            👋 Welcome to **Kansas-Frontier-Matrix**!

            Thanks for opening your first issue. A few helpful links to get you oriented:
            - 🧭 [CONTRIBUTING](./CONTRIBUTING.md)
            - 🗺️ Roadmap & labels: [.github/roadmap/](./.github/roadmap/)  
            - ✅ PR hygiene & CI hints: [.github/workflows/](./.github/workflows/)

            Feel free to apply `discussion` or `help wanted` labels to guide triage. We’ll review shortly — thanks again!

          # First-time PR message
          pr-message: |
            🎉 Thanks for your first pull request to **Kansas-Frontier-Matrix**!

            Heads-up on our checks:
            - 🔍 STAC validation & metadata hygiene
            - 🧪 Tests/lint (Python & web)
            - 🔒 Security (Scorecard/CodeQL)
            - 🧭 Docs & link checks

            Tips:
            - Include a brief **context** and **before/after** in your PR description.
            - If you’re touching data/config, mention any **repro steps** (Makefile targets, scripts).

            A maintainer will review and provide feedback soon — appreciate your contribution! 🚀
