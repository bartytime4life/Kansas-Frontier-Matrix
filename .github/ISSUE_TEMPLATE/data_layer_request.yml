# ğŸ—ºï¸ .github/ISSUE_TEMPLATE/data_layer_request.yml
# Purpose: Provenance-first, governance-aware issue form for requesting a NEW data layer / dataset / source in KFM
# Alignment: MCP-DL v6.3 Â· KFM-MDP v11.2.6 Â· KFM-PIPE v11 Â· KFM-ONT v11 Â· FAIR+CARE
# SPDX-License-Identifier: CC-BY-4.0

name: "ğŸ—ºï¸ Data Layer Request (STAC/DCAT/PROV)"
description: "Request a new dataset/layer/source (or a governed update) with provenance, licensing, and sensitivity captured up front."
title: "Data layer: [Short name] â€” [Region/Theme]"
labels:
  - "type: data"
  - "triage"
assignees:
  - "bartytime4life"

body:
  - type: markdown
    attributes:
      value: |
        ## ğŸ—ºï¸ Data Layer / Dataset / Source Request

        This form is the **governed front door** ğŸšªğŸ§­ for adding or updating data in **Kansas Frontier Matrix (KFM)**.

        KFM is **provenance-first** ğŸ§¾ and **governance-aware** ğŸ”’:
        - We treat **STAC/DCAT metadata**, **W3C PROV lineage**, and **checksums** as first-class artifacts.
        - Data work is typically delivered via **governed PRs** (not direct pushes), with validation gates.

        > [!IMPORTANT]
        > ğŸ” **Do not include secrets, credentials, private keys, PII, or restricted/sensitive coordinates.**
        > If access requires credentials, describe the *method* (e.g., â€œGoogle Drive shareâ€, â€œEarth Engine private assetâ€, â€œAPI tokenâ€) but do **not** paste tokens/keys here.

        > [!TIP]
        > If youâ€™re unsure about anything, pick **â€œUnknownâ€** where available and explain in your own wordsâ€”maintainers will help route it.

  - type: dropdown
    id: request_kind
    attributes:
      label: "Request type"
      description: "What kind of change are you requesting?"
      options:
        - "â• Add a NEW dataset/layer/source"
        - "ğŸ” Update an EXISTING dataset/layer/source (metadata or content)"
        - "ğŸ§¹ Deprecate/replace a dataset/layer/source"
        - "ğŸ§© Add a DERIVED layer (model output / analysis product)"
        - "â“ Not sure"
      default: 0
    validations:
      required: true

  - type: input
    id: layer_name
    attributes:
      label: "Layer / dataset name (human-friendly)"
      description: "A short, descriptive name people will recognize."
      placeholder: "Example: Kansas Historical Treaties (Vector Polygons)"
    validations:
      required: true

  - type: input
    id: short_slug
    attributes:
      label: "Proposed slug / ID (optional but helpful)"
      description: "If you have a preferred identifier for STAC/DCAT/Graph usage."
      placeholder: "Example: ks-treaties-historic-v1"
    validations:
      required: false

  - type: textarea
    id: summary
    attributes:
      label: "Summary"
      description: "What is this layer, and why should it exist in KFM?"
      placeholder: |
        - What it represents:
        - Why it matters:
        - Primary users / workflows:
        - How it connects to existing KFM topics:
    validations:
      required: true

  - type: dropdown
    id: kfm_domain
    attributes:
      label: "KFM domain / theme"
      description: "Where does this layer conceptually belong?"
      options:
        - "ğŸ“œ Historical data (maps, treaties, settlements, archives)"
        - "ğŸ›ï¸ Societal dimensions (demographics, governance, justice)"
        - "ğŸŒ¿ Environmental systems (water, climate, ecology, hazards)"
        - "ğŸŒ¾ Agriculture & farming (crops, soils, irrigation, yields)"
        - "ğŸ—“ï¸ Key events & timeline (event-linked layers)"
        - "ğŸ—ï¸ Infrastructure / built environment (roads, rail, utilities)"
        - "ğŸ›°ï¸ Remote sensing (imagery, indices, classification products)"
        - "ğŸ§  Modeling/analytics outputs (simulations, predictions)"
        - "ğŸ“¦ Other / cross-cutting (explain below)"
      default: 0
    validations:
      required: true

  - type: dropdown
    id: data_type
    attributes:
      label: "Data type"
      description: "What kind of data are we ingesting/publishing?"
      options:
        - "ğŸ§© Vector (points/lines/polygons)"
        - "ğŸŸ¦ Raster (imagery/grids/COG/GeoTIFF)"
        - "ğŸ“ˆ Tabular (CSV/Parquet/DB extract)"
        - "ğŸ“„ Document / scan (PDF/images with metadata)"
        - "â±ï¸ Time series / sensor feed"
        - "ğŸ§± 3D / tiles (3D Tiles, terrain, meshes)"
        - "ğŸ§  Derived / model output"
        - "ğŸ§ª Other (explain below)"
      default: 0
    validations:
      required: true

  - type: dropdown
    id: pipeline_stage_guess
    attributes:
      label: "Primary pipeline stage impacted"
      description: "Best guess for where work will land first. (Maintainers will retag.)"
      options:
        - "ğŸ§° ETL / Pipelines (ingest, transforms, tiling, normalization)"
        - "ğŸ—‚ï¸ Catalogs (STAC/DCAT/PROV metadata, discoverability)"
        - "ğŸ•¸ï¸ Graph (entities/relations/citations/timelines)"
        - "ğŸ”Œ API boundary (contracts, redaction, query behavior)"
        - "ğŸ–¥ï¸ UI / Map viewer (styling, rendering, UX)"
        - "ğŸ¬ Story Nodes / Focus Mode (narrative + evidence bundles)"
        - "ğŸ§ª CI / DevEx (validators, gates, workflows)"
        - "â“ Unknown"
      default: 1
    validations:
      required: true

  - type: markdown
    attributes:
      value: |
        ---
        ## ğŸ§¾ Source, Licensing & Access (Required)

  - type: input
    id: source_authority
    attributes:
      label: "Source authority (producer/owner)"
      description: "Who produced/owns the authoritative dataset?"
      placeholder: "Example: USGS / Kansas Geological Survey / County GIS Office"
    validations:
      required: true

  - type: input
    id: source_url
    attributes:
      label: "Source URL / citation (where it comes from)"
      description: "Public URL, landing page, DOI, or authoritative reference."
      placeholder: "Example: https://example.org/datasets/kansas-treaties"
    validations:
      required: true

  - type: input
    id: retrieval_date
    attributes:
      label: "Retrieval / access date"
      description: "When did you access or download it? Use YYYY-MM-DD if possible."
      placeholder: "2026-01-10"
    validations:
      required: true

  - type: input
    id: license_terms
    attributes:
      label: "License / terms of use"
      description: "State the license precisely. If unknown, say 'Unknown' and explain below."
      placeholder: "Example: CC-BY-4.0 / Public Domain / ODbL / Custom terms (link)"
    validations:
      required: true

  - type: dropdown
    id: redistribution_rights
    attributes:
      label: "Redistribution rights"
      description: "Can KFM store and redistribute this data (or derivatives) in the repo/releases?"
      options:
        - "âœ… Yes â€” redistribution allowed"
        - "âš ï¸ Limited â€” redistribution allowed with conditions (explain)"
        - "âŒ No â€” cannot redistribute (KFM may only store pointers/metadata)"
        - "â“ Unknown"
      default: 3
    validations:
      required: true

  - type: textarea
    id: access_method
    attributes:
      label: "Access method (no secrets)"
      description: "How do maintainers access this dataset without sharing credentials in public?"
      placeholder: |
        Examples:
        - Public download link
        - Requires account approval (describe process + who grants access)
        - Google Earth Engine asset (public/private) â€” provide asset path if safe
        - API endpoint (no tokens) + docs link
        - Physical archive / non-digital source (describe how to obtain)
    validations:
      required: true

  - type: markdown
    attributes:
      value: |
        ---
        ## ğŸŒ Coverage & Structure

  - type: textarea
    id: spatial_coverage
    attributes:
      label: "Spatial coverage (generalized)"
      description: "Describe coverage without posting restricted coordinates."
      placeholder: |
        - Region: (state/county/watershed/tribal jurisdiction/etc.)
        - Approx bbox/extent (general): (e.g., 'all Kansas', 'NE Kansas', 'Arkansas River basin')
        - Notes: (edge cases, gaps)
    validations:
      required: true

  - type: textarea
    id: temporal_coverage
    attributes:
      label: "Temporal coverage"
      description: "Date range and temporal resolution."
      placeholder: |
        - Start: YYYY or YYYY-MM-DD
        - End: YYYY or YYYY-MM-DD (or 'present')
        - Resolution: daily / monthly / annual / event-based / irregular
    validations:
      required: false

  - type: input
    id: update_cadence
    attributes:
      label: "Update cadence"
      description: "How often does the source update (if at all)?"
      placeholder: "Example: one-time / monthly / quarterly / annual / near real-time"
    validations:
      required: false

  - type: textarea
    id: formats_assets
    attributes:
      label: "Formats & assets"
      description: "What files/fields exist? Include preferred formats (COG, GeoParquet, PMTiles, etc.) if known."
      placeholder: |
        - Formats: GeoPackage / Shapefile / GeoJSON / GeoTIFF / COG / Parquet / CSV / PDF / etc.
        - Expected size: (rough)
        - Layer count: (single/multi-layer)
        - Attributes/bands of interest:
        - If raster: resolution, bands, nodata
    validations:
      required: true

  - type: textarea
    id: ids_and_catalogs
    attributes:
      label: "Catalog + IDs (STAC/DCAT/PROV plan)"
      description: "Help us plan discoverability + lineage."
      placeholder: |
        If known/proposed:
        - STAC Collection ID:
        - Example STAC Item ID(s):
        - Assets naming (e.g., 'cog', 'thumbnail', 'metadata'):
        - DCAT dataset identifier:
        - PROV bundle scope (per run / per asset):
        - Any existing metadata schema/standard already used:
    validations:
      required: false

  - type: markdown
    attributes:
      value: |
        ---
        ## ğŸ§ª Processing Context (Reproducibility)

  - type: textarea
    id: processing_context
    attributes:
      label: "Processing context (if any)"
      description: "If this is already processed/derived, or you expect KFM to process it, describe the transformation needs."
      placeholder: |
        Include what you know:
        - Toolchain: GDAL/QGIS/Python/R/GEE/etc.
        - CRS/EPSG (if known):
        - Transforms: reproject, resample, mask, georef, simplify, tile, aggregate, classify
        - Expected outputs (raw vs processed vs derived):
        - Any known pitfalls (topology issues, missing fields, nodata, mixed CRS)
    validations:
      required: false

  - type: dropdown
    id: derived_layer
    attributes:
      label: "Is this a derived layer (model output / analysis product)?"
      description: "Derived layers are first-class datasets and require full provenance + parameters."
      options:
        - "No â€” this is a primary/source dataset"
        - "Yes â€” derived from other data (must include provenance plan)"
        - "Not sure"
      default: 0
    validations:
      required: true

  - type: textarea
    id: derivation_details
    attributes:
      label: "If derived: derivation details (required if 'Yes')"
      description: "Inputs â†’ method â†’ outputs. Include versioning + parameters (no secrets)."
      placeholder: |
        - Inputs (dataset IDs/URLs):
        - Method (algorithm/model/workflow):
        - Parameters (key settings):
        - Validation approach:
        - Intended interpretation limits (what it does NOT mean):
    validations:
      required: false

  - type: markdown
    attributes:
      value: |
        ---
        ## ğŸ”’ Sensitivity, Sovereignty & Redaction

  - type: dropdown
    id: classification
    attributes:
      label: "Classification (publicability)"
      description: "How should this data be treated by default?"
      options:
        - "ğŸŒ Public â€” OK to discuss + publish"
        - "ğŸ¢ Internal â€” limited details in public; publishing may be gated"
        - "ğŸ” Confidential â€” do not publish details here"
        - "ğŸ§¨ Restricted â€” do not publish details here (use security/governance path)"
        - "â“ Unknown"
      default: 0
    validations:
      required: true

  - type: checkboxes
    id: governance_flags
    attributes:
      label: "Governance flags (check any that apply)"
      description: "These route the issue to the right review path."
      options:
        - label: "May involve **Indigenous / CARE-governed** knowledge or culturally sensitive sites."
        - label: "May include **sensitive locations** (ecological, cultural, infrastructure, protected sites)."
        - label: "May include **PII** or person-level data."
        - label: "License/terms are **unclear** or may restrict redistribution."
        - label: "Requires **redaction/generalization** before publication."
        - label: "May require a **governance review gate** before ingestion."
    validations:
      required: false

  - type: textarea
    id: redaction_plan
    attributes:
      label: "Redaction / generalization plan (if needed)"
      description: "Explain how to safely handle sensitive content without revealing it here."
      placeholder: |
        Examples:
        - Use county-level aggregation instead of point coordinates
        - Geometry simplification / grid snapping
        - Attribute suppression or bucketing
        - Access-controlled storage (metadata only in public repo)
    validations:
      required: false

  - type: markdown
    attributes:
      value: |
        ---
        ## âœ… Definition of Done (What â€œcompleteâ€ looks like)

  - type: checkboxes
    id: dod
    attributes:
      label: "Proposed completion gates"
      description: "Select what you expect for this layer. Maintainers will confirm."
      options:
        - label: "STAC Collection/Items created (or updated) and validated"
        - label: "DCAT record created (or updated) and validated"
        - label: "PROV lineage bundle(s) created (per run/per asset as appropriate)"
        - label: "Checksums recorded (sha256 recommended)"
        - label: "ETL pipeline or import script added (if needed) with reproducible steps"
        - label: "UI layer style/config added (if needed) with screenshots"
        - label: "Graph entities/citations added (if needed) with evidence anchors"
        - label: "Docs updated (README/catalog index) with attribution + licensing"
    validations:
      required: false

  - type: textarea
    id: acceptance_criteria
    attributes:
      label: "Acceptance criteria / success checks"
      description: "Write the success checks in plain language."
      placeholder: |
        Example:
        - Layer renders in UI at zoom levels Xâ€“Y without errors
        - Metadata passes validators
        - Provenance bundle links inputs â†’ process â†’ outputs
        - License attribution is displayed in UI/downloads
    validations:
      required: false

  - type: markdown
    attributes:
      value: |
        ---
        ## ğŸ”— References / Related Work

  - type: textarea
    id: related_links
    attributes:
      label: "Related links / references / existing issues"
      description: "Anything that helps maintainers connect this to existing work."
      placeholder: |
        - Related issue IDs:
        - Papers/docs:
        - Existing KFM dataset IDs:
        - Example map screenshots (safe):
    validations:
      required: false

  - type: checkboxes
    id: submitter_checks
    attributes:
      label: "Pre-submission checklist"
      description: "These are governance safety rails ğŸ§·"
      options:
        - label: "I did **not** include secrets, credentials, private keys, or tokens."
          required: true
        - label: "I did **not** include PII or restricted/sensitive coordinates in this public issue."
          required: true
        - label: "I provided the best available license/terms info (or clearly stated unknowns)."
          required: true
        - label: "I understand KFM data additions are handled via **governed PRs** with validation gates."
          required: true

  - type: markdown
    attributes:
      value: |
        ---
        ## ğŸ™Œ Thank you

        Your request helps KFM stay **auditable**, **safe**, and **useful** ğŸŒ¾ğŸ§­  
        Maintainers may follow up with:
        - a proposed STAC/DCAT/PROV plan ğŸ—‚ï¸ğŸ§¾
        - a minimal fixture request (redacted) ğŸ§ª
        - governance review routing (if CARE/sensitivity applies) ğŸ”’

