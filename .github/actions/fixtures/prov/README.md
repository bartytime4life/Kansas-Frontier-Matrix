---
title: "KFM PROV Fixtures (CI) ‚Äî README"
path: ".github/actions/fixtures/prov/README.md"
version: "v1.0.0"
last_updated: "2025-12-22"
status: "draft"
doc_kind: "README"
license: "CC-BY-4.0"

markdown_protocol_version: "KFM-MDP v11.2.6"
mcp_version: "MCP-DL v6.3"
ontology_protocol_version: "KFM-ONTO v4.1.0"
pipeline_contract_version: "KFM-PPC v11.0.0"
stac_profile: "KFM-STAC v11.0.0"
dcat_profile: "KFM-DCAT v11.0.0"
prov_profile: "KFM-PROV v11.0.0"

governance_ref: "docs/governance/ROOT_GOVERNANCE.md"
ethics_ref: "docs/governance/ETHICS.md"
sovereignty_policy: "docs/governance/SOVEREIGNTY.md"
fair_category: "FAIR+CARE"
care_label: "TBD"
sensitivity: "public"
classification: "open"
jurisdiction: "US-KS"

doc_uuid: "urn:kfm:doc:github-actions:fixtures:prov-readme:v1.0.0"
semantic_document_id: "kfm-gh-actions-fixtures-prov-readme-v1.0.0"
event_source_id: "ledger:kfm:doc:github-actions:fixtures:prov-readme:v1.0.0"
commit_sha: "<latest-commit-hash>"

ai_transform_permissions:
  - "summarize"
  - "structure_extract"
  - "translate"
  - "keyword_index"
ai_transform_prohibited:
  - "generate_policy"
  - "infer_sensitive_locations"

doc_integrity_checksum: "sha256:<calculate-and-fill>"
---

# KFM PROV Fixtures (CI) ‚Äî README

## üìò Overview

### Purpose
- Provide deterministic **PROV-O fixture bundles** used by CI and local tests to validate the **KFM-PROV** provenance profile and KFM‚Äôs provenance expectations across the pipeline.
- Keep provenance contracts stable while ETL, catalog build, and graph ingestion evolve.

### Scope
| In Scope | Out of Scope |
|---|---|
| Sample PROV bundles (valid + intentionally invalid) used by schema/contract tests. | Production provenance outputs under `data/prov/` (those are generated by pipelines). |
| Naming conventions + review expectations for fixtures. | Defining or changing the KFM PROV profile itself (belongs in standards + schemas). |

### Audience
- Primary: contributors working on ETL, catalog generation, schema validation, and CI.
- Secondary: graph/API/UI contributors who need to understand provenance constraints.

### Definitions (link to glossary)
- Link: `docs/glossary.md`
- Terms used in this doc: PROV-O, Activity, Entity, Agent, JSON-LD, fixture.

### Key artifacts (what this doc points to)
| Artifact | Path / Identifier | Owner | Notes |
|---|---|---|---|
| PROV profile standard | `docs/standards/KFM_PROV_PROFILE.md` | Catalog maintainers | Canonical shape/rules for KFM-PROV. |
| PROV schema(s) | `schemas/` | Catalog maintainers | JSON Schema(s) used in CI validation. |
| Production PROV outputs | `data/prov/` | ETL / catalog pipelines | Bundles emitted per run and/or per dataset. |
| CI implementation | `.github/workflows/` + `.github/actions/` | CI maintainers | Runs schema tests using these fixtures. |

### Definition of done (for this document)
- [ ] Front-matter complete + valid
- [ ] Fixture intent + naming rules documented
- [ ] Validation steps listed and repeatable
- [ ] Governance + CARE/sovereignty considerations explicitly stated

## üóÇÔ∏è Directory Layout

### This document
- `path`: `.github/actions/fixtures/prov/README.md`

### Related repository paths
| Area | Path | What lives here |
|---|---|---|
| Actions | `.github/actions/` | Composite actions used by workflows |
| Workflows | `.github/workflows/` | CI pipelines running validators/tests |
| Production provenance | `data/prov/` | PROV bundles emitted by ETL/catalog runs |
| Schemas | `schemas/` | JSON Schemas for STAC/DCAT/PROV (+ telemetry) |
| Pipelines | `src/pipelines/` | ETL + catalog builders that emit provenance |
| Graph ingest | `src/graph/` | Ingestion that consumes STAC/DCAT/PROV |

### Expected file tree for this sub-area
~~~text
üìÅ .github/
‚îî‚îÄ‚îÄ üìÅ actions/
    ‚îî‚îÄ‚îÄ üìÅ fixtures/
        ‚îî‚îÄ‚îÄ üìÅ prov/
            ‚îú‚îÄ‚îÄ üìÑ README.md
            ‚îú‚îÄ‚îÄ üìÑ <name>.prov.jsonld                # valid fixture (JSON-LD)
            ‚îú‚îÄ‚îÄ üìÑ <name>.prov.ttl                   # optional fixture (Turtle)
            ‚îî‚îÄ‚îÄ üìÑ <name>.invalid.<reason>.jsonld    # negative fixture for CI tests
~~~

## üß≠ Context

### Background
- KFM treats provenance as a first-class contract: each ETL transformation/activity should be traceable to inputs and outputs through PROV records.
- CI uses fixtures to ensure schemas/validators enforce that contract before pipeline changes land.

### Assumptions
- CI validates PROV bundles against the KFM-PROV profile schema(s) under `schemas/`.
- Fixtures are synthetic: they must not contain real sensitive locations or personal data.

### Constraints / invariants
- The canonical pipeline ordering is preserved: **ETL ‚Üí STAC/DCAT/PROV ‚Üí Graph ‚Üí APIs ‚Üí UI ‚Üí Story Nodes ‚Üí Focus Mode**.
- Fixtures must remain deterministic and stable (changes require versioning + review) because they gate CI behavior.

### Open questions
| Question | Owner | Target date |
|---|---|---|
| Do we require both JSON-LD and Turtle fixtures, or is JSON-LD sufficient for CI? | TBD | TBD |
| Where should negative fixtures live vs. unit tests (fixtures vs. inline)? | TBD | TBD |

### Future extensions
- Add fixtures that mirror common ETL patterns (CSV‚Üínormalized JSON, raster‚Üítiles, PDF‚Üíextracted text) so provenance coverage grows with new domains.
- Add fixtures that test versioning lineage across updates (predecessor/successor runs and derived entities).

## üó∫Ô∏è Diagrams

### System / dataflow diagram
~~~mermaid
flowchart LR
  A[ETL] --> B[STAC/DCAT/PROV Catalogs]
  B --> C[Neo4j Graph]
  C --> D[APIs]
  D --> E[React/Map UI]
  E --> F[Story Nodes]
  F --> G[Focus Mode]
~~~

### Fixture validation flow
~~~mermaid
flowchart LR
  F1[PROV fixtures] --> V[Schema/validator]
  V -->|pass| CI[CI green]
  V -->|fail| PR[PR blocked]
~~~

## üì¶ Data & Metadata

### Inputs
| Input | Format | Where from | Validation |
|---|---|---|---|
| PROV fixtures | PROV-O JSON-LD (`*.jsonld`) and/or Turtle (`*.ttl`) | Hand-authored, synthetic examples | `schemas/` (KFM-PROV profile) |

### Outputs
| Output | Format | Path | Contract / Schema |
|---|---|---|---|
| Fixture validation report (CI logs) | CI log output | GitHub Actions run logs | Validators + schema tests |

### Sensitivity & redaction
- Fixtures must be **non-sensitive and synthetic**:
  - No personal names/emails/addresses.
  - No precise restricted cultural locations or ‚Äúdig-site‚Äù-like coordinates.
- Prefer generic or randomized coordinates (or omit geometry entirely) unless a geo-field is explicitly required by schema.

### Quality signals
- Fixtures are small but representative:
  - include at least 1 Activity, 1 Agent (where applicable), 1 input Entity, 1 output Entity
  - include `prov:wasDerivedFrom` and `prov:wasGeneratedBy` where the profile expects them
  - include controlled datetime formatting (UTC) where required
- Negative fixtures should fail for one clear reason (one error per file) to keep CI diagnostics readable.

## üåê STAC, DCAT & PROV Alignment

### STAC
- Fixtures may reference STAC Item/Collection IDs to simulate real runs (keep IDs stable + synthetic).
- Extension(s): N/A unless the PROV profile expects a STAC linkage extension.

### DCAT
- Fixtures may include stable, synthetic DCAT dataset identifiers when simulating dataset-level provenance.
- Keep license placeholders consistent with public/open fixtures.

### PROV-O
- `prov:wasDerivedFrom`: output Entity ‚Üí input Entity.
- `prov:wasGeneratedBy`: output Entity ‚Üí Activity.
- Activity / Agent identities:
  - Activity IDs should be stable and machine-friendly (prefer URNs).
  - Agent may be a `prov:SoftwareAgent` representing the pipeline/script.

#### Illustrative minimal JSON-LD pattern (example only)
~~~json
{
  "@context": {
    "prov": "http://www.w3.org/ns/prov#",
    "xsd": "http://www.w3.org/2001/XMLSchema#"
  },
  "@graph": [
    {
      "@id": "urn:kfm:activity:etl:run:example-001",
      "@type": "prov:Activity",
      "prov:startedAtTime": { "@value": "2025-12-22T00:00:00Z", "@type": "xsd:dateTime" },
      "prov:wasAssociatedWith": { "@id": "urn:kfm:agent:pipeline:example" }
    },
    { "@id": "urn:kfm:agent:pipeline:example", "@type": "prov:SoftwareAgent" },
    { "@id": "urn:kfm:entity:source:example.csv", "@type": "prov:Entity" },
    {
      "@id": "urn:kfm:entity:output:example.normalized.json",
      "@type": "prov:Entity",
      "prov:wasDerivedFrom": { "@id": "urn:kfm:entity:source:example.csv" },
      "prov:wasGeneratedBy": { "@id": "urn:kfm:activity:etl:run:example-001" }
    }
  ]
}
~~~

### Versioning
- If fixtures model multiple runs/outputs, include explicit lineage:
  - output Entity v2 `prov:wasDerivedFrom` output Entity v1 (plus any schema-required version fields)
  - keep IDs stable and avoid overwriting fixture meaning (add a new fixture file instead)

## üß± Architecture

### Components
| Component | Responsibility | Interface |
|---|---|---|
| ETL | Ingest + normalize | Config + run logs |
| Catalogs | STAC/DCAT/PROV | JSON + validator |
| Graph | Neo4j | Cypher + API layer |
| APIs | Serve contracts | REST/GraphQL |
| UI | Map + narrative | API calls |
| Story Nodes | Curated narrative | Graph + docs |
| Focus Mode | Contextual synthesis | Provenance-linked |

### Interfaces / contracts
| Contract | Location | Versioning rule |
|---|---|---|
| JSON schemas | `schemas/` | Semver + changelog |
| CI fixtures | `.github/actions/fixtures/` | Version by file add/replace w/ review |
| API schemas | `src/server/` + docs | Contract tests required |

### Extension points checklist (for future work)
- [ ] Add domain-specific fixture sets (per domain under `data/<domain>/...`).
- [ ] Add fixtures for STAC‚ÜîPROV linkage patterns.
- [ ] Add fixtures for graph ingestion of PROV Activity/Agent nodes.
- [ ] Add fixture-driven API contract tests for provenance endpoints (if/when exposed).
- [ ] Add sovereignty/redaction test fixtures (synthetic) if the profile includes redaction metadata.

## üß† Story Node & Focus Mode Integration

### How this work surfaces in Focus Mode
- Fixtures are not user-facing, but they gate the provenance structures that Focus Mode relies on for citations and ‚ÄúAbout this data‚Äù panels.

### Provenance-linked narrative rule
- Every claim must trace to a dataset / record / asset ID.

### Optional structured controls
~~~yaml
focus_layers:
  - "provenance"
focus_time: "TBD"
focus_center: [ -98.0000, 38.0000 ]
~~~

## üß™ Validation & CI/CD

### Validation steps
- [ ] Markdown protocol checks (for this README)
- [ ] Schema validation of **all** PROV fixtures (KFM-PROV)
- [ ] Negative fixtures fail for the intended reason(s)
- [ ] CI workflow/action references fixtures by path (no brittle globbing)

### Reproduction
~~~bash
# Example placeholders ‚Äî replace with repo-specific commands

# 1) validate PROV fixtures against schemas
#   (example) python tools/validate_schema.py schemas/kfm-prov.json .github/actions/fixtures/prov/*.jsonld

# 2) run unit/integration tests that consume fixtures
#   (example) pytest -k prov

# 3) run doc lint
#   (example) npm run lint:docs
~~~

### Telemetry signals (if applicable)
| Signal | Source | Where recorded |
|---|---|---|
| Fixture schema validation pass/fail | CI | GitHub Actions logs |

## ‚öñ FAIR+CARE & Governance

### Review gates
- Changes to **schemas** and **fixtures** should be reviewed by the catalog/schema maintainers because they can change what CI accepts.
- Any fixture that introduces new fields or patterns should include an explanation in PR description (what contract it‚Äôs asserting).

### CARE / sovereignty considerations
- Keep fixtures synthetic and avoid culturally sensitive locations, even if such data exists elsewhere in the project.
- If a fixture needs to model redaction/generalization behavior, do so with fake data and clear labels.

### AI usage constraints
- Ensure this doc‚Äôs AI permissions/prohibitions match intended use (see front-matter).

## üï∞Ô∏è Version History

| Version | Date | Summary | Author |
|---|---|---|---|
| v1.0.0 | 2025-12-22 | Initial PROV fixtures README | TBD |

---
Footer refs:
- Governance: `docs/governance/ROOT_GOVERNANCE.md`
- Ethics: `docs/governance/ETHICS.md`
- Sovereignty: `docs/governance/SOVEREIGNTY.md`
