<div align="center">

# 🧩 Kansas Frontier Matrix — AI Assistant Schemas  
`docs/design/mockups/ai-assistant/prompt-templates/schema/`

**Validation · Provenance · Standardization**

[![Docs · MCP](https://img.shields.io/badge/Docs-MCP-blue)](../../../../../../docs/)
[![AI Integration](https://img.shields.io/badge/API-/ask-orange)](../../../../../../src/api/)
[![JSON Schema](https://img.shields.io/badge/JSON-Schema%20Validated-yellow)](https://json-schema.org/)
[![License: CC-BY 4.0](https://img.shields.io/badge/License-CC--BY%204.0-lightgrey)](../../../../../../LICENSE)

</div>

---

## 🎯 Purpose

This directory defines **validation schemas** for AI Assistant prompt templates and model responses.  
Each schema enforces **structural integrity**, **data typing**, and **reproducibility requirements** for the Kansas Frontier Matrix AI system — ensuring all AI-generated data and configurations follow verifiable standards.

Schemas in this folder are used to validate:
- Prompt template configurations (`prompt_template.schema.json`)
- AI response objects returned by the `/ask` API (`ai_response.schema.json`)

This guarantees that every AI query, answer, and metadata record is consistent, machine-readable, and auditable under MCP guidelines.

---

## 📁 Directory Layout

```text
docs/design/mockups/ai-assistant/prompt-templates/schema/
├── README.md                    # This documentation
├── prompt_template.schema.json  # Defines the format for all prompt templates
└── ai_response.schema.json      # Defines expected AI model output format


⸻

🧩 prompt_template.schema.json

This schema validates prompt definition files (like historical_query.json or document_summary.json).

✅ Required Fields

Field	Type	Description
$schema	string	Reference to this schema (prompt_template.schema.json)
template_id	string	Unique identifier for the template
description	string	Short explanation of purpose
prompt	string	The text with placeholder variables (e.g. {{user_input}})
expected_output	object	Defines the structure of valid AI model output
model	object	Specifies model engine, temperature, and token limits
version	string	Semantic version (e.g. "0.1.0")
license	string	License declaration (MIT, CC-BY 4.0, etc.)

🧱 Example Snippet

{
  "$schema": "./prompt_template.schema.json",
  "template_id": "historical_query",
  "description": "Answers questions about Kansas history.",
  "prompt": "Answer based on historical records.\nQuestion: {{user_input}}\nContext: {{entity_context}}",
  "expected_output": {
    "type": "object",
    "properties": {
      "answer": { "type": "string" },
      "citations": { "type": "array", "items": { "type": "string" } }
    }
  },
  "model": {
    "engine": "huggingface/bart-large-cnn",
    "temperature": 0.25,
    "max_tokens": 512
  },
  "version": "0.1.0",
  "license": "CC-BY 4.0"
}


⸻

🧩 ai_response.schema.json

This schema defines the structure for AI Assistant responses.
All responses from the /ask endpoint are validated against this before being logged or returned to the frontend.

✅ Required Fields

Field	Type	Description
answer	string	Natural-language response generated by the model
citations	array	List of source links or STAC IDs used in reasoning
highlights	array	List of entity names or graph IDs to highlight in UI
confidence	number	Confidence score (0–1) for the generated answer
model_id	string	Identifier of the model used
timestamp	string	ISO8601 timestamp of generation
hash	string	SHA256 checksum of the full response payload

🧱 Example Snippet

{
  "$schema": "./ai_response.schema.json",
  "answer": "The Medicine Lodge Treaty was signed in 1867 in Kansas by U.S. commissioners and tribal leaders.",
  "citations": ["stac:item:treaty_medicine_lodge_1867"],
  "highlights": ["Medicine Lodge", "1867", "Kiowa", "Comanche"],
  "confidence": 0.94,
  "model_id": "huggingface/bart-large-cnn",
  "timestamp": "2025-10-06T17:42:31Z",
  "hash": "sha256-0b27fcd2c61d6f17e623ad91f2dd4b0d..."
}


⸻

🧠 Validation Workflow

flowchart TD
  A["Prompt Template (.json)"] --> B["Validate\n(prompt_template.schema.json)"]
  B --> C["Run AI Model"]
  C --> D["AI Response (.json)"]
  D --> E["Validate\n(ai_response.schema.json)"]
  E --> F["Log + Store\nProvenance Metadata"]

<!-- END OF MERMAID -->


This process ensures end-to-end integrity:
	1.	Prompts are structurally sound before inference.
	2.	Model outputs meet required data structure.
	3.	All transactions are recorded with timestamps, hashes, and model IDs for MCP compliance.

⸻

🧾 Provenance & Integrity

Schema	Purpose	Version	SHA256
prompt_template.schema.json	Template format validation	0.1.0	sha256-84c9…
ai_response.schema.json	Response format validation	0.1.0	sha256-9e1a…

Both schemas are validated automatically in CI via .github/workflows/schema-validate.yml.

⸻

📚 Related Documents
	•	AI Assistant Prompt Templates
	•	AI Assistant Design
	•	AI System Developer Documentation
	•	System Architecture
	•	Markdown “Standard Kit”

⸻

📜 License & Credits

Schema definitions © 2025 Kansas Frontier Matrix Project.
Licensed under Creative Commons Attribution 4.0 International (CC BY 4.0).
Developed by the KFM AI Integration Team, adhering to Master Coder Protocol reproducibility and open-standards documentation for trustworthy AI interactions.

