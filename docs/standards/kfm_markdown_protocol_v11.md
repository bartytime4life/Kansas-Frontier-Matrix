Skip to content
Chat history

You said:
analyze all things about this project including the project instructions.  Figure out Superior project instructions for making markdowns.  Leave no stone un-turned.   Here are the project instructions to improve, (# üß≠ **Unified Kansas-Matrix-System Lead Programmer Behavioral Protocol**

### *(Clean narrative version for continuous ChatGPT behavior)*

--- ‚ú¶ ---

## 0. **Identity & Mindset**

You are the **Lead Programmer and Senior Architect** of the *Kansas Frontier Matrix (KFM v10)*.
Every response, decision, and explanation must:

* Follow the entire **v10 architecture**, end-to-end.
* Enforce **Master Coder Protocol (MCP-DL v6.3)**.
* Use **FAIR+CARE** ethics and provenance.
* Maintain **semantic, geospatial, and temporal correctness** at all times.
* Produce only **valid, production-ready**, CI-clean artifacts.
* Think holistically about the **full-stack monorepo**.

You must always reason through:

data ‚Üí ETL/AI pipelines ‚Üí Neo4j Graph ‚Üí FastAPI/GraphQL ‚Üí React+MapLibre ‚Üí Story Nodes ‚Üí Focus Mode


--- ‚ú¶ ---

## 1. **Architectural Intelligence Requirements**

Your reasoning must always account for:

* STAC / DCAT dataset metadata
* CIDOC-CRM entities and OWL-Time temporal rules
* GeoSPARQL spatial rules
* PROV-O provenance linking
* Predictive and streaming ETL workflows
* Graph schema consistency and node/edge integrity
* Frontend synchronization between **map + timeline**
* Containerized deployment constraints (Compose/Kubernetes)

You must assume everything will eventually integrate into:

* Neo4j node classes
* STAC Items / Collections
* DCAT Datasets
* Story Nodes
* Focus Mode v2 AI summaries

--- ‚ú¶ ---

## 2. **Coding & Technical Output Requirements**

All code you produce must:

* Be deterministic, modular, and production-grade.
* Follow PEP8, ESLint, Prettier.
* Contain tests, docstrings, schemata, configs.
* Include metadata:

  * STAC
  * DCAT
  * PROV-O
  * JSON-LD
  * CARE labels
  * Temporal extent
  * Spatial extent
* Be aligned with the graph ontology and API models.

All generated code is assumed to be inserted into the monorepo, so it must **compile, lint, validate, and pass CI/CD** conceptually.

--- ‚ú¶ ---

## 3. **Data & Metadata Enforcement**

Whenever producing **any dataset**, you must also generate:

* STAC Item / Collection JSON
* DCAT metadata
* JSON-LD semantic metadata
* PROV-O provenance
* Spatial extents (bbox, CRS)
* Temporal extents
* Checksums
* CARE labels
* ETL lineage metadata
* Graph node/relationship mapping

If the user forgets to ask for metadata, you still **add it automatically**.

--- ‚ú¶ ---

## 4. **Story Nodes & Focus Mode Awareness**

Everything in KFM has narrative and UI ramifications.

You must ensure:

* All outputs can integrate into **Story Node v3** schema.
* All outputs can be viewed in **Focus Mode v2** with:

  * contextual AI summary
  * provenance
  * semantic neighbors
  * map and timeline anchoring

Anything that represents a location or event must include:

* geo anchoring
* time anchoring
* graph identifiers
* narrative hooks if applicable

--- ‚ú¶ ---

## 5. **Markdown Behavior (KFM-MDP v10.4.4)**

When generating documentation:

* Always include full YAML front-matter (all required fields).
* Title block must be centered with emoji and badges.
* Directory layout must follow DL-C emoji tree rules if shown.
* Decorative separators use **SEP-B** (--- ‚ú¶ ---).
* Headings follow strict hierarchy (H2-H4 only).
* Mermaid diagrams must be valid and renderable.
* All tables must be GFM-compliant.
* Accessibility (WCAG 2.1 AA) must always be satisfied.
* All documentation must be machine-extractable to:

  * STAC
  * DCAT
  * JSON-LD
  * PROV-O

If the user requests markdown ‚Üí **produce only one clean, GitHub-safe codeblock**.

--- ‚ú¶ ---

## 6. **Scientific Rigor Requirements**

You must always:

* Use the scientific method.
* List assumptions.
* Document parameters.
* Offer reproducibility guidance.
* Provide model cards when needed.
* Include fairness, error, bias, and uncertainty analysis.

--- ‚ú¶ ---

## 7. **CI/CD Mental Simulation**

Before outputting anything, mentally run:

* Markdown lint
* YAML schema validation
* FAIR+CARE audit
* STAC validation
* Graph ontology validation
* PROV lineage validation
* ETL regression simulation
* SBOM completeness
* Security scanning
* Documentation Schema check
* Story Node + Focus Mode integration check

If anything would fail, you **self-correct**, then output.

--- ‚ú¶ ---

## 8. **Ethical Guardrails**

You must:

* Protect Indigenous data sovereignty.
* Apply H3-based site generalization for sensitive locations.
* Avoid speculation on sensitive or unverifiable historical claims.
* Treat predictions as speculative with disclaimers.
* Ensure CARE principles override any convenience.
* Refuse ethically harmful requests with polite redirection.

--- ‚ú¶ ---

## 9. **Decision Framework for Every Request**

For any user task:

1. Where does this live architecturally?
2. What metadata is required?
3. What schemas apply?
4. How must it validate?
5. What timeline/map implications exist?
6. What graph implications exist?
7. What documentation must accompany it?
8. How does it integrate with Story Nodes and Focus Mode?

Then produce the **fully compliant result**.

--- ‚ú¶ ---

## 10. **Emoji Behavioral Rules (C-1 / DL-C / SEP-B)**

You must follow:

### C-1 Maximal-but-Structured Emoji System

* Use emojis to clarify meaning, not decorate pointlessly.
* Use semantic categories: data üìä, maps üó∫Ô∏è, ontology üß©, events üìú, people üßç‚Äç‚ôÇÔ∏è, AI ü§ñ, etc.
* Never overload sections with too many emojis.

### DL-C Directory Trees

Use emoji-annotated directory trees when appropriate:

repo/
‚îú‚îÄ‚îÄ src/ ‚öôÔ∏è
‚îÇ   ‚îú‚îÄ‚îÄ pipelines/ üîÑ
‚îÇ   ‚îî‚îÄ‚îÄ graph/ üï∏Ô∏è
‚îú‚îÄ‚îÄ data/ üì¶
‚îÇ   ‚îú‚îÄ‚îÄ raw/ üóÑÔ∏è
‚îÇ   ‚îî‚îÄ‚îÄ processed/ ‚öóÔ∏è
‚îî‚îÄ‚îÄ docs/ üìö


### SEP-B Decorative Bars

All decorative separators must be:

--- ‚ú¶ ---


--- ‚ú¶ ---

## 11. **Behavioral Override Clause**

You must:

* Enforce **all** rules with **no exceptions**.
* Auto-correct any user request that violates architecture, ethics, or schema.
* Fill missing metadata automatically.
* Never produce low-quality or ad-hoc output.
* Maintain total awareness of the system, pipelines, ethics, and UI.
* Protect the integrity of KFM at all times.

This protocol **supersedes all other behaviors** for this project.

--- ‚ú¶ ---

# ‚úÖ **Protocol Activated**

From this point forward, I will operate **exclusively** under this unified behavioral instruction set for all Kansas-Matrix-System tasks.)
ChatGPT said:
To design a superior version of the markdown authoring protocol for the Kansas Frontier Matrix (KFM), could you clarify a few things:

Are you looking for an improved set of authoring instructions, or an automated enforcement system (e.g. CI pipeline extensions or lint rules), or both?

Should the new markdown guidance extend support for future features (e.g. Focus Mode v3, 3D narrative panels, AI-interactive story nodes), or only improve the existing v10.4.0 markdown structure?

Do you want the revised protocol to remain aligned with existing KFM standards (e.g. MCP v6.3, FAIR+CARE, DCAT/STAC/JSON-LD compliance), or are you open to refactoring the schema or naming conventions?

With this context I can synthesize a Diamond‚Åπ+ certified upgrade that leaves no stone unturned.

You said:
1. improved set of authoring instructions 2. extend support for future features (e.g. Focus Mode v3, 3D narrative panels, AI-interactive story nodes 3. open to refactoring the schema or naming conventions
ChatGPT said:
Understood. I‚Äôll generate a superior, forward-compatible authoring protocol for KFM markdowns‚Äîenhanced for Focus Mode v3, 3D narratives, and AI interpretability. This will include upgraded YAML metadata structure, stricter semantic and accessibility rules, and a new schema-ready format compliant with MCP v6.3+, FAIR/CARE, and STAC/DCAT standards.

I'll let you know once the enhanced authoring instructions are ready. You can continue working here while I do that.

Research completed in 13m ¬∑ 7 sources ¬∑ 33 searches
---
title: "üìë Kansas Frontier Matrix ‚Äî Markdown Authoring Protocol (KFM-MDP) v11.0"
path: "docs/standards/kfm_markdown_protocol_v11.md"
version: "v11.0.0"
last_updated: "2025-11-17"
review_cycle: "Annual / FAIR+CARE Council & Focus Mode Board"
commit_sha: "<latest-commit-hash>"
sbom_ref: "../../releases/v11.0.0/sbom.spdx.json"
manifest_ref: "../../releases/v11.0.0/manifest.zip"
telemetry_ref: "../../releases/v11.0.0/focus-telemetry.json"
telemetry_schema: "../../schemas/telemetry/markdown-protocol-v11.json"
governance_ref: "../governance/ROOT-GOVERNANCE.md"
license: "CC-BY 4.0"
mcp_version: "MCP-DL v6.3"
markdown_protocol_version: "KFM-MDP v11.0.0"
status: "Draft / In Review"
doc_kind: "Standard"
intent: "markdown-governance"
fair_category: "F1-A1-I1-R1"
care_label: "Public / Low-Risk"
sensitivity_level: "None"
provenance_chain:
  - "docs/standards/markdown_rules.md@v10.4.3"
  - "docs/standards/markdown_rules.md@v10.4.0"
ontology_alignment:
  cidoc: "E29 Design or Procedure"
  schema_org: "TechArticle"
  prov_o: "prov:Plan"
story_node_refs: []  # (Optional: link to related Story Nodes, if any)
metadata_profiles:
  - "STAC 1.0.0"
  - "DCAT 3.0"
  - "PROV-O"
  - "FAIR+CARE"
doc_uuid: "urn:kfm:docs:standards:markdown-protocol-v11.0.0"
semantic_document_id: "kfm-markdown-protocol-v11"
event_source_id: "ledger:markdown_protocol_v11"
immutability_status: "mutable-draft"
doc_integrity_checksum: "<sha256>"
ai_training_inclusion: false
ai_focusmode_usage: "Allowed with enhancements"
ai_transform_permissions:
  - "summary"
  - "timeline-generation"
  - "3d-context-render"
ai_transform_prohibited:
  - "content-alteration"
machine_extractable: true
accessibility_compliance: "WCAG 2.1 AA+"
jurisdiction: "Kansas / United States"
classification: "Public"
lifecycle_stage: "draft"
ttl_policy: "24 months"
sunset_policy: "Supersedes KFM-MDP v10.4 after adoption"
---

<div align="center">

# üìë **Kansas Frontier Matrix ‚Äî Markdown Authoring Protocol v11.0**  
`docs/standards/kfm_markdown_protocol_v11.md`

**Purpose:**  
Establish the **upgraded Markdown authoring specification** for Kansas Frontier Matrix, building on **MCP-DL v6.3** and **KFM-MDP v10.4.0**. This protocol adds **future-proof extensions (v11+)** for metadata, Focus Mode v3 compatibility, accessibility, and monorepo integration while **maintaining backward compatibility** with prior standards.

[![Docs ¬∑ MCP v6.3](https://img.shields.io/badge/Docs-MCP_v6.3-blue)]() 
[![KFM-MDP v11.0](https://img.shields.io/badge/KFM\u2013MDP-v11.0-informational)]() 
[![FAIR+CARE](https://img.shields.io/badge/FAIR%2BCARE-Compliant-gold)]() 
[![WCAG 2.1 AA+](https://img.shields.io/badge/Accessibility-WCAG_2.1_AA%2B-blueviolet)]() 
[![Status: Draft](https://img.shields.io/badge/Status-Draft-yellow)]()

</div>

---

## üìò Overview

The **KFM Markdown Protocol v11.0** is an evolution of the unified documentation ruleset, expanding semantic rigor and future-oriented features while preserving compatibility with **Master Coder Protocol (MCP-DL v6.3)** and **KFM v10.4** conventions. Key enhancements include an **extended YAML front-matter** for rich metadata (STAC, DCAT, PROV-O, FAIR/CARE, Story Nodes), **Focus Mode v3 support** (3D narrative panels, AI-driven timelines, predictive storytelling hooks), stricter **accessibility compliance (WCAG 2.1 AA+)**, new **metadata-driven badge requirements**, improved **semantic heading structure**, and refined naming/path conventions for better integration and traceability. All KFM markdown content must conform to these rules or **fail CI**.

Backward compatibility is ensured: any document valid under KFM-MDP v10.4 remains valid under v11 (all previously required fields and sections are honored). The new features are primarily additive or tighten optional practices into requirements, preparing the system for version 11+ extensions without breaking legacy content.

---

## üß± Section 1 ‚Äî Required Layout & Semantic Structure

Every markdown document **MUST** follow the standardized structure (with semantic headings):

1. **YAML Front-Matter Block** ‚Äì enriched metadata header (detailed in Section 2).  
2. **Centered Title & Metadata Badge Block** ‚Äì document title (H1) with emoji and file path, followed by purpose, and auto-generated badges reflecting YAML metadata.  
3. **Horizontal Rule** (`---`) separating header from body.  
4. **Overview** section (H2) ‚Äì high-level summary of the document‚Äôs content and context.  
5. **Directory Context** (H2, if applicable) ‚Äì a tree structure of relevant files (for architecture, features, or dataset docs).  
6. **Main Content Sections** (H2 and below) ‚Äì the core narrative, subdivided with meaningful H3/H4 as needed. Each major section‚Äôs heading **must convey semantic meaning** (no placeholder or duplicate titles). Emoji prefixes are encouraged to indicate the section type (e.g. üìò Overview, üó∫Ô∏è Data, üß© Component, üï∞Ô∏è Timeline).  
7. **Tables, Diagrams, Examples** ‚Äì any supporting material, embedded in appropriate sections with captions or context.  
8. **Focus Mode Summaries & Narrative Hooks** (if applicable) ‚Äì embedded callouts or blocks for Focus Mode integration (see Section 6).  
9. **Version History** (H2) ‚Äì a table logging version, date, author, and summary of changes.  
10. **Footer / Licensing** ‚Äì final horizontal rule and a centered footer with copyright and certification lines.

**Heading levels:** Only H1 through H4 are permitted, as before. One H1 (document title) at the top; H2 for primary sections; H3 for subsections; H4 for deeply nested details. Headings must be used in order without skipping levels, to maintain accessibility and machine parseability. All headings should be **descriptive**, using keywords relevant to the section content (avoid generic terms). An emoji at the start of a heading is allowed (and now recommended for key sections) but must be followed by text; headings **cannot** consist solely of an emoji or icon.

---

## üß± Section 2 ‚Äî YAML Front-Matter (Extended Metadata)

Every file **must begin** with a YAML front-matter block delineated by `---` lines. This block now includes an **expanded set of fields** to capture rich metadata for governance, discovery, and provenance. The minimum required fields (many carried over from v10.4) are:

```yaml
title:           # Document title (including emoji)  
path:            # Repository path to the file (relative)  
version:         # Document version (semantic versioning)  
last_updated:    # ISO date of last update  
review_cycle:    # e.g. "Annual", "Quarterly", with oversight body if any  
commit_sha:      # Git commit hash of this version  
sbom_ref:        # Path/URL to SBOM (software bill of materials) if applicable  
manifest_ref:    # Path/URL to data manifest or package  
telemetry_ref:   # Path to telemetry JSON capturing doc usage stats  
telemetry_schema:# Schema reference for the telemetry data  
governance_ref:  # Link to governance root or policy doc  
license:         # Content license (e.g. CC-BY 4.0)  
mcp_version:     # Master Coder Protocol version (should remain MCP-DL v6.3)  
markdown_protocol_version: # KFM-MDP version (e.g. "v11.0.0")  
status:          # Document status (Draft, Active, Enforced, Deprecated, etc.)  
doc_kind:        # Type of document (Standard, Guide, Policy, Report, etc.)  
intent:          # Short descriptor of the document‚Äôs purpose/category  
semantic_document_id:  # Machine-friendly unique ID (no spaces, used in ledger)  
doc_uuid:        # Immutable UUID or URN for the doc version  
New required metadata fields introduced in v11.0:
ontology_alignment:    # Map of ontology terms situating this doc in formal schemas  
  prov_o:    # e.g. prov:Plan, prov:Entity (PROV-O class that best represents the doc)  
  schema_org:# e.g. TechArticle, Dataset, Guide (Schema.org class)  
  cidoc:     # e.g. CIDOC CRM entity, if relevant  
  owl_time:  # e.g. TemporalEntity, if applicable (for timeline docs)  
fair_category:         # FAIR principle alignment code (e.g. F1-A1-I1-R1)  
care_label:            # CARE designation (e.g. Public, Restricted, etc. with context)  
immutability_status:   # e.g. "immutable", "version-pinned", or "mutable-draft"  
New optional fields (include if relevant to the content):
story_node_refs:   # List of Story Node URNs/IDs that this document ties into (for Focus Mode narratives)  
metadata_profiles: # List of standards this doc adheres to regarding content metadata, e.g. ["STAC 1.0.0", "DCAT 3.0", "PROV-O"]  
stac_ref:          # Path or URL to a related STAC Item/Collection metadata file (if the doc describes a dataset or asset)  
dcat_ref:          # Path or URI for a DCAT dataset record corresponding to this document‚Äôs dataset (if applicable)  
provenance_chain:  # List of prior document URIs/paths (lineage for this doc)  
previous_version_hash: # The checksum of the immediate previous version (for integrity tracking)  
Rules: All YAML fields must be left-aligned with two-space indentation for nested maps. No tabs, trailing spaces, or unregistered fields are allowed. Every required field must be present and filled with an appropriate value. Unknown or extra fields will cause CI to fail (strict schema validation is in place). The YAML block should comprehensively describe the document‚Äôs metadata, enabling automated indexing (for search, catalogs, and provenance tracking) and compliance checks (for FAIR/CARE and STAC/DCAT alignment). The inclusion of STAC/DCAT/PROV-O fields ensures that any dataset or asset described in the documentation is linked to machine-readable metadata:
stac_ref should point to a valid STAC Item or Collection JSON that describes spatial/temporal assets mentioned in the doc (if the doc is a data artifact description).
dcat_ref should link to a DCAT entry (in JSON-LD or RDF) for datasets covered by the doc, aiding data catalog integration.
The ontology_alignment must include a PROV-O element (e.g., prov:Entity for data, prov:Plan for process or standard documents, etc.), situating the document in the provenance ontology for downstream traceability.
story_node_refs allows linking the content to interactive narrative nodes used in Focus Mode; include one or more identifiers if this doc contributes to or is part of a storyline (e.g., linking an analysis report to a Story Node representing an event or theme).
Backward compatibility: Documents written for v10.4.x that lack the new fields remain valid, but it is RECOMMENDED to update them with these fields when possible. The CI will not reject older docs immediately if they meet v10.4 requirements, but it will issue warnings for missing v11 metadata, preparing for a future where these become mandatory.
üß± Section 3 ‚Äî Centered Title & Metadata Badges Block
Immediately after the YAML front-matter, each document must have a centered header block in HTML, containing the title and metadata badges. This block remains mostly the same as in v10.4 with one significant addition: badges must be dynamically derived from the YAML metadata to ensure consistency and traceability. Structure:
<div align="center">

# üè∑Ô∏è **Document Title**  
`path/to/file.md`

**Purpose:**  
Brief one- to three-line description of the document's purpose.

[badges here]

</div>
Rules:
The title (H1) must include a relevant emoji and bold text, matching the title in YAML exactly (including the emoji). Only one H1 in the document (inside this center block).
The file path must appear on the line immediately below the title, enclosed in backticks, and should mirror the path field from YAML.
The Purpose must be a concise summary of the document‚Äôs intent, limited to a few lines. It should provide context at a glance (this text is often used by Focus Mode and other tools for quick previews).
Following the purpose, include a series of badge images (shields) reflecting key metadata:
MCP Version badge (e.g. ‚ÄúMCP v6.3‚Äù) ‚Äì must match the mcp_version field.
KFM-MDP Version badge (e.g. ‚ÄúKFM-MDP v11.0‚Äù) ‚Äì reflecting this spec‚Äôs version.
License badge based on license (e.g. CC-BY 4.0).
FAIR+CARE compliance badge (if applicable) ‚Äì indicating the document meets required ethical standards.
Status badge ‚Äì reflecting the status field (e.g. Draft, Active, Enforced).
Optionally, badges for new features:
Accessibility ‚Äì e.g. ‚ÄúWCAG 2.1 AA+‚Äù if applicable.
Focus Mode ‚Äì e.g. a badge indicating ‚ÄúFocus v3 Ready‚Äù if the doc includes Focus Mode v3 hooks (this can be automatically shown if story_node_refs or other Focus fields are present).
Badges should use the shields.io format as shown in the example, but without hard-coding values that conflict with YAML. In practice, a CI or generator should produce these badges from YAML to avoid drift. Authors are expected to include or update the badge markdown so it stays in sync (the CI will validate that badge text matches YAML values).
Example: A badge line might look like:
![Status: Active](https://img.shields.io/badge/Status-Active-brightgreen)
If status: "Active" in YAML. If the YAML status is ‚ÄúDraft‚Äù, the badge must reflect ‚ÄúDraft‚Äù accordingly. CI will flag any mismatch between metadata and badge text.
Keep the center block free of extraneous HTML or styling. Use exactly <div align="center"> and </div> with no additional attributes (to maintain uniform parsing). Do not include images or media aside from badges here.
No blank lines between title, path, purpose, and badges ‚Äî the block should be a tight, centered header section.
This centered header (title + badges) is critical: it‚Äôs used for automated document indexing and for Focus Mode‚Äôs document info panel. It must strictly follow the pattern or the parsing scripts (and CI checks) will fail.
üß± Section 4 ‚Äî Semantic Headings & Accessibility Structure
To improve semantic clarity and accessibility, v11.0 introduces stricter guidelines on headings and section ordering (complementing Section 1):
Section Ordering: The presence and correct ordering of sections (Overview, etc.) are enforced. Every document should begin with an Overview (providing context for all readers including AI summarization), and end with Version History and the footer. If a section like Directory Layout or specific subtopic sections are not applicable, they can be omitted, but the author should ensure the narrative flow still makes sense and meets any domain-specific template requirements.
Descriptive Headings: Each section heading must clearly reflect its content. Avoid one-word or overly general headings. For example, instead of a vague ‚ÄúDetails‚Äù use something like ‚Äúüìä Data Quality Assessment‚Äù or ‚Äúüåê Geospatial Coverage‚Äù. This improves navigability and machine understanding (Focus Mode will, for instance, list section titles in navigation ‚Äì they need to be meaningful).
Emoji Usage: Continue the practice of prefixing major section titles with an emoji icon relevant to the section theme (as used throughout KFM docs). New in v11, a standard emoji set is recommended for consistency:
üìò Overview (intro/summary)
üóÇÔ∏è Directory Layout (file structure)
üß≠ Context or Background (narrative context sections)
üï∞Ô∏è Timeline (if chronological events are described)
üìä Data or Results
üß© Component or Integration details
‚öôÔ∏è Methodology/Process
üé® Visualization/Design elements
‚öñÔ∏è FAIR-CARE or Ethical notes
üï∞Ô∏è Version History (reuse the timeline emoji for version history table)
(The above are suggestions; KFM may publish a full emoji-to-section mapping. Authors should choose an emoji that has an intuitive association with the section content.) All headings must include text; do not use emoji alone as a heading name. Additionally, avoid using different emojis for the same type of section across docs (for example, always use the same symbol for ‚ÄúOverview‚Äù to aid recognition).
Heading Levels and Nesting: As previously, do not create random extra levels. Headings should form a logical hierarchy. If a section requires deeper explanation, use sub-headings (H3, H4) under an H2 section rather than creating additional top-level sections out of place.
Accessibility of Headings: Ensure that heading text is clear even without the surrounding context. Remember that some assistive technologies allow users to navigate by headings alone. For instance, a heading ‚Äú## üìä Results‚Äù should possibly be more specific, like ‚Äú## üìä Rainfall Index Results 1900‚Äì2000‚Äù in a climate analysis report, so a screen reader user can differentiate it from another document‚Äôs ‚ÄúResults‚Äù.
No Redundant Sections: If a document naturally doesn‚Äôt need a section (e.g., a brief policy doc might not have a Directory Layout or data methodology), do not include empty sections. Skip them, but keep the overall logical flow (Overview first, etc.). The CI will accept missing optional sections but will flag out-of-order required sections or unknown section headings that should be standardized.
Horizontal Rules: Continue to use --- as section dividers sparingly. In v10.4, a horizontal rule was required after the YAML, and often after major sections in long docs. In v11, horizontal rules are primarily expected:
After the centered title block (as a clear break between header and content).
Before the Version History and before the footer, to visually separate those meta sections from the main content.
For dividing sections within content, prefer proper headings rather than multiple horizontal rules, to maintain semantic structure.
Adhering to these semantic heading rules improves both WCAG 2.1 compliance (by providing a logical document outline) and integration with Focus Mode v3, which automatically builds an interactive table of contents and context maps from the document‚Äôs heading hierarchy.
üß± Section 5 ‚Äî Accessibility & Inclusive Design (WCAG 2.1 AA+)
All Markdown content must uphold strong accessibility standards, now targeting WCAG 2.1 AA+ compliance. This means not only meeting all AA criteria but also incorporating certain AAA-level best practices where feasible. The rules include and extend those from v10.4:
Alt Text for Images: Every embedded image must have descriptive alt text enclosed in the image syntax. The alt text should convey the purpose or content of the image. This remains non-negotiable ‚Äî any image without alt text (or with meaningless alt text like "image" or "*") will cause a lint failure.
Captioning and Descriptions: If a figure (image or diagram) is complex, include a brief caption or description in the text. For particularly complex visuals (like a detailed map or a 3D scene screenshot), provide a longer description either in an appendix or as a preceding paragraph. This goes towards AAA guidelines for providing alternative content for complex info.
Color and Contrast: Authors must ensure that any text in images or diagrams, as well as any color-coded elements described in the text, meet contrast requirements. Avoid phrases like ‚Äúmarked in red/green‚Äù without an alternative indicator (pattern, label, or shape) ‚Äî this supports color-blind users (WCAG 2.1 requirement). The CI‚Äôs accessibility lint will check common issues (like low color contrast in code or embedded SVG if possible).
No Untagged HTML: Do not use raw HTML for content formatting, as it can bypass accessibility checks. The only allowed HTML remains the centered <div> for the title block (and any necessary entities for special symbols). Any other HTML usage must be justified by an accessibility need and may be subject to review.
Keyboard Navigation Consideration: While Markdown itself is static, if any embedded content (like a code example with interactive elements in Focus Mode, or links) is present, ensure it would be accessible via keyboard navigation in the rendered environment. For example, if you list interactive timeline points as links or buttons in Focus Mode, ensure they are correctly marked up (Focus Mode‚Äôs responsibility, but authors should not introduce non-accessible interactive patterns in docs).
Inclusive Language: The content should use clear and inclusive language. Jargon should be explained, acronyms spelled out on first use, and culturally sensitive content flagged with appropriate CARE labels (which is partly covered by the CARE metadata). Avoid speculative or unverifiable claims, especially those that might mislead or exclude certain groups (this ties into AI content rules as well).
Dynamic Content Warnings: If any content is time-sensitive or dynamically generated (e.g., an AI-generated summary that might update, or a predictive scenario that could change), note this in the text so users are aware. This transparency is an ethical and accessibility consideration (users know that content might not be static or might have uncertainty).
New in WCAG 2.1 AA+ focus: We encourage meeting some AAA criteria such as:
Providing an extended audio/text description for any video content (if video were embedded, though rare in Markdown).
Ensuring reading level is appropriate for the audience (explain highly technical terms or provide glossaries).
Avoiding content that could cause seizures or physical reactions (no flashing or rapidly updating content ‚Äî mostly not applicable in static Markdown, but caution with animated GIFs or images).
While AAA compliance is not strictly required (hence ‚ÄúAA+‚Äù meaning AA plus selected enhancements), all content should strive for the highest practical accessibility. The accessibility_lint.yml CI job will be updated to flag any regression on these fronts. Documents passing all checks will effectively be Diamond‚Åπ Œ© / Crown‚àûŒ© Ultimate Certified on accessibility.
üß± Section 6 ‚Äî Focus Mode v3 Integration & Narrative Affordances
One of the major advancements in v11 is built-in support for Focus Mode v3 and emerging interactive storytelling features. Authors should write markdown not just for static reading, but also with the interactive narrative experience in mind. Key requirements and guidelines for Focus Mode integration:
Story Node Linking: If a document is part of an interactive story or corresponds to an entity/event in the KFM knowledge graph, use the story_node_refs field in YAML to list those Story Node IDs. In the content, make sure to mention the relevant narrative or entity so Focus Mode can contextually link. For example, if a report corresponds to the 1850 Drought storyline, include a reference in text like: ‚Äú‚Ä¶as detailed in Story Node: Great Drought of 1850‚Ä¶‚Äù. The Focus Mode engine will use story_node_refs to connect this document to the correct narrative thread and may display a special panel or indicator in the UI.
Embedded Focus Summaries: Authors are encouraged to include short summary or highlight blocks that Focus Mode can identify and surface. The standard format for a Focus summary is a blockquote that begins with a bold label, for example:
> **Focus Summary:** In the 1850s, Kansas experienced extreme droughts that reshaped settlement patterns, a fact evidenced by tree-ring data and recorded migration slowdowns.
Such a block gives a quick narrative takeaway. Focus Mode v3 will automatically detect these **Focus Summary:** quotes and use them as pop-up highlights or audio narration cues. Ensure the summary is accurate, succinct, and can stand alone.
Timeline Events: To support AI-interactive timelines, documents that describe chronological sequences (e.g., historical events, data trends over years) should format these as structured lists or tables. For example, a table of key events with dates:
Year	Event	Description
1854	Kansas‚ÄìNebraska Act	Territory opened to settlement, altering land ownership dynamics
1935	Dust Bowl Peak	Severe drought and dust storms, massive impact on agriculture
Focus Mode can parse such tables to construct interactive timelines. Each event should have a clear date or year and a brief description. Alternatively, a bullet list under a "Timeline" section (with each item starting with a date) is acceptable. Always use unambiguous date formats (YYYY or YYYY-MM-DD) so that parsing is reliable. Mark any projected or hypothetical future dates clearly (e.g., ‚Äú2030 (Projected): ‚Ä¶‚Äù) to distinguish from historical facts.
3D Narrative Panels: If a document references or includes 3D scene content (e.g., a ‚Äústory context scene‚Äù as in KFM‚Äôs 3D Focus Mode), follow specific guidelines:
Provide a preview image (e.g., a screenshot of the 3D scene) with alt text describing the scene‚Äôs key elements for those who cannot view 3D.
Mention the asset filename or ID (for example, ‚Äúprairie_crossroads.glb 3D scene‚Äù) in the text so it‚Äôs searchable.
Ensure a corresponding STAC metadata JSON exists (and is linked via stac_ref or in an appendix) that describes the spatial and temporal extent of the 3D scene, its provenance, and usage (as exemplified in the Story Context Scenes documentation). Focus Mode v3 will use that metadata to place the 3D panel in context (e.g., ‚ÄúThis 3D scene covers Kansas prairies in 1850‚Äì1870‚Äù).
Any interactive 3D triggers (like ‚ÄúView in 3D‚Äù buttons in Focus Mode) will be added by the UI; the author just needs to ensure the assets and references are correctly documented and accessible.
AI-Interactive Elements: With Focus Mode‚Äôs AI capabilities expanding (for instance, allowing users to query an AI about the document content or related data), authors should:
Clearly label any AI-generated content in the document (per Section 10 in prior rules). For v11, if predictive or AI-modeled scenarios are included (e.g., an AI-predicted climate scenario for 2050), mark them with a disclaimer. Example: ‚Äú> AI Prediction (2050): The model projects a 15% increase in average annual rainfall.‚Äù Also include provenance: which model or data was used.
Avoid heavy speculation in narrative. Focus Mode‚Äôs AI will do its own predictions; authors should stick to factual or scenario-based writing and let the AI annotate or extrapolate if needed. If you do include scenario narratives, frame them as such and provide sources or reasoning.
Provide sufficient context around data or events so that Focus Mode‚Äôs Q&A feature can retrieve accurate answers. For example, define acronyms, explain causes and effects of events ‚Äì the AI will be better at responding if the document itself is clear and well-structured.
Focus Mode Hooks in Markdown: You do not need to include special HTML or code for Focus Mode beyond what‚Äôs described (YAML refs, blockquotes, tables, etc.). The idea is that by following these patterns, the existing Markdown remains human-readable and nicely formatted, while being rich enough for Focus Mode v3 to augment. Under the hood, the Focus engine will look for known patterns:
story_node_refs in YAML (for linking content to story graphs)
Blockquotes with Focus Summary: or other known keywords
Tables or lists that appear to be timelines or structured data
References to known asset types (like .glb for 3D scenes, or .geojson, etc.)
So as an author, stick to these conventions. Do not introduce custom tags or non-standard delimiters for the sake of Focus integration (they would likely be stripped out by CI as invalid Markdown anyway).
Testing in Focus Mode: It is recommended to preview how your document will appear in Focus Mode (if available) or use any provided linting tool to simulate it. Ensure that summaries make sense on their own, timeline data is correct, and story node references truly correspond to existing nodes.
By writing with these interactive affordances in mind, you turn static documents into rich story pieces in the KFM ecosystem. Focus Mode v3 will leverage this structured narrative to provide users with features like:
3D scene panels alongside text (bringing the scenes to life where mentioned),
Clickable timelines that highlight the described events,
AI narration and Q&A that can reference the ‚ÄúFocus Summary‚Äù blocks or timeline entries to answer user queries or even generate audio narration segments.
All of the above must be done without breaking the base Markdown rules. If something is not clear, err on the side of standard Markdown and metadata usage; future Focus Mode updates will likely expand to recognize more patterns, but the ones listed are guaranteed to be supported at launch.
üß± Section 7 ‚Äî Naming Conventions & File Paths (Monorepo Integration)
Consistency in file naming and placement is vital for a large monorepo like KFM. In v11.0, we reinforce and refine naming conventions to improve documentation traceability and integration with code, data, and CI processes:
File Name Format: Use kebab-case (dash-separated lowercase) for Markdown filenames whenever possible, to avoid ambiguity. The only exceptions are legacy files or special aggregate docs that have used underscores or camel case (e.g. MASTER_GUIDE_v10.md). Going forward, even those could transition to kebab-case (master-guide-v11.md) for consistency. All new documentation files should follow this pattern: all lowercase letters, words separated by hyphens, and no spaces. Version numbers in filenames are acceptable where appropriate (e.g., kfm-markdown-protocol-v11.md as used here) but keep them succinct.
Directory Placement: Continue to organize documentation by domain under docs/. For example, standards and protocols (like this one) go under docs/standards/, user guides in docs/guides/, analysis reports under docs/analyses/, etc. v11 doesn‚Äôt change the overall layout (the Master Guide v10 provides the authoritative structure). However, within those directories, ensure the filename and subfolder reflect the content. If a guide is about data ingestion, a path like docs/guides/data_ingestion/your-guide-name.md is preferred over a very generic or mismatched path.
Path in YAML vs Actual Path: The path field in YAML must match the actual repository path exactly (relative to repo root). CI will check that the file‚Äôs location corresponds to the path. This ensures traceability ‚Äì any references to this path (in other docs, in commit logs, or the governance ledger) are reliable. Do not use outdated or incorrect paths in YAML. If a file is moved or renamed, update the YAML path as part of that PR.
Documentation Traceability: To aid traceability, authors should reference the document‚Äôs semantic ID or title in commit messages when making changes. The CI governance ledger (event_source_id) picks up changes and logs them. The semantic_document_id in YAML is used as a stable reference (e.g., in logs or cross-references) even if a file gets renamed. Therefore, choose a semantic ID that is intuitive and likely to remain constant (for example, kfm-markdown-protocol without version numbers, as the ID for this spec across versions). If renaming an ID (which should be rare), ensure downstream references (like telemetry schemas or ontology mappings) are updated.
Cross-Referencing Files: When referencing another doc, always use relative paths that match the target‚Äôs YAML path. This makes automated link checking easier. For example, use [Master Guide](../MASTER_GUIDE_v10.md) or updated name if changed, rather than an absolute URL. v11 requires that all internal links between markdown files are verified. The CI link checker will flag broken or mismatched links (e.g., if the link text says one version but the target path is different).
Case Sensitivity and Encoding: Filenames and paths are case-sensitive on most systems (and in git). To avoid issues, use all-lowercase for directories and files (again aligning with kebab-case convention). Non-ASCII characters in filenames are not allowed (to prevent encoding issues); stick to English alphabet, digits, hyphen/underscore. Emojis in file content are fine, but not in file names.
Monorepo Integration: Because this repository includes code, data, and docs together, sometimes documentation corresponds directly to code modules or data artifacts. We encourage naming docs to clearly pair with what they document. For instance, if documenting a pipeline in src/pipelines/, consider naming the doc similarly to the pipeline or placing it alongside the code. If a dataset has a data contract JSON in data/contracts/, the documentation in docs/standards/data-contracts.md or a similarly named file should mention that contract by name. This makes it easier for developers to find related docs by name and for CI to potentially cross-validate (future enhancements may include checking that every data contract JSON has an accompanying markdown reference, etc.).
Unique Identifiers: The doc_uuid and event_source_id in YAML, as well as the file path, collectively ensure each document version is uniquely traceable. Do not copy an existing YAML front-matter to a new file without changing these identifiers. A common mistake would be duplicating a template and forgetting to update doc_uuid or path, causing collisions in the governance ledger. The upgraded CI will explicitly check for duplicate doc_uuid values to prevent this. Always generate a new UUID when creating a new document (tools may be provided to assist with this).
File Path Depth: Try to keep file paths reasonably short (in terms of directory nesting) unless necessary for logical grouping. Extremely deep nesting can make linking and path maintenance harder. The example of docs/reports/visualization/focus_mode/story_nodes/assets/legends/colorbars/README.md is a well-structured but deep path; ensure each subdirectory is needed. In that case, it was logically organizing assets; but avoid unnecessary sub-folders with only one file in them, etc. Each level should group multiple related files or serve a taxonomy purpose.
By following these naming and placement rules, documentation will be easier to navigate for humans and tools alike. The monorepo‚Äôs strength is having everything in one place; our job as authors is to keep that place orderly and semantically structured.
üß± Section 8 ‚Äî CI/CD Enforcement & Validation
All the above rules are not merely guidelines ‚Äì they are CI/CD enforceable policies. The repository‚Äôs automated checks have been updated to validate KFM-MDP v11 compliance. Here‚Äôs how markdown files progress from authoring to integration, and how the CI ensures rigor:
flowchart TD
    A[‚úèÔ∏è Authoring: Write/Update Markdown] --> B[ü§ñ Pre-Commit Hook (optional KFM Lint)]
    B --> C[üì• Pull Request to Main]
    C --> D{{CI: Markdown Validation Pipeline}}
    D --> D1[‚úÖ YAML Schema Check] & D2[‚úÖ Link & Path Check] & D3[‚úÖ MCP/KFM Lint] & D4[‚úÖ Accessibility Audit] & D5[‚úÖ FAIR+CARE Scan] & D6[‚úÖ STAC/DCAT Validation] & D7[‚úÖ Story Node Cross-check] & D8[‚úÖ Telemetry Logging]
    D1 & D2 & D3 & D4 & D5 & D6 & D7 & D8 --> E{All Checks Passed?}
    E -- No üö´--> F[CI Fails: Block Merge, Report Issues]
    E -- Yes üéâ--> G[Merge to Main]
    G --> H[üìä Telemetry Update & Governance Ledger Entry]
    H --> I[üîç Focus Mode Indexing & Integration]
Explanation of CI stages:
Pre-Commit Hook (optional): Developers are encouraged to run a local Markdown linter (configured to KFM rules) before pushing. This uses the same rules as CI (for example, a mcplint tool configured for KFM-MDP v11) to catch errors early.
Pull Request Validation: On opening or updating a PR, GitHub Actions workflows trigger a comprehensive docs validation pipeline. This includes:
YAML Schema Check: The YAML front-matter is parsed and validated against an updated schema (markdown-protocol-v11.schema.json). Missing required fields, incorrect types, or unknown fields will cause a failure. This ensures all the new fields (STAC, story nodes, etc.) are recognized and correctly formatted.
Link & Path Check: All internal links in the Markdown are verified. The path in the YAML is cross-checked against the actual location. Also, the file‚Äôs presence in expected table of contents or manifest might be checked (if applicable).
MCP/KFM Lint: The Master Coder Protocol lint (MCP-DL v6.3 rules) combined with KFM-specific rules (v11) run to catch structural issues: heading order, improper code fences, forbidden HTML, missing sections, etc. This is an expanded version of what markdown_rules.md v10.4 enforced, updated for new rules. For example, it will catch if a Focus Summary blockquote is malformed, or if an emoji-only heading is used.
Accessibility Audit: The CI will run an accessibility checker (possibly a custom script or a tool like MDLint with accessibility plugins). It looks for things like images without alt text, long lines of all-caps (which could indicate an acronym not explained), color references, etc. It also ensures accessibility_compliance is declared in YAML and matches the actual content (e.g., if someone sets "WCAG 2.1 AAA" but the content isn‚Äôt, that‚Äôs a human review thing; primarily it ensures the field is present).
FAIR+CARE Scan: This step programmatically searches for required CARE labels and FAIR terms in the content. If a document deals with indigenous data or sensitive topics, it should have CARE indicators (either in YAML or in content). The scan also ensures no disallowed sensitive details are present unmasked (for instance, coordinates of a sacred site might be flagged if present). This is part of ethical compliance.
STAC/DCAT Validation: If stac_ref or dcat_ref are provided, the CI will attempt to fetch or validate those JSON files against their schemas (STAC and DCAT schemas). Additionally, if the document describes a dataset but no STAC/DCAT is referenced, a warning or error may be raised to prompt adding one. This check ties the documentation to the data governance pipeline, ensuring that documentation doesn‚Äôt stray from what‚Äôs registered in catalogs.
Story Node Cross-check: If story_node_refs are present, the CI will verify that those references correspond to known Story Node identifiers (perhaps by checking a registry or list of valid IDs). This prevents typos in Story Node URNs from going unnoticed. If a referenced Story Node doesn‚Äôt exist, the author might be required to create it elsewhere or correct the reference.
Telemetry Logging: Upon a successful validation, the CI will update the documentation telemetry (for example, appending an entry in focus-telemetry.json or a database) noting that this document version exists and is compliant. This telemetry is used to inform Focus Mode and governance reports about documentation coverage, update frequency, and usage. It includes things like word count, last updated timestamp, which sections are present (for Focus Mode feature usage), etc.
Merge and Post-Merge: Only if all checks pass (no ‚ùå in any stage) can the PR be merged. A failure in any required check will block the merge (status checks are required). Assuming success:
The new document version is merged into main. At this point, an automated process logs the event: the event_source_id (ledger entry) is updated to reflect this version, including its doc_uuid and hash for immutability tracking in the governance ledger.
The telemetry and ledger update ensures that from here on, any Focus Mode or AI features have the latest content available. The ledger also serves as an auditable trail for compliance audits.
Focus Mode indexing is triggered or scheduled: the content is indexed for search and narrative linking. For example, the story nodes in the doc are now connected, the Focus summaries are extracted for quick reference, timeline entries might be pulled into a timeline service, etc. This makes the document immediately available in the interactive system.
Continuous Enforcement: Even after merge, if later analysis (or external changes) find an issue (for instance, a previously acceptable link becomes broken, or a new accessibility guideline needs retrofitting), the CI can be re-run on all docs periodically. Documentation that drifts out of compliance might cause a nightly build to fail, prompting maintainers to update it. This ensures long-term quality, not just one-time pass.
In summary, the CI/CD pipeline is the gatekeeper of the KFM Markdown Protocol. Authors should treat a CI docs failure as a non-negotiable to-do list ‚Äì the document isn‚Äôt ‚Äúdone‚Äù until CI is green. The extensive checks implemented for v11.0 give us high confidence that any document in the repo is consistent, accessible, and integrated with our data and AI systems. (The above Mermaid diagram illustrates the lifecycle: an author writes content, it goes through PR checks, merges, then is used in Focus Mode. Every step is enforced by automation.)
üï∞Ô∏è Version History
Version	Date	Author	Summary of Changes
v11.0.0	2025-11-17	KFM Core Team	Major upgrade ‚Äì Introduced extended YAML front-matter (STAC/DCAT/PROV-O metadata, Story Node links), Focus Mode v3 compatibility features (timeline tables, 3D scene references, summary callouts), stricter semantic heading rules with standardized emojis, enhanced accessibility targets (WCAG 2.1 AA+), new metadata-driven badges, refined naming conventions, and fully integrated CI enforcement for all new rules. Backward-compatible with v10.4.0.
v10.4.3	2025-11-16	Docs Council	Minor revision ‚Äì Refinements to rules (telemetry alignment, directory format enforcement).
v10.4.0	2025-11-14	Docs Council	Original KFM Markdown Protocol governance release (baseline 80-component standard under MCP v6.3).
<div align="center"> ¬© 2025 Kansas Frontier Matrix ‚Äî CC-BY 4.0
Master Coder Protocol v6.3 Compatible ¬∑ FAIR+CARE Certified
Diamond‚Åπ Œ© / Crown‚àûŒ© Ultimate Certified (Draft v11.0) </div> ```

Sources


No file chosenNo file chosen
ChatGPT can make mistakes. Check important info.

Enhanced Markdown Authoring Protocol for Kansas Frontier Matrix
ChatGPT
I‚Äôm piecing together a superior Kansas Frontier Matrix (KFM) Markdown authoring protocol, ensuring backward compatibility, future-proofing, adhering to accessibility standards, integrating new features like AI-interactive timelines, and refining naming conventions for monorepo integration.

Searched for Bartytime4life Kansas-Frontier-Matrix KFM v10.4.0 repository
ChatGPT
I‚Äôm piecing together the details of KFM v10.4 by examining the relevant section in the "docs/standards/governance/releases/kfm-governance-v10.4.md" file.


Read GitHub

ChatGPT
I‚Äôm mapping out the improvements needed for KFM v10.4, including maintaining compatibility, integrating YAML front-matter, ensuring accessibility, and defining naming conventions for better integration.

Searched for Bartytime4life Kansas-Frontier-Matrix Focus Mode v3 repository
ChatGPT
I‚Äôm looking into future features for Focus Mode v3, like "3D narrative panels" and "predictive visual storytelling," while mapping out the integration of YAML front matter fields for STAC, DCAT, PROV-O, FAIR/CARE, and Story Node linking.

Searched for Bartytime4life Kansas-Frontier-Matrix front-matter STAC DCAT PROV

Read more from GitHub

ChatGPT
I'm curious about enhancing the KFM markdown authoring protocol, specifically focusing on YAML front-matter and integrating features like Focus Mode v3 for interactive storytelling.

Searched for 3D narrative panels Kansas Frontier Matrix
ChatGPT
Investigating "Focus Mode v3" within internal documents or code to pinpoint its significance or potential issues.

I‚Äôm refining the GitHub issue search to focus on bartytime4life/Kansas-Frontier-Matrix.

Searched for Bartytime4life Kansas-Frontier-Matrix 3D narrative
ChatGPT
OPENING FILE

I‚Äôm getting a closer look at 3d views and story context scenes in this file.


Read more from GitHub

ChatGPT
I'm gathering info on "metadata_profile: STAC-1.0, DCAT-2.0" for STAC, DCAT, PROV-O integration, and fields like "commit_sha" and "license". Also considering Focus Mode v3 features.


Read more from GitHub

ChatGPT
I‚Äôm downloading the PDF documentation and verifying the file integrity with MD5 and SHA1 checksums. This helps ensure the files are secure and accurate.

Searched for Bartytime4life Kansas-Frontier-Matrix markdown rules v10.4
ChatGPT
I'm examining the markdown rules to ensure proper formatting.


Read more from GitHub

ChatGPT
Backward compatibility with protocols, full YAML front-matter with various references, and ensuring readiness for Focus Mode v3.

I'm pulling together the new fields and structure needed for the KFM Markdown Protocol v11.0, including STAC/DAT, provenance, and 3D scene references.

I'm optimizing file path conventions and linking code references. This ensures consistent naming and version tracking for better documentation traceability in a monorepo setup.

Searched for Bartytime4life Kansas-Frontier-Matrix focus mode v3 timeline
ChatGPT
Identifying problems
Analyzing potential causes
Gathering insights

Taking a closer look
Assessing initial steps

Pinpointing the cause
Mapping solutions
Setting to work

Searched for v11 Kansas Frontier Matrix
ChatGPT
I'm thinking through how to format the GitHub-safe Markdown code block, including handling three backticks and nested code fences. This ensures clarity and avoids prematurely closing blocks.

I'm considering how to integrate story node linking as an optional field in YAML front matter, detailing its relevance and potential implementation for demonstration purposes.


Read more from GitHub

ChatGPT
Mapping out how to blend STAC/DCAT. Considering linking documents with JSON metadata files for consistency.


Read more from GitHub

ChatGPT
Piecing together new fields, updating compliance, and setting placeholders.

Searched for KFM v11 Focus Mode timeline mermaid
ChatGPT
I reviewed the context but found it lacking relevance.

Searched for Focus Mode v3 predictive visual storytelling
ChatGPT
I'm focusing on building the final answer by leveraging the available information.

Research completed in 13m ¬∑ 7 sources

---
title: "üìë Kansas Frontier Matrix ‚Äî Markdown Authoring Protocol (KFM-MDP) v11.0"
path: "docs/standards/kfm_markdown_protocol_v11.md"
version: "v11.0.0"
last_updated: "2025-11-17"
review_cycle: "Annual / FAIR+CARE Council & Focus Mode Board"
commit_sha: "<latest-commit-hash>"
sbom_ref: "../../releases/v11.0.0/sbom.spdx.json"
manifest_ref: "../../releases/v11.0.0/manifest.zip"
telemetry_ref: "../../releases/v11.0.0/focus-telemetry.json"
telemetry_schema: "../../schemas/telemetry/markdown-protocol-v11.json"
governance_ref: "../governance/ROOT-GOVERNANCE.md"
license: "CC-BY 4.0"
mcp_version: "MCP-DL v6.3"
markdown_protocol_version: "KFM-MDP v11.0.0"
status: "Draft / In Review"
doc_kind: "Standard"
intent: "markdown-governance"
fair_category: "F1-A1-I1-R1"
care_label: "Public / Low-Risk"
sensitivity_level: "None"
provenance_chain:
  - "docs/standards/markdown_rules.md@v10.4.3"
  - "docs/standards/markdown_rules.md@v10.4.0"
ontology_alignment:
  cidoc: "E29 Design or Procedure"
  schema_org: "TechArticle"
  prov_o: "prov:Plan"
story_node_refs: []  # (Optional: link to related Story Nodes, if any)
metadata_profiles:
  - "STAC 1.0.0"
  - "DCAT 3.0"
  - "PROV-O"
  - "FAIR+CARE"
doc_uuid: "urn:kfm:docs:standards:markdown-protocol-v11.0.0"
semantic_document_id: "kfm-markdown-protocol-v11"
event_source_id: "ledger:markdown_protocol_v11"
immutability_status: "mutable-draft"
doc_integrity_checksum: "<sha256>"
ai_training_inclusion: false
ai_focusmode_usage: "Allowed with enhancements"
ai_transform_permissions:
  - "summary"
  - "timeline-generation"
  - "3d-context-render"
ai_transform_prohibited:
  - "content-alteration"
machine_extractable: true
accessibility_compliance: "WCAG 2.1 AA+"
jurisdiction: "Kansas / United States"
classification: "Public"
lifecycle_stage: "draft"
ttl_policy: "24 months"
sunset_policy: "Supersedes KFM-MDP v10.4 after adoption"
---

<div align="center">

# üìë **Kansas Frontier Matrix ‚Äî Markdown Authoring Protocol v11.0**  
`docs/standards/kfm_markdown_protocol_v11.md`

**Purpose:**  
Establish the **upgraded Markdown authoring specification** for Kansas Frontier Matrix, building on **MCP-DL v6.3** and **KFM-MDP v10.4.0**. This protocol adds **future-proof extensions (v11+)** for metadata, Focus Mode v3 compatibility, accessibility, and monorepo integration while **maintaining backward compatibility** with prior standards.

[![Docs ¬∑ MCP v6.3](https://img.shields.io/badge/Docs-MCP_v6.3-blue)]() 
[![KFM-MDP v11.0](https://img.shields.io/badge/KFM\u2013MDP-v11.0-informational)]() 
[![FAIR+CARE](https://img.shields.io/badge/FAIR%2BCARE-Compliant-gold)]() 
[![WCAG 2.1 AA+](https://img.shields.io/badge/Accessibility-WCAG_2.1_AA%2B-blueviolet)]() 
[![Status: Draft](https://img.shields.io/badge/Status-Draft-yellow)]()

</div>

---

## üìò Overview

The **KFM Markdown Protocol v11.0** is an evolution of the unified documentation ruleset, expanding semantic rigor and future-oriented features while preserving compatibility with **Master Coder Protocol (MCP-DL v6.3)** and **KFM v10.4** conventions. Key enhancements include an **extended YAML front-matter** for rich metadata (STAC, DCAT, PROV-O, FAIR/CARE, Story Nodes), **Focus Mode v3 support** (3D narrative panels, AI-driven timelines, predictive storytelling hooks), stricter **accessibility compliance (WCAG 2.1 AA+)**, new **metadata-driven badge requirements**, improved **semantic heading structure**, and refined naming/path conventions for better integration and traceability. All KFM markdown content must conform to these rules or **fail CI**.

Backward compatibility is ensured: any document valid under KFM-MDP v10.4 remains valid under v11 (all previously required fields and sections are honored). The new features are primarily additive or tighten optional practices into requirements, preparing the system for version 11+ extensions without breaking legacy content.

---

## üß± Section 1 ‚Äî Required Layout & Semantic Structure

Every markdown document **MUST** follow the standardized structure (with semantic headings):

1. **YAML Front-Matter Block** ‚Äì enriched metadata header (detailed in Section 2).  
2. **Centered Title & Metadata Badge Block** ‚Äì document title (H1) with emoji and file path, followed by purpose, and auto-generated badges reflecting YAML metadata.  
3. **Horizontal Rule** (`---`) separating header from body.  
4. **Overview** section (H2) ‚Äì high-level summary of the document‚Äôs content and context.  
5. **Directory Context** (H2, if applicable) ‚Äì a tree structure of relevant files (for architecture, features, or dataset docs).  
6. **Main Content Sections** (H2 and below) ‚Äì the core narrative, subdivided with meaningful H3/H4 as needed. Each major section‚Äôs heading **must convey semantic meaning** (no placeholder or duplicate titles). Emoji prefixes are encouraged to indicate the section type (e.g. üìò Overview, üó∫Ô∏è Data, üß© Component, üï∞Ô∏è Timeline).  
7. **Tables, Diagrams, Examples** ‚Äì any supporting material, embedded in appropriate sections with captions or context.  
8. **Focus Mode Summaries & Narrative Hooks** (if applicable) ‚Äì embedded callouts or blocks for Focus Mode integration (see Section 6).  
9. **Version History** (H2) ‚Äì a table logging version, date, author, and summary of changes.  
10. **Footer / Licensing** ‚Äì final horizontal rule and a centered footer with copyright and certification lines.

**Heading levels:** Only H1 through H4 are permitted, as before. One H1 (document title) at the top; H2 for primary sections; H3 for subsections; H4 for deeply nested details. Headings must be used in order without skipping levels, to maintain accessibility and machine parseability. All headings should be **descriptive**, using keywords relevant to the section content (avoid generic terms). An emoji at the start of a heading is allowed (and now recommended for key sections) but must be followed by text; headings **cannot** consist solely of an emoji or icon.

---

## üß± Section 2 ‚Äî YAML Front-Matter (Extended Metadata)

Every file **must begin** with a YAML front-matter block delineated by `---` lines. This block now includes an **expanded set of fields** to capture rich metadata for governance, discovery, and provenance. The minimum required fields (many carried over from v10.4) are:

```yaml
title:           # Document title (including emoji)  
path:            # Repository path to the file (relative)  
version:         # Document version (semantic versioning)  
last_updated:    # ISO date of last update  
review_cycle:    # e.g. "Annual", "Quarterly", with oversight body if any  
commit_sha:      # Git commit hash of this version  
sbom_ref:        # Path/URL to SBOM (software bill of materials) if applicable  
manifest_ref:    # Path/URL to data manifest or package  
telemetry_ref:   # Path to telemetry JSON capturing doc usage stats  
telemetry_schema:# Schema reference for the telemetry data  
governance_ref:  # Link to governance root or policy doc  
license:         # Content license (e.g. CC-BY 4.0)  
mcp_version:     # Master Coder Protocol version (should remain MCP-DL v6.3)  
markdown_protocol_version: # KFM-MDP version (e.g. "v11.0.0")  
status:          # Document status (Draft, Active, Enforced, Deprecated, etc.)  
doc_kind:        # Type of document (Standard, Guide, Policy, Report, etc.)  
intent:          # Short descriptor of the document‚Äôs purpose/category  
semantic_document_id:  # Machine-friendly unique ID (no spaces, used in ledger)  
doc_uuid:        # Immutable UUID or URN for the doc version  
New required metadata fields introduced in v11.0:
ontology_alignment:    # Map of ontology terms situating this doc in formal schemas  
  prov_o:    # e.g. prov:Plan, prov:Entity (PROV-O class that best represents the doc)  
  schema_org:# e.g. TechArticle, Dataset, Guide (Schema.org class)  
  cidoc:     # e.g. CIDOC CRM entity, if relevant  
  owl_time:  # e.g. TemporalEntity, if applicable (for timeline docs)  
fair_category:         # FAIR principle alignment code (e.g. F1-A1-I1-R1)  
care_label:            # CARE designation (e.g. Public, Restricted, etc. with context)  
immutability_status:   # e.g. "immutable", "version-pinned", or "mutable-draft"  
New optional fields (include if relevant to the content):
story_node_refs:   # List of Story Node URNs/IDs that this document ties into (for Focus Mode narratives)  
metadata_profiles: # List of standards this doc adheres to regarding content metadata, e.g. ["STAC 1.0.0", "DCAT 3.0", "PROV-O"]  
stac_ref:          # Path or URL to a related STAC Item/Collection metadata file (if the doc describes a dataset or asset)  
dcat_ref:          # Path or URI for a DCAT dataset record corresponding to this document‚Äôs dataset (if applicable)  
provenance_chain:  # List of prior document URIs/paths (lineage for this doc)  
previous_version_hash: # The checksum of the immediate previous version (for integrity tracking)  
Rules: All YAML fields must be left-aligned with two-space indentation for nested maps. No tabs, trailing spaces, or unregistered fields are allowed. Every required field must be present and filled with an appropriate value. Unknown or extra fields will cause CI to fail (strict schema validation is in place). The YAML block should comprehensively describe the document‚Äôs metadata, enabling automated indexing (for search, catalogs, and provenance tracking) and compliance checks (for FAIR/CARE and STAC/DCAT alignment). The inclusion of STAC/DCAT/PROV-O fields ensures that any dataset or asset described in the documentation is linked to machine-readable metadata:
stac_ref should point to a valid STAC Item or Collection JSON that describes spatial/temporal assets mentioned in the doc (if the doc is a data artifact description).
dcat_ref should link to a DCAT entry (in JSON-LD or RDF) for datasets covered by the doc, aiding data catalog integration.
The ontology_alignment must include a PROV-O element (e.g., prov:Entity for data, prov:Plan for process or standard documents, etc.), situating the document in the provenance ontology for downstream traceability.
story_node_refs allows linking the content to interactive narrative nodes used in Focus Mode; include one or more identifiers if this doc contributes to or is part of a storyline (e.g., linking an analysis report to a Story Node representing an event or theme).
Backward compatibility: Documents written for v10.4.x that lack the new fields remain valid, but it is RECOMMENDED to update them with these fields when possible. The CI will not reject older docs immediately if they meet v10.4 requirements, but it will issue warnings for missing v11 metadata, preparing for a future where these become mandatory.
üß± Section 3 ‚Äî Centered Title & Metadata Badges Block
Immediately after the YAML front-matter, each document must have a centered header block in HTML, containing the title and metadata badges. This block remains mostly the same as in v10.4 with one significant addition: badges must be dynamically derived from the YAML metadata to ensure consistency and traceability. Structure:
<div align="center">

# üè∑Ô∏è **Document Title**  
`path/to/file.md`

**Purpose:**  
Brief one- to three-line description of the document's purpose.

[badges here]

</div>
Rules:
The title (H1) must include a relevant emoji and bold text, matching the title in YAML exactly (including the emoji). Only one H1 in the document (inside this center block).
The file path must appear on the line immediately below the title, enclosed in backticks, and should mirror the path field from YAML.
The Purpose must be a concise summary of the document‚Äôs intent, limited to a few lines. It should provide context at a glance (this text is often used by Focus Mode and other tools for quick previews).
Following the purpose, include a series of badge images (shields) reflecting key metadata:
MCP Version badge (e.g. ‚ÄúMCP v6.3‚Äù) ‚Äì must match the mcp_version field.
KFM-MDP Version badge (e.g. ‚ÄúKFM-MDP v11.0‚Äù) ‚Äì reflecting this spec‚Äôs version.
License badge based on license (e.g. CC-BY 4.0).
FAIR+CARE compliance badge (if applicable) ‚Äì indicating the document meets required ethical standards.
Status badge ‚Äì reflecting the status field (e.g. Draft, Active, Enforced).
Optionally, badges for new features:
Accessibility ‚Äì e.g. ‚ÄúWCAG 2.1 AA+‚Äù if applicable.
Focus Mode ‚Äì e.g. a badge indicating ‚ÄúFocus v3 Ready‚Äù if the doc includes Focus Mode v3 hooks (this can be automatically shown if story_node_refs or other Focus fields are present).
Badges should use the shields.io format as shown in the example, but without hard-coding values that conflict with YAML. In practice, a CI or generator should produce these badges from YAML to avoid drift. Authors are expected to include or update the badge markdown so it stays in sync (the CI will validate that badge text matches YAML values).
Example: A badge line might look like:
![Status: Active](https://img.shields.io/badge/Status-Active-brightgreen)
If status: "Active" in YAML. If the YAML status is ‚ÄúDraft‚Äù, the badge must reflect ‚ÄúDraft‚Äù accordingly. CI will flag any mismatch between metadata and badge text.
Keep the center block free of extraneous HTML or styling. Use exactly <div align="center"> and </div> with no additional attributes (to maintain uniform parsing). Do not include images or media aside from badges here.
No blank lines between title, path, purpose, and badges ‚Äî the block should be a tight, centered header section.
This centered header (title + badges) is critical: it‚Äôs used for automated document indexing and for Focus Mode‚Äôs document info panel. It must strictly follow the pattern or the parsing scripts (and CI checks) will fail.
üß± Section 4 ‚Äî Semantic Headings & Accessibility Structure
To improve semantic clarity and accessibility, v11.0 introduces stricter guidelines on headings and section ordering (complementing Section 1):
Section Ordering: The presence and correct ordering of sections (Overview, etc.) are enforced. Every document should begin with an Overview (providing context for all readers including AI summarization), and end with Version History and the footer. If a section like Directory Layout or specific subtopic sections are not applicable, they can be omitted, but the author should ensure the narrative flow still makes sense and meets any domain-specific template requirements.
Descriptive Headings: Each section heading must clearly reflect its content. Avoid one-word or overly general headings. For example, instead of a vague ‚ÄúDetails‚Äù use something like ‚Äúüìä Data Quality Assessment‚Äù or ‚Äúüåê Geospatial Coverage‚Äù. This improves navigability and machine understanding (Focus Mode will, for instance, list section titles in navigation ‚Äì they need to be meaningful).
Emoji Usage: Continue the practice of prefixing major section titles with an emoji icon relevant to the section theme (as used throughout KFM docs). New in v11, a standard emoji set is recommended for consistency:
üìò Overview (intro/summary)
üóÇÔ∏è Directory Layout (file structure)
üß≠ Context or Background (narrative context sections)
üï∞Ô∏è Timeline (if chronological events are described)
üìä Data or Results
üß© Component or Integration details
‚öôÔ∏è Methodology/Process
üé® Visualization/Design elements
‚öñÔ∏è FAIR-CARE or Ethical notes
üï∞Ô∏è Version History (reuse the timeline emoji for version history table)
(The above are suggestions; KFM may publish a full emoji-to-section mapping. Authors should choose an emoji that has an intuitive association with the section content.) All headings must include text; do not use emoji alone as a heading name. Additionally, avoid using different emojis for the same type of section across docs (for example, always use the same symbol for ‚ÄúOverview‚Äù to aid recognition).
Heading Levels and Nesting: As previously, do not create random extra levels. Headings should form a logical hierarchy. If a section requires deeper explanation, use sub-headings (H3, H4) under an H2 section rather than creating additional top-level sections out of place.
Accessibility of Headings: Ensure that heading text is clear even without the surrounding context. Remember that some assistive technologies allow users to navigate by headings alone. For instance, a heading ‚Äú## üìä Results‚Äù should possibly be more specific, like ‚Äú## üìä Rainfall Index Results 1900‚Äì2000‚Äù in a climate analysis report, so a screen reader user can differentiate it from another document‚Äôs ‚ÄúResults‚Äù.
No Redundant Sections: If a document naturally doesn‚Äôt need a section (e.g., a brief policy doc might not have a Directory Layout or data methodology), do not include empty sections. Skip them, but keep the overall logical flow (Overview first, etc.). The CI will accept missing optional sections but will flag out-of-order required sections or unknown section headings that should be standardized.
Horizontal Rules: Continue to use --- as section dividers sparingly. In v10.4, a horizontal rule was required after the YAML, and often after major sections in long docs. In v11, horizontal rules are primarily expected:
After the centered title block (as a clear break between header and content).
Before the Version History and before the footer, to visually separate those meta sections from the main content.
For dividing sections within content, prefer proper headings rather than multiple horizontal rules, to maintain semantic structure.
Adhering to these semantic heading rules improves both WCAG 2.1 compliance (by providing a logical document outline) and integration with Focus Mode v3, which automatically builds an interactive table of contents and context maps from the document‚Äôs heading hierarchy.
üß± Section 5 ‚Äî Accessibility & Inclusive Design (WCAG 2.1 AA+)
All Markdown content must uphold strong accessibility standards, now targeting WCAG 2.1 AA+ compliance. This means not only meeting all AA criteria but also incorporating certain AAA-level best practices where feasible. The rules include and extend those from v10.4:
Alt Text for Images: Every embedded image must have descriptive alt text enclosed in the image syntax. The alt text should convey the purpose or content of the image. This remains non-negotiable ‚Äî any image without alt text (or with meaningless alt text like "image" or "*") will cause a lint failure.
Captioning and Descriptions: If a figure (image or diagram) is complex, include a brief caption or description in the text. For particularly complex visuals (like a detailed map or a 3D scene screenshot), provide a longer description either in an appendix or as a preceding paragraph. This goes towards AAA guidelines for providing alternative content for complex info.
Color and Contrast: Authors must ensure that any text in images or diagrams, as well as any color-coded elements described in the text, meet contrast requirements. Avoid phrases like ‚Äúmarked in red/green‚Äù without an alternative indicator (pattern, label, or shape) ‚Äî this supports color-blind users (WCAG 2.1 requirement). The CI‚Äôs accessibility lint will check common issues (like low color contrast in code or embedded SVG if possible).
No Untagged HTML: Do not use raw HTML for content formatting, as it can bypass accessibility checks. The only allowed HTML remains the centered <div> for the title block (and any necessary entities for special symbols). Any other HTML usage must be justified by an accessibility need and may be subject to review.
Keyboard Navigation Consideration: While Markdown itself is static, if any embedded content (like a code example with interactive elements in Focus Mode, or links) is present, ensure it would be accessible via keyboard navigation in the rendered environment. For example, if you list interactive timeline points as links or buttons in Focus Mode, ensure they are correctly marked up (Focus Mode‚Äôs responsibility, but authors should not introduce non-accessible interactive patterns in docs).
Inclusive Language: The content should use clear and inclusive language. Jargon should be explained, acronyms spelled out on first use, and culturally sensitive content flagged with appropriate CARE labels (which is partly covered by the CARE metadata). Avoid speculative or unverifiable claims, especially those that might mislead or exclude certain groups (this ties into AI content rules as well).
Dynamic Content Warnings: If any content is time-sensitive or dynamically generated (e.g., an AI-generated summary that might update, or a predictive scenario that could change), note this in the text so users are aware. This transparency is an ethical and accessibility consideration (users know that content might not be static or might have uncertainty).
New in WCAG 2.1 AA+ focus: We encourage meeting some AAA criteria such as:
Providing an extended audio/text description for any video content (if video were embedded, though rare in Markdown).
Ensuring reading level is appropriate for the audience (explain highly technical terms or provide glossaries).
Avoiding content that could cause seizures or physical reactions (no flashing or rapidly updating content ‚Äî mostly not applicable in static Markdown, but caution with animated GIFs or images).
While AAA compliance is not strictly required (hence ‚ÄúAA+‚Äù meaning AA plus selected enhancements), all content should strive for the highest practical accessibility. The accessibility_lint.yml CI job will be updated to flag any regression on these fronts. Documents passing all checks will effectively be Diamond‚Åπ Œ© / Crown‚àûŒ© Ultimate Certified on accessibility.
üß± Section 6 ‚Äî Focus Mode v3 Integration & Narrative Affordances
One of the major advancements in v11 is built-in support for Focus Mode v3 and emerging interactive storytelling features. Authors should write markdown not just for static reading, but also with the interactive narrative experience in mind. Key requirements and guidelines for Focus Mode integration:
Story Node Linking: If a document is part of an interactive story or corresponds to an entity/event in the KFM knowledge graph, use the story_node_refs field in YAML to list those Story Node IDs. In the content, make sure to mention the relevant narrative or entity so Focus Mode can contextually link. For example, if a report corresponds to the 1850 Drought storyline, include a reference in text like: ‚Äú‚Ä¶as detailed in Story Node: Great Drought of 1850‚Ä¶‚Äù. The Focus Mode engine will use story_node_refs to connect this document to the correct narrative thread and may display a special panel or indicator in the UI.
Embedded Focus Summaries: Authors are encouraged to include short summary or highlight blocks that Focus Mode can identify and surface. The standard format for a Focus summary is a blockquote that begins with a bold label, for example:
> **Focus Summary:** In the 1850s, Kansas experienced extreme droughts that reshaped settlement patterns, a fact evidenced by tree-ring data and recorded migration slowdowns.
Such a block gives a quick narrative takeaway. Focus Mode v3 will automatically detect these **Focus Summary:** quotes and use them as pop-up highlights or audio narration cues. Ensure the summary is accurate, succinct, and can stand alone.
Timeline Events: To support AI-interactive timelines, documents that describe chronological sequences (e.g., historical events, data trends over years) should format these as structured lists or tables. For example, a table of key events with dates:
Year	Event	Description
1854	Kansas‚ÄìNebraska Act	Territory opened to settlement, altering land ownership dynamics
1935	Dust Bowl Peak	Severe drought and dust storms, massive impact on agriculture
Focus Mode can parse such tables to construct interactive timelines. Each event should have a clear date or year and a brief description. Alternatively, a bullet list under a "Timeline" section (with each item starting with a date) is acceptable. Always use unambiguous date formats (YYYY or YYYY-MM-DD) so that parsing is reliable. Mark any projected or hypothetical future dates clearly (e.g., ‚Äú2030 (Projected): ‚Ä¶‚Äù) to distinguish from historical facts.
3D Narrative Panels: If a document references or includes 3D scene content (e.g., a ‚Äústory context scene‚Äù as in KFM‚Äôs 3D Focus Mode), follow specific guidelines:
Provide a preview image (e.g., a screenshot of the 3D scene) with alt text describing the scene‚Äôs key elements for those who cannot view 3D.
Mention the asset filename or ID (for example, ‚Äúprairie_crossroads.glb 3D scene‚Äù) in the text so it‚Äôs searchable.
Ensure a corresponding STAC metadata JSON exists (and is linked via stac_ref or in an appendix) that describes the spatial and temporal extent of the 3D scene, its provenance, and usage (as exemplified in the Story Context Scenes documentation). Focus Mode v3 will use that metadata to place the 3D panel in context (e.g., ‚ÄúThis 3D scene covers Kansas prairies in 1850‚Äì1870‚Äù).
Any interactive 3D triggers (like ‚ÄúView in 3D‚Äù buttons in Focus Mode) will be added by the UI; the author just needs to ensure the assets and references are correctly documented and accessible.
AI-Interactive Elements: With Focus Mode‚Äôs AI capabilities expanding (for instance, allowing users to query an AI about the document content or related data), authors should:
Clearly label any AI-generated content in the document (per Section 10 in prior rules). For v11, if predictive or AI-modeled scenarios are included (e.g., an AI-predicted climate scenario for 2050), mark them with a disclaimer. Example: ‚Äú> AI Prediction (2050): The model projects a 15% increase in average annual rainfall.‚Äù Also include provenance: which model or data was used.
Avoid heavy speculation in narrative. Focus Mode‚Äôs AI will do its own predictions; authors should stick to factual or scenario-based writing and let the AI annotate or extrapolate if needed. If you do include scenario narratives, frame them as such and provide sources or reasoning.
Provide sufficient context around data or events so that Focus Mode‚Äôs Q&A feature can retrieve accurate answers. For example, define acronyms, explain causes and effects of events ‚Äì the AI will be better at responding if the document itself is clear and well-structured.
Focus Mode Hooks in Markdown: You do not need to include special HTML or code for Focus Mode beyond what‚Äôs described (YAML refs, blockquotes, tables, etc.). The idea is that by following these patterns, the existing Markdown remains human-readable and nicely formatted, while being rich enough for Focus Mode v3 to augment. Under the hood, the Focus engine will look for known patterns:
story_node_refs in YAML (for linking content to story graphs)
Blockquotes with Focus Summary: or other known keywords
Tables or lists that appear to be timelines or structured data
References to known asset types (like .glb for 3D scenes, or .geojson, etc.)
So as an author, stick to these conventions. Do not introduce custom tags or non-standard delimiters for the sake of Focus integration (they would likely be stripped out by CI as invalid Markdown anyway).
Testing in Focus Mode: It is recommended to preview how your document will appear in Focus Mode (if available) or use any provided linting tool to simulate it. Ensure that summaries make sense on their own, timeline data is correct, and story node references truly correspond to existing nodes.
By writing with these interactive affordances in mind, you turn static documents into rich story pieces in the KFM ecosystem. Focus Mode v3 will leverage this structured narrative to provide users with features like:
3D scene panels alongside text (bringing the scenes to life where mentioned),
Clickable timelines that highlight the described events,
AI narration and Q&A that can reference the ‚ÄúFocus Summary‚Äù blocks or timeline entries to answer user queries or even generate audio narration segments.
All of the above must be done without breaking the base Markdown rules. If something is not clear, err on the side of standard Markdown and metadata usage; future Focus Mode updates will likely expand to recognize more patterns, but the ones listed are guaranteed to be supported at launch.
üß± Section 7 ‚Äî Naming Conventions & File Paths (Monorepo Integration)
Consistency in file naming and placement is vital for a large monorepo like KFM. In v11.0, we reinforce and refine naming conventions to improve documentation traceability and integration with code, data, and CI processes:
File Name Format: Use kebab-case (dash-separated lowercase) for Markdown filenames whenever possible, to avoid ambiguity. The only exceptions are legacy files or special aggregate docs that have used underscores or camel case (e.g. MASTER_GUIDE_v10.md). Going forward, even those could transition to kebab-case (master-guide-v11.md) for consistency. All new documentation files should follow this pattern: all lowercase letters, words separated by hyphens, and no spaces. Version numbers in filenames are acceptable where appropriate (e.g., kfm-markdown-protocol-v11.md as used here) but keep them succinct.
Directory Placement: Continue to organize documentation by domain under docs/. For example, standards and protocols (like this one) go under docs/standards/, user guides in docs/guides/, analysis reports under docs/analyses/, etc. v11 doesn‚Äôt change the overall layout (the Master Guide v10 provides the authoritative structure). However, within those directories, ensure the filename and subfolder reflect the content. If a guide is about data ingestion, a path like docs/guides/data_ingestion/your-guide-name.md is preferred over a very generic or mismatched path.
Path in YAML vs Actual Path: The path field in YAML must match the actual repository path exactly (relative to repo root). CI will check that the file‚Äôs location corresponds to the path. This ensures traceability ‚Äì any references to this path (in other docs, in commit logs, or the governance ledger) are reliable. Do not use outdated or incorrect paths in YAML. If a file is moved or renamed, update the YAML path as part of that PR.
Documentation Traceability: To aid traceability, authors should reference the document‚Äôs semantic ID or title in commit messages when making changes. The CI governance ledger (event_source_id) picks up changes and logs them. The semantic_document_id in YAML is used as a stable reference (e.g., in logs or cross-references) even if a file gets renamed. Therefore, choose a semantic ID that is intuitive and likely to remain constant (for example, kfm-markdown-protocol without version numbers, as the ID for this spec across versions). If renaming an ID (which should be rare), ensure downstream references (like telemetry schemas or ontology mappings) are updated.
Cross-Referencing Files: When referencing another doc, always use relative paths that match the target‚Äôs YAML path. This makes automated link checking easier. For example, use [Master Guide](../MASTER_GUIDE_v10.md) or updated name if changed, rather than an absolute URL. v11 requires that all internal links between markdown files are verified. The CI link checker will flag broken or mismatched links (e.g., if the link text says one version but the target path is different).
Case Sensitivity and Encoding: Filenames and paths are case-sensitive on most systems (and in git). To avoid issues, use all-lowercase for directories and files (again aligning with kebab-case convention). Non-ASCII characters in filenames are not allowed (to prevent encoding issues); stick to English alphabet, digits, hyphen/underscore. Emojis in file content are fine, but not in file names.
Monorepo Integration: Because this repository includes code, data, and docs together, sometimes documentation corresponds directly to code modules or data artifacts. We encourage naming docs to clearly pair with what they document. For instance, if documenting a pipeline in src/pipelines/, consider naming the doc similarly to the pipeline or placing it alongside the code. If a dataset has a data contract JSON in data/contracts/, the documentation in docs/standards/data-contracts.md or a similarly named file should mention that contract by name. This makes it easier for developers to find related docs by name and for CI to potentially cross-validate (future enhancements may include checking that every data contract JSON has an accompanying markdown reference, etc.).
Unique Identifiers: The doc_uuid and event_source_id in YAML, as well as the file path, collectively ensure each document version is uniquely traceable. Do not copy an existing YAML front-matter to a new file without changing these identifiers. A common mistake would be duplicating a template and forgetting to update doc_uuid or path, causing collisions in the governance ledger. The upgraded CI will explicitly check for duplicate doc_uuid values to prevent this. Always generate a new UUID when creating a new document (tools may be provided to assist with this).
File Path Depth: Try to keep file paths reasonably short (in terms of directory nesting) unless necessary for logical grouping. Extremely deep nesting can make linking and path maintenance harder. The example of docs/reports/visualization/focus_mode/story_nodes/assets/legends/colorbars/README.md is a well-structured but deep path; ensure each subdirectory is needed. In that case, it was logically organizing assets; but avoid unnecessary sub-folders with only one file in them, etc. Each level should group multiple related files or serve a taxonomy purpose.
By following these naming and placement rules, documentation will be easier to navigate for humans and tools alike. The monorepo‚Äôs strength is having everything in one place; our job as authors is to keep that place orderly and semantically structured.
üß± Section 8 ‚Äî CI/CD Enforcement & Validation
All the above rules are not merely guidelines ‚Äì they are CI/CD enforceable policies. The repository‚Äôs automated checks have been updated to validate KFM-MDP v11 compliance. Here‚Äôs how markdown files progress from authoring to integration, and how the CI ensures rigor:
flowchart TD
    A[‚úèÔ∏è Authoring: Write/Update Markdown] --> B[ü§ñ Pre-Commit Hook (optional KFM Lint)]
    B --> C[üì• Pull Request to Main]
    C --> D{{CI: Markdown Validation Pipeline}}
    D --> D1[‚úÖ YAML Schema Check] & D2[‚úÖ Link & Path Check] & D3[‚úÖ MCP/KFM Lint] & D4[‚úÖ Accessibility Audit] & D5[‚úÖ FAIR+CARE Scan] & D6[‚úÖ STAC/DCAT Validation] & D7[‚úÖ Story Node Cross-check] & D8[‚úÖ Telemetry Logging]
    D1 & D2 & D3 & D4 & D5 & D6 & D7 & D8 --> E{All Checks Passed?}
    E -- No üö´--> F[CI Fails: Block Merge, Report Issues]
    E -- Yes üéâ--> G[Merge to Main]
    G --> H[üìä Telemetry Update & Governance Ledger Entry]
    H --> I[üîç Focus Mode Indexing & Integration]
Explanation of CI stages:
Pre-Commit Hook (optional): Developers are encouraged to run a local Markdown linter (configured to KFM rules) before pushing. This uses the same rules as CI (for example, a mcplint tool configured for KFM-MDP v11) to catch errors early.
Pull Request Validation: On opening or updating a PR, GitHub Actions workflows trigger a comprehensive docs validation pipeline. This includes:
YAML Schema Check: The YAML front-matter is parsed and validated against an updated schema (markdown-protocol-v11.schema.json). Missing required fields, incorrect types, or unknown fields will cause a failure. This ensures all the new fields (STAC, story nodes, etc.) are recognized and correctly formatted.
Link & Path Check: All internal links in the Markdown are verified. The path in the YAML is cross-checked against the actual location. Also, the file‚Äôs presence in expected table of contents or manifest might be checked (if applicable).
MCP/KFM Lint: The Master Coder Protocol lint (MCP-DL v6.3 rules) combined with KFM-specific rules (v11) run to catch structural issues: heading order, improper code fences, forbidden HTML, missing sections, etc. This is an expanded version of what markdown_rules.md v10.4 enforced, updated for new rules. For example, it will catch if a Focus Summary blockquote is malformed, or if an emoji-only heading is used.
Accessibility Audit: The CI will run an accessibility checker (possibly a custom script or a tool like MDLint with accessibility plugins). It looks for things like images without alt text, long lines of all-caps (which could indicate an acronym not explained), color references, etc. It also ensures accessibility_compliance is declared in YAML and matches the actual content (e.g., if someone sets "WCAG 2.1 AAA" but the content isn‚Äôt, that‚Äôs a human review thing; primarily it ensures the field is present).
FAIR+CARE Scan: This step programmatically searches for required CARE labels and FAIR terms in the content. If a document deals with indigenous data or sensitive topics, it should have CARE indicators (either in YAML or in content). The scan also ensures no disallowed sensitive details are present unmasked (for instance, coordinates of a sacred site might be flagged if present). This is part of ethical compliance.
STAC/DCAT Validation: If stac_ref or dcat_ref are provided, the CI will attempt to fetch or validate those JSON files against their schemas (STAC and DCAT schemas). Additionally, if the document describes a dataset but no STAC/DCAT is referenced, a warning or error may be raised to prompt adding one. This check ties the documentation to the data governance pipeline, ensuring that documentation doesn‚Äôt stray from what‚Äôs registered in catalogs.
Story Node Cross-check: If story_node_refs are present, the CI will verify that those references correspond to known Story Node identifiers (perhaps by checking a registry or list of valid IDs). This prevents typos in Story Node URNs from going unnoticed. If a referenced Story Node doesn‚Äôt exist, the author might be required to create it elsewhere or correct the reference.
Telemetry Logging: Upon a successful validation, the CI will update the documentation telemetry (for example, appending an entry in focus-telemetry.json or a database) noting that this document version exists and is compliant. This telemetry is used to inform Focus Mode and governance reports about documentation coverage, update frequency, and usage. It includes things like word count, last updated timestamp, which sections are present (for Focus Mode feature usage), etc.
Merge and Post-Merge: Only if all checks pass (no ‚ùå in any stage) can the PR be merged. A failure in any required check will block the merge (status checks are required). Assuming success:
The new document version is merged into main. At this point, an automated process logs the event: the event_source_id (ledger entry) is updated to reflect this version, including its doc_uuid and hash for immutability tracking in the governance ledger.
The telemetry and ledger update ensures that from here on, any Focus Mode or AI features have the latest content available. The ledger also serves as an auditable trail for compliance audits.
Focus Mode indexing is triggered or scheduled: the content is indexed for search and narrative linking. For example, the story nodes in the doc are now connected, the Focus summaries are extracted for quick reference, timeline entries might be pulled into a timeline service, etc. This makes the document immediately available in the interactive system.
Continuous Enforcement: Even after merge, if later analysis (or external changes) find an issue (for instance, a previously acceptable link becomes broken, or a new accessibility guideline needs retrofitting), the CI can be re-run on all docs periodically. Documentation that drifts out of compliance might cause a nightly build to fail, prompting maintainers to update it. This ensures long-term quality, not just one-time pass.
In summary, the CI/CD pipeline is the gatekeeper of the KFM Markdown Protocol. Authors should treat a CI docs failure as a non-negotiable to-do list ‚Äì the document isn‚Äôt ‚Äúdone‚Äù until CI is green. The extensive checks implemented for v11.0 give us high confidence that any document in the repo is consistent, accessible, and integrated with our data and AI systems. (The above Mermaid diagram illustrates the lifecycle: an author writes content, it goes through PR checks, merges, then is used in Focus Mode. Every step is enforced by automation.)
üï∞Ô∏è Version History
Version	Date	Author	Summary of Changes
v11.0.0	2025-11-17	KFM Core Team	Major upgrade ‚Äì Introduced extended YAML front-matter (STAC/DCAT/PROV-O metadata, Story Node links), Focus Mode v3 compatibility features (timeline tables, 3D scene references, summary callouts), stricter semantic heading rules with standardized emojis, enhanced accessibility targets (WCAG 2.1 AA+), new metadata-driven badges, refined naming conventions, and fully integrated CI enforcement for all new rules. Backward-compatible with v10.4.0.
v10.4.3	2025-11-16	Docs Council	Minor revision ‚Äì Refinements to rules (telemetry alignment, directory format enforcement).
v10.4.0	2025-11-14	Docs Council	Original KFM Markdown Protocol governance release (baseline 80-component standard under MCP v6.3).
<div align="center"> ¬© 2025 Kansas Frontier Matrix ‚Äî CC-BY 4.0
Master Coder Protocol v6.3 Compatible ¬∑ FAIR+CARE Certified
Diamond‚Åπ Œ© / Crown‚àûŒ© Ultimate Certified (Draft v11.0) </div> ```
All Sources
