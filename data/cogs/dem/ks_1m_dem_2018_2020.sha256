DEM="data/cogs/dem/ks_1m_dem_2018_2020.tif"
OUT="data/cogs/dem/ks_1m_dem_2018_2020.sha256"

[[ -f "$DEM" ]] || { echo "Missing $DEM" >&2; exit 1; }

# Linux (sha256sum) or macOS (shasum) — write "HASH␠␠FILENAME"
if command -v sha256sum >/dev/null 2>&1; then
  ( cd "$(dirname "$DEM")" && sha256sum "$(basename "$DEM")" > "$(basename "$OUT")" )
else
  ( cd "$(dirname "$DEM")" && shasum -a 256 "$(basename "$DEM")" > "$(basename "$OUT")" )
fi

echo "✅ Wrote $OUT"
# Quick verify
( cd "$(dirname "$OUT")" && sha256sum -c "$(basename "$OUT")" 2>/dev/null || shasum -a 256 -c "$(basename "$OUT")" )

