<div align="center">

# ğŸ“Š Kansas Frontier Matrix â€” Tabular Staging Data  
`data/work/staging/tabular/`

**â€œWhere raw Kansas data becomes structured knowledge.â€**

[![Build & Deploy](https://github.com/bartytime4life/Kansas-Frontier-Matrix/actions/workflows/site.yml/badge.svg)](../../../../.github/workflows/site.yml)
[![STAC Validate](https://img.shields.io/badge/STAC-validate-blue)](../../../../.github/workflows/stac-validate.yml)
[![Docs Â· MCP](https://img.shields.io/badge/Docs-MCP-green)](../../../../docs/)
[![License: CC-BY 4.0](https://img.shields.io/badge/License-CC--BY%204.0-lightgrey)](../../../../LICENSE)

</div>

---

## ğŸ§­ Overview

The `data/work/staging/tabular/` directory serves as a **controlled workspace** for *intermediate CSV, TSV, or Parquet files* generated by the Kansas Frontier Matrix ETL pipeline.  
It provides a structured checkpoint between **raw source ingestion** and **processed outputs** destined for the `data/processed/` and `data/stac/` layers.

These tabular files typically include:

- Cleaned and normalized **attribute tables** derived from NOAA, USGS, FEMA, and other Kansas data sources.  
- Extracted **event and entity metadata** from historical documents (e.g., people, places, and dates parsed via NLP).  
- Joined cross-domain data (e.g., treaty boundaries + land patent records + environmental attributes).  
- Computed **summary statistics or indicators** (e.g., drought severity index by county-year).  

All tables adhere to **CSVW** and **DCAT-inspired metadata** practices for interoperability and reproducibility.

---

## ğŸ§© Role in the Pipeline

```mermaid
flowchart LR
  A["data/sources/\nJSON manifests"] --> B["data/raw/\noriginal CSVs"]
  B --> C["data/work/staging/tabular/\ncleaned + normalized"]
  C --> D["data/processed/\nvalidated CSV Â· GeoJSON"]
  D --> E["data/stac/\nSTAC Items + metadata"]
  C --> F["graph ingestion\n(entity linking, CIDOC CRM mapping)"]
%% END OF MERMAID
````

In this stage, the ETL pipeline:

1. **Validates schema consistency** â€” checks headers, types, missing values.
2. **Normalizes field names** â€” applies lowercase_snake_case and harmonized schemas.
3. **Adds provenance metadata** â€” inserts `source_id`, `etl_commit`, `ingested_at`.
4. **Prepares temporal fields** â€” converts dates to ISO-8601 and aligns with OWL-Time intervals.
5. **Exports intermediate artifacts** for downstream graph or GIS integration.

---

## ğŸ§± Directory Layout

```bash
data/work/staging/tabular/
â”œâ”€â”€ README.md                 # This documentation
â”œâ”€â”€ validation/               # Temporary schema & type check logs
â”œâ”€â”€ normalized/               # Clean CSVs ready for STAC/graph load
â”œâ”€â”€ joins/                    # Cross-source joins (e.g., land + hydro + treaty)
â”œâ”€â”€ indicators/               # Derived metrics (climate, hydrology, demography)
â””â”€â”€ tmp/                      # Temporary working files (auto-cleaned by Makefile)
```

---

## âš™ï¸ Usage

```bash
# Clean and validate raw CSVs
make tabular-normalize

# Join multi-domain tables (e.g., climate + county boundaries)
make tabular-join

# Export normalized tables to processed/
make tabular-export
```

---

## ğŸ§¾ Standards & Metadata

* **CSVW (CSV on the Web)** â€” column definitions, datatypes, and JSON schema sidecars
* **DCAT** â€” dataset metadata in STAC items for discoverability
* **CIDOC CRM & OWL-Time** â€” entity/time semantics for graph ingestion
* **Provenance** â€” each table includes columns: `source`, `license`, `etl_commit`, `sha256`

---

## ğŸ” Provenance & Integrity

| File Type     | Description                | Integrity Method          |
| ------------- | -------------------------- | ------------------------- |
| `*.csv`       | Normalized tabular outputs | SHA-256 checksums         |
| `*.meta.json` | Schema/metadata            | JSON Schema validation    |
| Logs          | ETL validation output      | Git-tracked & timestamped |

Checksums are stored in `checksums.sha256`.
A successful ETL run will update this file automatically via `make checksums`.

---

## ğŸ§  Related Documentation

* [Architecture Overview](../../../../docs/architecture.md)
* [ETL Pipeline SOP](../../../../docs/sop.md)
* [Model & Experiment Logs](../../../../docs/experiment.md)
* [STAC Catalog](../../../stac/catalog.json)

---

## ğŸªª License

All tabular datasets and derived works are released under **CC-BY-4.0**, unless otherwise noted.
Cite Kansas Frontier Matrix when using or redistributing derivative data.

