---
title: "üîó Kansas Frontier Matrix ‚Äî TMP Provenance Staging (Pre-Ledger Lineage Assembly)"
path: "data/work/staging/tabular/normalized/tmp/provenance_staging/README.md"
document_type: "Provenance Workflow ¬∑ Pre-Ledger Assembly Zone"
version: "v2.0.0"
last_updated: "2025-10-25"
review_cycle: "Continuous / Daily Lineage Validation"
commit_sha: "<latest-commit-hash>"
sbom_ref: "releases/v2.0.0/sbom.spdx.json"
manifest_ref: "releases/v2.0.0/manifest.zip"
license: ["MIT (code)", "CC-BY 4.0 (data/docs)"]
owners: ["@kfm-data-engineering", "@kfm-validation"]
approvers: ["@kfm-governance", "@kfm-ethics"]
status: "Active ¬∑ FAIR+CARE+ISO Certified"
maturity: "Stable"
mcp_version: "MCP-DL v6.3"
tags: ["Provenance", "FAIR", "PROV-O", "CIDOC CRM", "ETL", "Governance", "Audit", "Lineage", "Temporary", "Data Integrity"]
---

<div align="center">

# üîó Kansas Frontier Matrix ‚Äî **TMP Provenance Staging (Pre-Ledger Lineage Assembly)**  
`data/work/staging/tabular/normalized/tmp/provenance_staging/README.md`

**Purpose:** Act as the **intermediate provenance assembly area** for ETL and validation processes in the **Kansas Frontier Matrix (KFM)**.  
This directory holds **temporary PROV-O lineage files**, **activity chains**, and **entity relationship definitions** before they are finalized, signed, and promoted into the **Governance Ledger**.  
It bridges the gap between **raw lineage generation (TMP)** and **immutable governance registration (Ledger)**.

[![Docs ¬∑ MCP-DL v6.3](https://img.shields.io/badge/Docs-MCP--DL%20v6.3-blue)](../../../../../../../docs/architecture/repo-focus.md)
[![FAIR+CARE](https://img.shields.io/badge/FAIR%2BCARE-Verified-lightblue)]()
[![PROV-O](https://img.shields.io/badge/Linked%20Data--PROV--O-green)]()
[![ISO 25012](https://img.shields.io/badge/ISO--25012-Data%20Quality-orange)]()
[![Governance Ledger](https://img.shields.io/badge/Ledger-Pending%20Registration-yellow)]()

</div>

---

## üóÇÔ∏è Directory Layout

```plaintext
provenance_staging/
‚îú‚îÄ‚îÄ activities/                 # PROV-O activity records generated from ETL and validation runs
‚îÇ   ‚îú‚îÄ‚îÄ normalize_treaty_v6.3.jsonld
‚îÇ   ‚îú‚îÄ‚îÄ stac_validation_batch.jsonld
‚îÇ   ‚îî‚îÄ‚îÄ ai_summary_generation.jsonld
‚îú‚îÄ‚îÄ entities/                   # Dataset entities and derived objects awaiting ledger registration
‚îÇ   ‚îú‚îÄ‚îÄ treaties_2025_10_entities.jsonld
‚îÇ   ‚îú‚îÄ‚îÄ ai_reports_entities.jsonld
‚îÇ   ‚îî‚îÄ‚îÄ stac_catalog_entities.jsonld
‚îú‚îÄ‚îÄ agents/                     # Human or machine agents responsible for transformations
‚îÇ   ‚îú‚îÄ‚îÄ kfm_data_engineering.jsonld
‚îÇ   ‚îú‚îÄ‚îÄ kfm_validation.jsonld
‚îÇ   ‚îî‚îÄ‚îÄ kfm_ai_lab.jsonld
‚îú‚îÄ‚îÄ chain_compilation.jsonld    # Combined temporary provenance graph (activities + entities + agents)
‚îú‚îÄ‚îÄ validation_summary.json     # Provenance schema QA metrics and alignment checks
‚îú‚îÄ‚îÄ manifest.json               # Index of all files pending ledger promotion
‚îî‚îÄ‚îÄ README.md                   # ‚Üê You are here
```

---

## üß≠ Overview

The **Provenance Staging Layer** acts as a **sandbox for assembling, cross-referencing, and validating** provenance chains generated by:
- **ETL pipelines** (`src/pipelines/normalize.py`)
- **Schema validation modules** (`stac-validator`, `dcat-validator`)
- **Ontology linkers** (CIDOC CRM / OWL-Time)
- **AI validation engines** (`reviewer_agent.py`)

Each record describes **how, when, and by whom** a dataset was created, validated, or modified ‚Äî using a standardized **PROV-O + CIDOC CRM hybrid model**.  
Artifacts in this directory are considered **transient but reproducible** until approved and sealed in the **Governance Ledger**.

---

## ‚öôÔ∏è Provenance Assembly Workflow

```mermaid
flowchart TD
    A["ETL or Validation Process"] --> B["Generate Raw PROV-O Entities (activities/entities/agents)"]
    B --> C["Assemble into Chain Compilation (chain_compilation.jsonld)"]
    C --> D["Run Provenance QA (validation_summary.json)"]
    D --> E["Submit for Governance Review"]
    E --> F["Ledger Registration and Archival"]
```

---

## üß© Core Artifacts

### 1Ô∏è‚É£ Activity Provenance (`activities/*.jsonld`)

Records discrete transformation or validation actions as **prov:Activity** instances.

```json
{
  "@context": "https://www.w3.org/ns/prov#",
  "@id": "urn:kfm:activity:normalize_treaty_v6.3",
  "prov:type": "NormalizationActivity",
  "prov:used": "data/raw/treaties/1867_medicine_lodge.csv",
  "prov:wasAssociatedWith": "@kfm-data-engineering",
  "prov:generatedAtTime": "2025-10-25T12:20:00Z",
  "prov:generated": "data/work/staging/tabular/normalized/tmp/normalization_buffer/KS_TREATY_1867_03_MEDICINE_LODGE.json"
}
```

---

### 2Ô∏è‚É£ Entity Provenance (`entities/*.jsonld`)

Tracks data products (e.g., treaty JSON, AI summary) as **prov:Entity** nodes.

```json
{
  "@context": "https://www.w3.org/ns/prov#",
  "@id": "urn:kfm:entity:KS_TREATY_1867_03_MEDICINE_LODGE",
  "prov:type": "Dataset",
  "prov:wasGeneratedBy": "urn:kfm:activity:normalize_treaty_v6.3",
  "prov:wasDerivedFrom": "data/raw/treaties/1867_medicine_lodge.pdf",
  "prov:value": "Normalized treaty dataset JSON (v6.3)",
  "prov:generatedAtTime": "2025-10-25T12:25:00Z"
}
```

---

### 3Ô∏è‚É£ Agent Provenance (`agents/*.jsonld`)

Defines human or system actors involved in provenance creation.

```json
{
  "@context": "https://www.w3.org/ns/prov#",
  "@id": "urn:kfm:agent:kfm_validation",
  "prov:type": "SoftwareAgent",
  "prov:actedOnBehalfOf": "@kfm-governance",
  "prov:label": "KFM Validation Pipeline (v6.3)"
}
```

---

### 4Ô∏è‚É£ Chain Compilation (`chain_compilation.jsonld`)

Aggregates all provenance nodes (activities, entities, agents) into a single composite graph for submission.

```json
{
  "@context": "https://www.w3.org/ns/prov#",
  "@graph": [
    {"@id": "urn:kfm:activity:normalize_treaty_v6.3", "prov:type": "NormalizationActivity"},
    {"@id": "urn:kfm:entity:KS_TREATY_1867_03_MEDICINE_LODGE", "prov:wasGeneratedBy": "urn:kfm:activity:normalize_treaty_v6.3"},
    {"@id": "urn:kfm:agent:kfm_data_engineering", "prov:type": "Agent"}
  ],
  "compiled_at": "2025-10-25T12:40:00Z",
  "compiled_by": "@kfm-data-engineering"
}
```

---

### 5Ô∏è‚É£ Validation Summary (`validation_summary.json`)

Summarizes QA metrics for the entire provenance staging batch.

```json
{
  "generated_at": "2025-10-25T13:00:00Z",
  "activities_checked": 12,
  "entities_verified": 48,
  "agents_verified": 5,
  "invalid_references": 0,
  "missing_links": 0,
  "cross_schema_alignment": "PASS",
  "reviewed_by": "@kfm-validation"
}
```

---

### 6Ô∏è‚É£ Manifest (`manifest.json`)

Tracks all files pending governance submission.

```json
{
  "batch_id": "tmp_prov_2025-10-25",
  "files": [
    "activities/normalize_treaty_v6.3.jsonld",
    "entities/treaties_2025_10_entities.jsonld",
    "chain_compilation.jsonld"
  ],
  "pending_approval": true,
  "expected_ledger_entry": "governance/ledger/validation/2025/10/provenance_entry.jsonld"
}
```

---

## üîí Governance & Compliance

Each compiled chain must pass:
- **Checksum validation:** (linked to `/checksums/archive/`)  
- **Ontology mapping verification:** (CIDOC CRM / PROV-O)  
- **Human review:** via `@kfm-validation` or `@kfm-ethics`  
- **Digital signature registration:** in `/governance/ledger/validation/YYYY/MM/`

Once approved, entries are archived under `/data/work/staging/tabular/normalized/treaties/reports/provenance/`.

---

## üìä Provenance QA Metrics

| Metric | Description | Target |
|--------|--------------|---------|
| PROV-O Chain Completeness | % of nodes linked correctly (activity ‚Üí entity ‚Üí agent) | 100% |
| Ontology Alignment | CIDOC CRM + PROV-O mapping rate | ‚â• 95% |
| Pending Ledger Entries | Items awaiting governance approval | ‚â§ 10 |
| Provenance Drift | Chain mismatch vs. final ledger | 0% |
| Validation Success Rate | Overall pass rate per batch | ‚â• 98% |

---

## ‚öñÔ∏è FAIR+CARE & ISO Alignment Summary

| Standard | Implementation | Artifact |
|-----------|----------------|-----------|
| **FAIR F1-F4** | Persistent URN-based identifiers in all PROV-O entities. | chain_compilation.jsonld |
| **CARE (Ethics)** | Provenance ensures responsible and transparent lineage for Indigenous-related data. | validation_summary.json |
| **ISO 19115** | Provenance metadata links spatial and temporal elements from STAC/OWL-Time. | entities/*.jsonld |
| **ISO 25012** | Validates data quality: accuracy, consistency, traceability, accountability. | validation_summary.json |
| **MCP-DL v6.3** | Enforces documentation-first, verifiable provenance chain across workflows. | manifest.json |

---

## üßæ Version History

| Version | Date | Author | Reviewer | Notes |
|----------|------|---------|-----------|--------|
| v2.0.0 | 2025-10-25 | @kfm-data-engineering | @kfm-governance | Added chain compilation schema, governance linkage, and FAIR+CARE mapping. |
| v1.1.0 | 2025-10-24 | @kfm-validation | @kfm-data-engineering | Added agent provenance handling and validation summary reporting. |
| v1.0.0 | 2025-10-23 | @kfm-validation | ‚Äî | Initial creation of provenance staging directory and pre-ledger assembly specification. |

---

<div align="center">

[![Docs ¬∑ MCP-DL v6.3](https://img.shields.io/badge/Docs-MCP--DL%20v6.3-blue)]()
[![FAIR+CARE](https://img.shields.io/badge/FAIR%2BCARE-Compliant-lightblue)]()
[![PROV-O](https://img.shields.io/badge/Linked%20Data--PROV--O-green)]()
[![CIDOC CRM](https://img.shields.io/badge/Ontology-CIDOC%20CRM-orange)]()
[![Governance Ledger](https://img.shields.io/badge/Ledger-Traceable-yellow)]()

</div>

