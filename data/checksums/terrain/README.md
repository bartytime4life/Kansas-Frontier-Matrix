<div align="center">

# ğŸ”ï¸ Kansas Frontier Matrix â€” Terrain Checksums  
`data/checksums/terrain/`

**Mission:** Maintain **integrity, reproducibility, and provenance** for all terrain and elevation datasets  
within Kansas Frontier Matrix â€” ensuring every Digital Elevation Model (DEM), hillshade, and slope/aspect raster  
is cryptographically validated, auditable, and STAC-linked.

[![Build & Deploy](https://github.com/bartytime4life/Kansas-Frontier-Matrix/actions/workflows/site.yml/badge.svg)](../../../.github/workflows/site.yml)
[![STAC Validate](https://github.com/bartytime4life/Kansas-Frontier-Matrix/actions/workflows/stac-validate.yml/badge.svg)](../../../.github/workflows/stac-validate.yml)
[![Trivy Security](https://github.com/bartytime4life/Kansas-Frontier-Matrix/actions/workflows/trivy.yml/badge.svg)](../../../.github/workflows/trivy.yml)
[![Docs Â· MCP](https://img.shields.io/badge/Docs-MCP-blue)](../../../docs/)
[![License: Data](https://img.shields.io/badge/License-CC--BY%204.0-green)](../../../LICENSE)

</div>

---

## ğŸ“š Overview

This directory stores **SHA-256 checksum files (`.sha256`)** for all processed **terrain datasets**  
contained in Kansas Frontier Matrix (KFM).  

Checksums guarantee:
- **Data Integrity** â€” verifies that raster files remain unaltered after processing.  
- **Reproducibility** â€” ensures identical ETL outputs across systems and builds.  
- **Provenance** â€” ties datasets to their metadata and STAC records for transparent lineage.  
- **Auditability** â€” validated continuously through CI/CD pipelines.

All checksums are generated by the **terrain ETL pipeline** (`make terrain`) and validated automatically during CI runs.

---

## ğŸ—‚ï¸ Directory Layout

```bash
data/checksums/terrain/
â”œâ”€â”€ README.md
â”œâ”€â”€ ks_1m_dem_2018_2020.tif.sha256
â”œâ”€â”€ ks_hillshade_2018_2020.tif.sha256
â””â”€â”€ slope_aspect_2018_2020.tif.sha256
````

> **Note:** Each `.sha256` file represents a verified hash for a raster dataset in
> `data/processed/terrain/` and is validated automatically via `sha256sum -c` in CI.

---

## ğŸ” Purpose of Checksums

| Objective           | Description                                                 |
| :------------------ | :---------------------------------------------------------- |
| **Integrity**       | Detects file corruption, modification, or replacement.      |
| **Reproducibility** | Ensures ETL re-runs yield identical data outputs.           |
| **Provenance**      | Establishes immutable data lineage across terrain products. |
| **Automation**      | CI/CD validation re-checks every hash before deployment.    |

---

## ğŸ§® Example `.sha256` File

```bash
# File: ks_1m_dem_2018_2020.tif.sha256
f3c0b929a38ef47c7b41138dd726abf84a65a03b8b24e8e12db2fa89a5740c42  ks_1m_dem_2018_2020.tif
```

This file validates the integrity of
`data/processed/terrain/ks_1m_dem_2018_2020.tif`.

---

## âš™ï¸ Checksum Generation Workflow

Checksums are generated automatically after each ETL pipeline run.

**Makefile target:**

```bash
make terrain-checksums
```

**Python command:**

```bash
python src/utils/generate_checksums.py data/processed/terrain/ --algo sha256
```

**Workflow Steps:**

1. Scan `data/processed/terrain/` for raster outputs (`.tif`, `.cog`).
2. Compute SHA-256 hashes using Pythonâ€™s `hashlib`.
3. Write `<filename>.sha256` to this directory.
4. Validate checksums during CI runs (`stac-validate.yml`).

---

## ğŸ§° CI/CD Validation

Checksum validation runs automatically in GitHub Actions workflows.

**Command used in CI:**

```bash
sha256sum -c data/checksums/terrain/*.sha256
```

If a hash mismatch occurs, the build fails, preventing unverified data from being
included in the published dataset catalog.

---

## ğŸ§© Integration with Metadata & STAC

| Linked Component                            | Purpose                                                        |
| :------------------------------------------ | :------------------------------------------------------------- |
| `data/processed/terrain/metadata/`          | STAC items reference checksum files for validation.            |
| `src/pipelines/terrain/terrain_pipeline.py` | Handles checksum generation and verification.                  |
| `.github/workflows/stac-validate.yml`       | Automates checksum revalidation during CI/CD.                  |
| `data/stac/terrain/`                        | STAC catalog includes checksum references for reproducibility. |

---

## ğŸ§  MCP Compliance Summary

| MCP Principle           | Implementation                                     |
| :---------------------- | :------------------------------------------------- |
| **Documentation-first** | README + `.sha256` per terrain dataset.            |
| **Reproducibility**     | Deterministic hashes confirm identical outputs.    |
| **Open Standards**      | SHA-256 (FIPS 180-4) cryptographic algorithm.      |
| **Provenance**          | Hashes link datasets to metadata and STAC entries. |
| **Auditability**        | CI validation ensures consistent verification.     |

---

## ğŸ“… Version History

| Version | Date       | Summary                                                                                       |
| :------ | :--------- | :-------------------------------------------------------------------------------------------- |
| v1.0    | 2025-10-04 | Initial terrain checksum documentation and validation â€” DEM, hillshade, slope/aspect rasters. |

---

<div align="center">

**Kansas Frontier Matrix** â€” *â€œElevation Verified, Integrity Preserved.â€*
ğŸ“ [`data/checksums/terrain/`](.) Â· Linked to the **Terrain STAC Collection**

</div>
