# QA Notes â€” `<dataset_slug>` ğŸ§ªğŸ—ºï¸

![QA](https://img.shields.io/badge/QA-notes-blue)
![Dataset](https://img.shields.io/badge/dataset-%3Cdataset__slug%3E-orange)
![Status](https://img.shields.io/badge/status-draft-lightgrey)
![Governance](https://img.shields.io/badge/governance-fail--closed-red)
![Pipeline](https://img.shields.io/badge/pipeline-raw%E2%86%92processed%E2%86%92catalog%2Fprov%E2%86%92db%E2%86%92api%E2%86%92ui-success)

> ğŸ“Œ **Purpose:** This note captures the QA pass for the dataset mapping in  
> `ğŸ“ data/external/mappings/<dataset_slug>/`  
> with a focus on **traceability**, **metadata completeness**, **spatial/temporal correctness**, and **KFM governance alignment**.

---

## ğŸ“ File + Folder Context

**This file lives at:**
- `ğŸ“„ data/external/mappings/<dataset_slug>/attachments/notes/2026-01-30__qa.md`

**Expected sibling context (typical):**
```text
ğŸ“ data/external/
â”œâ”€ ğŸ“ raw/<dataset_slug>/                       # immutable snapshots
â”œâ”€ ğŸ“ processed/<dataset_slug>/                 # cleaned/standardized outputs
â”œâ”€ ğŸ“ catalog/<dataset_slug>/                   # STAC/DCAT descriptors
â”œâ”€ ğŸ“ provenance/<dataset_slug>/                # PROV lineage docs
â””â”€ ğŸ“ mappings/<dataset_slug>/
   â”œâ”€ ğŸ“„ mapping.(yml|yaml|json)                # mapping contract/spec
   â””â”€ ğŸ“ attachments/
      â”œâ”€ ğŸ“ notes/
      â”œâ”€ ğŸ“ media/
      â””â”€ ğŸ“ refs/
```

> ğŸ§­ **Key principle:** we do not â€œjumpâ€ stages. Any dataset that ends up in the UI must be validated and cataloged through the canonical pipeline.  [oai_citation:0â€¡Kansas Frontier Matrix (KFM) â€“ Comprehensive Technical Blueprint.pdf](sediment://file_000000006dbc71f89a5094ce310a452d)

---

## ğŸ”— Quick Links

Fill these in once the mapping + artifacts exist:

- **Mapping spec:** `../mapping.(yml|yaml|json)`
- **Raw snapshot:** `../../raw/<dataset_slug>/...`
- **Processed outputs:** `../../processed/<dataset_slug>/...`
- **Catalog records:** `../../catalog/<dataset_slug>/...`
- **Provenance (PROV):** `../../provenance/<dataset_slug>/...`
- **DB target:** `postgis.<schema>.<table>`
- **API endpoint(s):** `/api/<route>` (FastAPI)
- **UI layer usage:** `<map-layer-id>` / `<story-node-id>` (if applicable)

---

## ğŸ§± KFM Pipeline Alignment

```mermaid
flowchart LR
  A[ğŸ“¥ Raw] --> B[ğŸ§¼ Processed]
  B --> C[ğŸ—‚ï¸ Catalog + ğŸ”— Provenance]
  C --> D[ğŸ—„ï¸ Database]
  D --> E[ğŸ”Œ API]
  E --> F[ğŸ–¥ï¸ UI]
```

**Non-negotiables (QA lens):**
- âœ… Data follows **Raw â†’ Processed â†’ Catalog/Prov â†’ Database â†’ API â†’ UI**.  [oai_citation:1â€¡Kansas Frontier Matrix (KFM) â€“ Comprehensive Technical Blueprint.pdf](sediment://file_000000006dbc71f89a5094ce310a452d)
- âœ… Governance is **fail-closed**: missing license / checks failing must block merge or release.  [oai_citation:2â€¡Kansas Frontier Matrix (KFM) â€“ Comprehensive Technical Blueprint.pdf](sediment://file_000000006dbc71f89a5094ce310a452d)
- âœ… FAIR + CARE principles show up as **real checks** (metadata, licensing, access tiers, etc.).  [oai_citation:3â€¡Kansas Frontier Matrix (KFM) â€“ Comprehensive Technical Blueprint.pdf](sediment://file_000000006dbc71f89a5094ce310a452d)

---

## âœ… Definition of Done

A QA pass is â€œdoneâ€ when **all** are true:

- [ ] ğŸ§¾ **License** is explicit + compatible + stored with the dataset submission (and enforced).
- [ ] ğŸ§¬ **Provenance** can trace every processed record back to a raw artifact (checksums + lineage steps).
- [ ] ğŸ—‚ï¸ **Catalog metadata** exists (STAC/DCAT) and is complete enough for discovery + reuse.
- [ ] ğŸ§­ **Spatial reference** is unambiguous (CRS/datum) and transformations are documented.
- [ ] ğŸ•°ï¸ **Temporal semantics** are unambiguous (timezone/granularity; no â€œmystery datesâ€).
- [ ] ğŸ§¹ Core data-quality issues are addressed (missing/duplicate/implausible/outdated/wrong/ambiguous).
- [ ] ğŸ—„ï¸ DB load validates constraints; API surfaces expected outputs; UI consumes API only.

---

## ğŸ§ª QA Run Log

| Run ID | Date (local) | Dataset Version / Commit | Sampled Rows | Result | Notes |
|---|---:|---|---:|---|---|
| QA-001 | 2026-01-30 | `<commit-or-tag>` | `<n>` | â¬œ Pass / â¬œ Fail | `<summary>` |

---

## ğŸ” QA Checklist

> Tip: Treat checkboxes as **merge gates** for this dataset mapping.

### 1) ğŸ“¥ Intake, Evidence & Licensing

- [ ] **Source identified** (publisher/owner, URL/citation, retrieval date).
- [ ] **Snapshot captured** under `data/external/raw/<dataset_slug>/` (no silent updates).
- [ ] **Checksums recorded** (at least raw artifacts; ideally processed too).
- [ ] **License present** and explicit (no â€œunknownâ€ / â€œassume openâ€).  
  - [ ] If license is missing â†’ **fail closed** (block).  [oai_citation:4â€¡Kansas Frontier Matrix (KFM) â€“ Comprehensive Technical Blueprint.pdf](sediment://file_000000006dbc71f89a5094ce310a452d)
- [ ] **Use constraints** documented (redistribution? derivative works? attribution?).

**Evidence notes:**
- Source(s): `<fill>`
- Retrieval method: `<fill>`
- License: `<fill>`

---

### 2) ğŸ—‚ï¸ Metadata Completeness

Dependable GIS data should carry metadata that includes identification, quality, spatial representation, spatial reference, entity/attribute info, distribution/use policy, citation, temporal, and contact info.  [oai_citation:5â€¡making-maps-a-visual-guide-to-map-design-for-gis.pdf](sediment://file_00000000602471f786dfbbaac9329fb9)

| Metadata Area | Required | Status | Where | Notes |
|---|:---:|:---:|---|---|
| Identification (what is it?) | âœ… | â¬œ | `<file>` | |
| Quality (accuracy/completeness) | âœ… | â¬œ | `<file>` | |
| Spatial data organization | âœ… | â¬œ | `<file>` | |
| Spatial reference (CRS/projection/datum) | âœ… | â¬œ | `<file>` | |
| Entity & attribute definitions | âœ… | â¬œ | `<file>` | |
| Distribution + use policy | âœ… | â¬œ | `<file>` | |
| Citation instructions | âœ… | â¬œ | `<file>` | |
| Temporal collection/update info | âœ… | â¬œ | `<file>` | |
| Contact/maintainer info | âœ… | â¬œ | `<file>` | |

> ğŸ§© Standards improve interoperability across systems.  [oai_citation:6â€¡making-maps-a-visual-guide-to-map-design-for-gis.pdf](sediment://file_00000000602471f786dfbbaac9329fb9)

---

### 3) ğŸ§­ Spatial QA (CRS / Datum / Geometry)

#### 3.1 CRS + datum sanity
- [ ] CRS is explicitly declared (EPSG + WKT if possible).
- [ ] Datum is known (e.g., WGS84 vs NAD83) and consistent.
- [ ] If multiple layers are joined/combined, confirm projection/datum compatibility.  
  Projection/datum mismatches will break alignment.  [oai_citation:7â€¡making-maps-a-visual-guide-to-map-design-for-gis.pdf](sediment://file_00000000602471f786dfbbaac9329fb9)
- [ ] Any reprojection steps are documented (source â†’ canonical).

#### 3.2 Geometry validation (PostGIS)
Use/record results of at least these checks (adapt table/geom names):

```sql
-- invalid geometries
SELECT COUNT(*) AS invalid_geoms
FROM <schema>.<table>
WHERE geom IS NOT NULL AND NOT ST_IsValid(geom);

-- empties
SELECT COUNT(*) AS empty_geoms
FROM <schema>.<table>
WHERE geom IS NOT NULL AND ST_IsEmpty(geom);

-- bbox sanity (replace with expected region bounds)
SELECT
  MIN(ST_XMin(geom)) AS xmin, MIN(ST_YMin(geom)) AS ymin,
  MAX(ST_XMax(geom)) AS xmax, MAX(ST_YMax(geom)) AS ymax
FROM <schema>.<table>
WHERE geom IS NOT NULL;
```

- [ ] Invalid geometries handled (fix, drop with justification, or quarantine).
- [ ] Geometry type matches expected (POINT/LINESTRING/POLYGON/etc).
- [ ] Units sanity check after projection (meters vs degrees, etc).  
  (Projection distortions are more visible at global scale and can appear when combining layers with different projections.)  [oai_citation:8â€¡making-maps-a-visual-guide-to-map-design-for-gis.pdf](sediment://file_00000000602471f786dfbbaac9329fb9)

#### 3.3 Topology / duplicates (if applicable)
- [ ] Duplicate geometries detected (exact or near-identical).
- [ ] Self-intersections / spikes / rings validated (for polygons).
- [ ] If network/linework: check disconnected segments, overshoots/undershoots.

---

### 4) ğŸ•°ï¸ Temporal QA (if dataset has dates/times)

Time-oriented data is especially prone to quality issues (â€œdirty dataâ€) and problems may not show up until visualization/analysis starts.  [oai_citation:9â€¡Visualization of Time-Oriented Data.pdf](sediment://file_000000001468722f929b8752236e5a72)

#### 4.1 Time semantics
- [ ] Identify time fields (`event_date`, `start_date`, `end_date`, etc).
- [ ] Confirm timezone handling (explicit timezone or clearly â€œlocal timeâ€).
- [ ] Confirm granularity (date-only vs timestamp; calendar system if relevant).
- [ ] Handle ambiguous formats (`05-12` vs `12-05`, etc).  [oai_citation:10â€¡Visualization of Time-Oriented Data.pdf](sediment://file_000000001468722f929b8752236e5a72)

#### 4.2 Quality checks (single-source)
- [ ] Missing values identified and policy chosen (impute? drop? flag).  [oai_citation:11â€¡Visualization of Time-Oriented Data.pdf](sediment://file_000000001468722f929b8752236e5a72)
- [ ] Duplicate records handled.  [oai_citation:12â€¡Visualization of Time-Oriented Data.pdf](sediment://file_000000001468722f929b8752236e5a72)
- [ ] Implausible dates handled (future dates, end < start, etc).  [oai_citation:13â€¡Visualization of Time-Oriented Data.pdf](sediment://file_000000001468722f929b8752236e5a72)
- [ ] Outdated records flagged (if dataset is periodically updated).  [oai_citation:14â€¡Visualization of Time-Oriented Data.pdf](sediment://file_000000001468722f929b8752236e5a72)
- [ ] Wrong/ambiguous times corrected or quarantined.  [oai_citation:15â€¡Visualization of Time-Oriented Data.pdf](sediment://file_000000001468722f929b8752236e5a72)

#### 4.3 Irregular sampling (time series)
- [ ] If measurements are irregular, record gaps and uncertainty implications.  
  Irregular intervals are common and complicate what can be inferred between measurements.  [oai_citation:16â€¡Visualization of Time-Oriented Data.pdf](sediment://file_000000001468722f929b8752236e5a72)

---

### 5) ğŸ§© Mapping Spec QA (Schema + Semantics)

A â€œmappingâ€ is not just column renames â€” itâ€™s a **semantic contract** (types, units, enums, join keys, nullability, transforms).

- [ ] Mapping file exists and is readable: `../mapping.(yml|yaml|json)`
- [ ] Every source field that is used has:
  - [ ] destination field
  - [ ] type coercion rules
  - [ ] null-handling rules
  - [ ] unit conversions (if any)
  - [ ] enum/code normalization (if any)
- [ ] Every destination field has:
  - [ ] definition (what it means)
  - [ ] constraints (range, regex, FK, etc)
  - [ ] provenance notes (source-of-truth)

**Mapping table (fill in):**
| Source Field | Dest Field | Transform | Constraints | Notes |
|---|---|---|---|---|
| `<src>` | `<dest>` | `<rule>` | `<constraint>` | |

> ğŸ”— Data-space style integrations often require clear schema mapping + entity mapping + provenance tracking + licensing clarity.  [oai_citation:17â€¡Kansas Frontier Matrix (KFM) â€“ Comprehensive Technical Blueprint.pdf](sediment://file_000000006dbc71f89a5094ce310a452d)

---

### 6) ğŸ§¬ Provenance + Catalog Records

- [ ] **Catalog entry** exists and points to raw + processed artifacts.
- [ ] **Provenance doc** exists describing transformation lineage (W3C PROV style).
- [ ] Dataset is discoverable and traceable back to sources (the â€œmap behind the mapâ€ idea).

> KFMâ€™s goal is end-to-end traceability and a pipeline that turns raw files into trustworthy knowledge.  [oai_citation:18â€¡Kansas Frontier Matrix (KFM) â€“ Comprehensive Technical Blueprint.pdf](sediment://file_000000006dbc71f89a5094ce310a452d)

---

### 7) ğŸ—„ï¸ Database + API Integration QA

- [ ] DB table created with appropriate types.
- [ ] Constraints added where safe (PK, NOT NULL, CHECK, FK).
- [ ] Spatial index exists (GiST/SP-GiST as appropriate).
- [ ] API endpoint(s) return expected features.
- [ ] UI consumes API outputs (not direct DB access).  [oai_citation:19â€¡Kansas Frontier Matrix (KFM) â€“ Comprehensive Technical Blueprint.pdf](sediment://file_000000006dbc71f89a5094ce310a452d)

---

### 8) âš¡ Performance & Scale Notes (as needed)

If the dataset is large, record query and indexing choices.

- [ ] Baseline query timings captured (p50/p95).
- [ ] Hot queries identified (tiles, bbox filters, joins, time slicing).
- [ ] Index strategy recorded (spatial + attribute + time).
- [ ] If caching/materialization is used, record policy and invalidation.

> Reusing intermediate results can improve query execution, but caching has tradeoffs and needs careful policy.  [oai_citation:20â€¡Scalable Data Management for Future Hardware.pdf](sediment://file_000000007d74722fa87beabc663630f7)

---

### 9) ğŸ” Privacy, Rights, Community Governance

- [ ] Sensitive fields assessed (PII, locations that require tiering, restricted records).
- [ ] Access tier documented (public vs restricted vs community-controlled).
- [ ] Retraction path exists if community requests removal (CARE alignment).

---

### 10) ğŸ—ºï¸ UI Map-Readiness (if this becomes a layer)

- [ ] Symbology plan noted (classification, color, scale ranges).
- [ ] Generalization strategy noted (for zoom levels).
- [ ] Copyright risk checked: â€œmap representationâ€ can be copyrighted even if facts are not.  [oai_citation:21â€¡making-maps-a-visual-guide-to-map-design-for-gis.pdf](sediment://file_00000000602471f786dfbbaac9329fb9)

---

## ğŸ§¾ Findings & Remediation Log

| ID | Finding | Severity | Status | Fix / Notes | Owner |
|---:|---|:---:|:---:|---|---|
| 1 | `<issue>` | ğŸŸ¥ High / ğŸŸ§ Med / ğŸŸ¨ Low | â¬œ Open / â¬œ Fixed | `<how>` | `<who>` |

---

## ğŸ§  Open Questions / Needed Confirmations

- [ ] `<question 1>`
- [ ] `<question 2>`

---

## âœï¸ Sign-off

- **QA owner:** `<name>`
- **Reviewer(s):** `<names>`
- **Decision:** â¬œ Approve â¬œ Approve w/ fixes â¬œ Block

---

## ğŸ“š Sources (project docs used)

> These links/citations justify the QA structure and gating rules.

- **KFM blueprint (pipeline, fail-closed, FAIR/CARE, architecture):**  [oai_citation:22â€¡Kansas Frontier Matrix (KFM) â€“ Comprehensive Technical Blueprint.pdf](sediment://file_000000006dbc71f89a5094ce310a452d)  
  - Canonical pipeline order.  [oai_citation:23â€¡Kansas Frontier Matrix (KFM) â€“ Comprehensive Technical Blueprint.pdf](sediment://file_000000006dbc71f89a5094ce310a452d)  
  - Fail-closed governance.  [oai_citation:24â€¡Kansas Frontier Matrix (KFM) â€“ Comprehensive Technical Blueprint.pdf](sediment://file_000000006dbc71f89a5094ce310a452d)  
  - FAIR/CARE embedded in architecture.  [oai_citation:25â€¡Kansas Frontier Matrix (KFM) â€“ Comprehensive Technical Blueprint.pdf](sediment://file_000000006dbc71f89a5094ce310a452d)

- **KFM markdown/repo guide (staging, domain layout, mappings placement):**  [oai_citation:26â€¡Scalable Data Management for Future Hardware.pdf](sediment://file_000000007d74722fa87beabc663630f7)  
  - Standard staged pipeline and folder norms.  [oai_citation:27â€¡Scalable Data Management for Future Hardware.pdf](sediment://file_000000007d74722fa87beabc663630f7) [oai_citation:28â€¡Scalable Data Management for Future Hardware.pdf](sediment://file_000000007d74722fa87beabc663630f7)

- **Making Maps (metadata expectations, standards, copyright, CRS/datum risks):**  [oai_citation:29â€¡making-maps-a-visual-guide-to-map-design-for-gis.pdf](sediment://file_00000000602471f786dfbbaac9329fb9)  
  - Metadata categories checklist.  [oai_citation:30â€¡making-maps-a-visual-guide-to-map-design-for-gis.pdf](sediment://file_00000000602471f786dfbbaac9329fb9)  
  - Standards â†’ interoperability.  [oai_citation:31â€¡making-maps-a-visual-guide-to-map-design-for-gis.pdf](sediment://file_00000000602471f786dfbbaac9329fb9)  
  - Projection/datum compatibility and conversions.  [oai_citation:32â€¡making-maps-a-visual-guide-to-map-design-for-gis.pdf](sediment://file_00000000602471f786dfbbaac9329fb9)  
  - Copyright considerations for map representations.  [oai_citation:33â€¡making-maps-a-visual-guide-to-map-design-for-gis.pdf](sediment://file_00000000602471f786dfbbaac9329fb9)

- **Visualization of Time-Oriented Data (temporal semantics + quality taxonomy):**  [oai_citation:34â€¡Visualization of Time-Oriented Data.pdf](sediment://file_000000001468722f929b8752236e5a72)  
  - Dirty data + time-oriented quality emphasis.  [oai_citation:35â€¡Visualization of Time-Oriented Data.pdf](sediment://file_000000001468722f929b8752236e5a72)  
  - Common quality issues + ambiguous date formats.  [oai_citation:36â€¡Visualization of Time-Oriented Data.pdf](sediment://file_000000001468722f929b8752236e5a72)  
  - Irregular sampling implications.  [oai_citation:37â€¡Visualization of Time-Oriented Data.pdf](sediment://file_000000001468722f929b8752236e5a72)

- **Data Spaces (schema/entity mapping + provenance/licensing expectations):**  [oai_citation:38â€¡Kansas Frontier Matrix (KFM) â€“ Comprehensive Technical Blueprint.pdf](sediment://file_000000006dbc71f89a5094ce310a452d)  
  - Data protection, licensing, provenance tracking, schema/entity mapping.  [oai_citation:39â€¡Kansas Frontier Matrix (KFM) â€“ Comprehensive Technical Blueprint.pdf](sediment://file_000000006dbc71f89a5094ce310a452d)

- **Archaeological 3D GIS (validation routines as a principle when integrating complex spatial data):**  [oai_citation:40â€¡Visualization of Time-Oriented Data.pdf](sediment://file_000000001468722f929b8752236e5a72)  
  - Need for robust acquisition + validation routines.  [oai_citation:41â€¡Cloud-Based Remote Sensing with Google Earth Engine-Fundamentals and Applications.pdf](sediment://file_00000000a58071f586f00793dee712d6)

- **Scalable Data Management (performance + caching tradeoffs):**  [oai_citation:42â€¡Scalable Data Management for Future Hardware.pdf](sediment://file_000000007d74722fa87beabc663630f7)  
  - Intermediate result reuse and caching considerations.  [oai_citation:43â€¡Scalable Data Management for Future Hardware.pdf](sediment://file_000000007d74722fa87beabc663630f7)
